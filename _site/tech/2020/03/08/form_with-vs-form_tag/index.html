<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>form_with — Building HTML forms in Rails 5.1</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <meta name="description" content="Harmony is a free responsive jekyll theme by Gayan Virajith and Maheshika Lakmali. Sourced on Github -  https://github.com/gayanvirajith/harmony
">
        <link rel="canonical" 
        href="http://localhost:4000/tech/2020/03/08/form_with-vs-form_tag/">
        
        <!-- styles -->
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="/assets/js/modernizr.js"></script>    

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->        
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="/">Lang thang</a></h1>
                <h2>A litte of Hưng.</h2>
                <ul class="header-links" id="header-links">
	<li>
		<a href="http://localhost:4000/">Home</a><span>/</span>
	</li>
	<li>
		<a href="http://localhost:4000/life">Life</a><span>/</span>
	</li>
	<li>
		<a href="http://localhost:4000/tech">Tech</a><span>/</span>
	</li>
	<li>
		<a href="http://localhost:4000/about">About</a><span>/</span>
	</li>
	
</ul>                
            </div>
        </header>
        <div class="page-content wc-container">
	
	<div class="post">
		<h1>form_with — Building HTML forms in Rails 5.1</h1>
		<p class="post-meta">
			
      <span class="categories">
      tech
      </span> |
	    
	    <span class="post-date">
    	Mar 8, 2020 
	    </span>
		</p>		
		<div class="post">
			<blockquote>
  <p>Bài viết lấy nguồn từ bài viết <a href="https://medium.com/@tinchorb/form-with-building-html-forms-in-rails-5-1-f30bd60ef52d">form_with — Building HTML forms in Rails 5.1
</a></p>
</blockquote>

<p>A couple of months ago a PR created by kaspth was merged to rails 5.1, introducing the form_with view helper. The idea behind it is to unify the interface of form_tag and form_for by extracting both implementations to a common object. As long as developers start using this new helper, form_tag and form_for will softly get deprecated.</p>

<blockquote>
  <p>Một vài tháng trước, một pull request <a href="https://github.com/rails/rails/pull/26976">Pr</a> được tạo bởi một thím với nickname <code>kasspth</code> đã được merge vào rails 5.1 (Thời điểm tôi dịch bài này thì rails 6 đã release và sắp ra rails 7 mất rồi =))). Giới thiệu về <code>form_with</code> trong phần hỗ trợ hiển thị. Ý tưởng đằng sau là thống nhất lại giao diện của <code>form_tag</code> và <code>form_for</code>bằng cách trích xuất cả hai triển khai trên vào một đối tượng chung. Miễn là các lập trình viên bắt đầu sử dụng helper mới này, <code>form_tag</code> và <code>form_for</code> sẽ dần dần được lãng quên.</p>
</blockquote>

<h3 id="1-a-litte-bit-of-background">1. A litte bit of background</h3>
<p>(Chém gió một chút về bối cảnh)</p>

<p>Let’s say that you have a Post model and want to create a new instance of it. In Rails 4, the form_for view helper allows you to create a form for it:</p>

<blockquote>
  <p>Hãy tưởng tượng bạn có một model <code>Post</code> và muốn tạo thêm đối tượng cho nó. Trong rails 4, <code>form_for</code> đã hỗ trợ tận răng và cho phép bạn tạo form cho nó như sau:</p>
</blockquote>

<pre><code>&lt;%= form_for @post do |form| %&gt;
 &lt;%= form.text_field :author %&gt;
 &lt;%= form.submit “Create” %&gt;
&lt;% end %&gt;
</code></pre>

<p>Một view tương ứng html sẽ được sinh ra (a view html will be created)</p>

<pre><code>&lt;form class=”new_post” id=”new_post” action=”/posts” accept-charset=”UTF-8" method=”post”&gt;
 &lt;input name=”utf8" type=”hidden” value=”✓”&gt;
 &lt;input type=”hidden” name=”authenticity_token” value=”…”&gt;
 &lt;input type=”text” name=”post[author]” id=”post_author”&gt;
 &lt;input type=”submit” name=”commit” value=”Create” data-disable-with=”Create”&gt;
&lt;/form&gt;
</code></pre>

<p>The variable form yielded to the block is a FormBuilder object that incorporates the knowledge about the model object represented by :post passed to form_for.</p>

<blockquote>
  <p>Các giá trị trong block form là đối tượng được tạo ra bởi đối tượng <code>FormBuilder</code> kết hợp với thông tin được cung cấp bởi <code>:post</code> truyền vào <code>form_for</code></p>
</blockquote>

<p>What happens when you need to create a form but you don’t have an underlying model instance? Rails provides us with the form_tag helper:</p>

<blockquote>
  <p>ĐIều gì sẽ xảy ra nếu bạn muốn tạo một <code>form</code> mà không muốn cung cấp một đối tượng của model ? Khi đó rails sẽ cung cấp <code>form_tag</code> helper.</p>
</blockquote>

<pre><code>&lt;%= form_tag “/posts” do %&gt;
 &lt;%= text_field_tag “post[author]” %&gt;
 &lt;%= submit_tag “Create” %&gt;
&lt;% end %&gt;
</code></pre>

<pre><code>&lt;form action=”/posts” accept-charset=”UTF-8" method=”post”&gt;
 &lt;input name=”utf8" type=”hidden” value=”✓”&gt;
 &lt;input type=”hidden” name=”authenticity_token” value=”…”&gt;
 &lt;input type=”text” name=“post[author]” id=“post_author”&gt;
 &lt;input type=”submit” name=”commit” value=“Create” data-disable-with=“Create”&gt;
&lt;/form&gt;
</code></pre>

<p>There is no FormBuilder object in this second form. For each field that you need to add to the form, you need to use the correspondent input tag, such as text_field_tag.</p>

<blockquote>
  <p>Không có object <code>FormBuilder</code> trên form thứ hai.</p>
</blockquote>

		</div>
	</div>


	
	<div class="related">
		<h4>Related Posts</h4>
		<ul class="posts">
		    
		    <li>
			  <span>26 Feb 2020 &raquo;</span>
			  <a href="http://localhost:4000/tech/2020/02/26/clean-code-comment/">Clean code - Comment</a>
		    </li>
		    
		    <li>
			  <span>25 Feb 2020 &raquo;</span>
			  <a href="http://localhost:4000/tech/2020/02/25/clean-code-function/">Clean code - function</a>
		    </li>
		    
		    <li>
			  <span>24 Feb 2020 &raquo;</span>
			  <a href="http://localhost:4000/post/2020/02/24/gem-sidekiq/">Ruby gem - Sidekiq</a>
		    </li>
		    
		    <li>
			  <span>24 Feb 2020 &raquo;</span>
			  <a href="http://localhost:4000/tech/2020/02/24/ruby-notes/">Ruby Notes</a>
		    </li>
		    
		    <li>
			  <span>06 Jan 2020 &raquo;</span>
			  <a href="http://localhost:4000/life/2020/01/06/the-x-y-problem/">The X-Y problem</a>
		    </li>
		    
		    <li>
			  <span>06 Jan 2020 &raquo;</span>
			  <a href="http://localhost:4000/tech/2020/01/06/login-and-messaging-with-line/">Ruby - Login and messaging with line</a>
		    </li>
		    
		    <li>
			  <span>22 Dec 2019 &raquo;</span>
			  <a href="http://localhost:4000/tech/2019/12/22/rails-namespace-vs-scopes/">Rails routes namespace vs scopes</a>
		    </li>
		    
		    <li>
			  <span>22 Dec 2019 &raquo;</span>
			  <a href="http://localhost:4000/tech/2019/12/22/tat-tan-tat-ve-array-trong-ruby/">Tất tần tật về array trong ruby</a>
		    </li>
		    
		    <li>
			  <span>14 Dec 2019 &raquo;</span>
			  <a href="http://localhost:4000/2019/12/14/select-multy-categories/">Select muli categories with rails + jquery</a>
		    </li>
		    
		    <li>
			  <span>29 Nov 2019 &raquo;</span>
			  <a href="http://localhost:4000/tech/2019/11/29/where-vs-having/">SQL WHERE vs HAVING</a>
		    </li>
		    
		</ul>
	</div>
	

	<div class="post-footer">
		<div class="column-1">
			
				<a href="http://localhost:4000/tech/2020/02/26/clean-code-comment/"><< Older</a>
			
		</div>
		<div class="column-2"><a href="http://localhost:4000/ ">Home</a></div>
		<div class="column-3">
			
				<span>Newer >></span>
			
		</div>
	</div>
</div>
 

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="http://localhost:4000/about">About</a></li>
    <li><a href="http://localhost:4000/life">Life</a></li>
    <li><a href="http://localhost:4000/tech">Tech</a></li>
    <li><a href="http://localhost:4000/faq">Help / FAQ</a></li>    
</ul>		                    
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="hungnv950 on Twitter" 
            href="https://twitter.com/hungnv950" 
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>   
    

    
    <li>
        <a title="hungnv950 on Github" 
            href="https://github.com/hungnv950" 
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
     

    
    <li>
        <a title="hungnv950 on Facebook" 
            href="https://facebook.com/hungnv950" 
            class="facebook wc-img-replace" target="_blank">Facebook</a>
    </li>
    

    
    <li>
        <a title="+hungnv950 on Google Plus" 
            href="https://plus.google.com/+hungnv950" 
            class="google wc-img-replace" target="_blank">Google</a>
    </li>
    

    
    <li>
        <a title="gayan on Dribble" 
            href="https://dribbble.com/gayan" 
            class="dribble wc-img-replace" target="_blank">Dribble</a>
    </li> 
    

    

</ul>
                </div>
            </div>
            <p class="wc-container disclaimer">
                
	Made by <a href="http://gayan.me" target="_blank">Gayan Virajith</a> For everyone.      

Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>
            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'http://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="/assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
    </body>        
</html>

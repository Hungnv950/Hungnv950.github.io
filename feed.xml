<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Hungnv950</title>
    <description>Hi I a Hung Nguyen, a Web Developer and Project Manager</description>
    <link>/</link>
    <atom:link href="/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 15 Apr 2021 16:06:38 +0000</pubDate>
    <lastBuildDate>Thu, 15 Apr 2021 16:06:38 +0000</lastBuildDate>
    <generator>Jekyll v4.2.0</generator>

    
      <item>
        <title>Amazon Simple Email Service</title>
        <description>&lt;h1 id=&quot;amazon-simple-email-service&quot;&gt;Amazon Simple Email Service&lt;/h1&gt;

&lt;p&gt;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/Welcome.html&lt;/p&gt;

&lt;p&gt;Lâu rồi mới quay lại viết blog thay vì dịch tài liệu. Hôm nay có 1 task liên quan tới việc chuyển server mail từ SendGrid về ASW SES nên mình note lại các ý chính luôn. Chắc là sẽ có 1 series về phần này luôn.&lt;/p&gt;

&lt;p&gt;Trước tiên như mọi bài blog khác thì sẽ vào phần introduction luôn.&lt;/p&gt;
&lt;h3 id=&quot;giới-thiệu---amazon-ses-là-gì-&quot;&gt;Giới thiệu - Amazon SES là gì ?&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;Amazon SES là một nền tảng email cung cấp dễ dàng và tiết kiệm chi phí cho bạn có thể gửi và nhận email sử dụng email sử dụng địa chỉ email và domains của bạn.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Như thế thì đơn giản quá nhỉ. Nếu thế thì tại sao lại phải sử dụng AWS SES ?&lt;/p&gt;

&lt;p&gt;Theo như trên trang chủ của AWS thì có vẻ hợp lý:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Xây dựng một giải pháp quản lý email lớn thường rát phức tạp và tốn chi phí cho doanh nghiệp. bạn càn phải đối mặt với những thách thức về cơ sở hạ tầng cũng như quản lý máy chủ, config network và địa chỉ IP. Hơn nữa nhiều giải pháp email của bên thứ ba yêu cầu thương lượng hợp đồng và giá cả, cũng như phải trả trước một chi phí đáng kể. Amazon SES đã loại bỏ những vấn đề này và cho phép bạn thừa hưởng các lợi ích nhiều năng kinh nghiệm và cấu trúc server phức tạo từ Amazon.com đã xây dựng để phục vụ cơ sở hạ tầng lớn của họ.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;amazon-ses-and-other-aws-services&quot;&gt;Amazon SES and other AWS services&lt;/h3&gt;
&lt;p&gt;Amazon SES integrates seamlessly with other AWS products. For example, you can:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Amazon SES tích hợp một cách liền mạch với các sản phầm khác của AWS. Như ví dụ, bạn có thể:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Add email-sending capabilities to any application. If your application runs in &lt;a href=&quot;https://aws.amazon.com/ec2/&quot;&gt;Amazon Elastic Compute Cloud&lt;/a&gt; (Amazon EC2), you can use Amazon SES to send &lt;a href=&quot;https://aws.amazon.com/ses/pricing/&quot;&gt;62,000 emails every month at no additional charge&lt;/a&gt;. You can send email from Amazon EC2 by using an &lt;a href=&quot;https://aws.amazon.com/tools/#sdk&quot;&gt;AWS SDK&lt;/a&gt;, by using the Amazon &lt;a href=&quot;Amazon SES SMTP interface&quot;&gt;SES SMTP&lt;/a&gt; interface, or by making calls directly to the Amazon &lt;a href=&quot;https://docs.aws.amazon.com/ses/latest/APIReference/&quot;&gt;SES API&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Thêm khả năng gửi mail vào bất cứ ứng dụng nào. Nếu ứng dụng đang chạy trên &lt;a href=&quot;https://aws.amazon.com/ec2/&quot;&gt;Amazon Elastic Compute Cloud&lt;/a&gt; (Amazon EC2), bạn có thể sử dụng Amazon SES để gửi &lt;a href=&quot;https://aws.amazon.com/ses/pricing/&quot;&gt;62,000 email mỗi tháng mà không cần phải trả thêm phí&lt;/a&gt;. Bạn có thể gửi email từ Amazon EC2 bằng cách sử dụng &lt;a href=&quot;https://aws.amazon.com/tools/#sdk&quot;&gt;AWS SDK&lt;/a&gt;, bằng cách sử dụng phương thức Amazon &lt;a href=&quot;Amazon SES SMTP interface&quot;&gt;SES SMTP&lt;/a&gt;, hoặc bằng cách gửi trực tiếp từ Amazon &lt;a href=&quot;https://docs.aws.amazon.com/ses/latest/APIReference/&quot;&gt;SES API&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Use &lt;a href=&quot;https://aws.amazon.com/elasticbeanstalk/&quot;&gt;AWS Elastic Beanstalk&lt;/a&gt; to create an email-enabled application such as a program that uses Amazon SES to send a newsletter to customers.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Sử dụng &lt;a href=&quot;https://aws.amazon.com/elasticbeanstalk/&quot;&gt;AWS Elastic BeanStalk&lt;/a&gt; để tạo 1 ứng dụng hỗ trợ email giống như một chương trình sử dụng Amazon SES để gửi tới những người dùng mới.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Set up &lt;a href=&quot;https://aws.amazon.com/sns/&quot;&gt;Amazon Simple Notification Service (Amazon SNS)&lt;/a&gt; to notify you of your emails that bounced, produced a complaint, or were successfully delivered to the recipient’s mail server. When you use Amazon SES to receive emails, your email content can be published to Amazon SNS topics.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Cài đặt &lt;a href=&quot;https://aws.amazon.com/sns/&quot;&gt;Amazon Simple Notification Service (Amazon SNS)&lt;/a&gt; để thông báo cho bạn những email bị trả lại, đưa ra phàn nàn, hoặc đã gửi thành công cho server nhận mail. Khi bạn sử dụng Amazon SES để nhận emmails, nội dung email của bạn có thể được xuất bản lên topics của Amazon SNS&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Use the AWS Management Console to set up &lt;a href=&quot;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-dkim.html&quot;&gt;Easy DKIM&lt;/a&gt;, which is a way to authenticate your emails. Although you can use Easy DKIM with any DNS provider, it is especially easy to set up when you manage your domain with Route 53.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Sử dụng AWS Management Console để cài đặt &lt;a href=&quot;https://docs.aws.amazon.com/ses/latest/DeveloperGuide/send-email-authentication-dkim.html&quot;&gt;Easy DKIM&lt;/a&gt;, là cách để xác thực email của bạn. Tuy nhiên bạn có thể sử dụng Easy DKIM với bất kì nhà cung cấp DNS nào, nó cơ bản đơn giản để cài đặt khi bạn quản lý domain với Route 53&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Control user access to your email sending by using &lt;a href=&quot;https://aws.amazon.com/iam/&quot;&gt;AWS Identity and Access Management (IAM)&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Quản lý truy cập người dùng vào email gửi của bạn bằng cách sử dụng &lt;a href=&quot;https://aws.amazon.com/iam/&quot;&gt;AWS Identity and Access Management (IAM)&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Store emails you receive in Amazon Simple Storage &lt;a href=&quot;https://aws.amazon.com/s3/&quot;&gt;Service (Amazon S3)&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Lưu trữ những email bạn nhận được trong Amazon Simple Storage &lt;a href=&quot;https://aws.amazon.com/s3/&quot;&gt;Service (Amazon S3)&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Take action on your received emails by triggering &lt;a href=&quot;https://aws.amazon.com/lambda/&quot;&gt;AWS Lambda functions&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Thực hiện hành động với các email nhận được bằng cách sử dụng trigger &lt;a href=&quot;https://aws.amazon.com/lambda/&quot;&gt;AWS Lambda function&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Use &lt;a href=&quot;https://aws.amazon.com/kms/&quot;&gt;AWS Key Management Service (AWS KMS)&lt;/a&gt; to optionally encrypt the mail you receive in your Amazon S3 bucket.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Sử dụng &lt;a href=&quot;https://aws.amazon.com/kms/&quot;&gt;AWS Key Management Service (AWS KMS)&lt;/a&gt; để có thể tuỳ chọn mã hoá email bạn nhận được trên Amazon S3 bucket.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Use AWS CloudTrail to log Amazon SES API calls that you make using the console or the Amazon SES API.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Sử dụng AWS CloudTrail để lưu lại log Amazon SES API đã sử dụng bằng bảng điều khiển Amazon SES API.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Publish your email sending events to Amazon CloudWatch or Amazon Kinesis Data Firehose. If you publish your email sending events to Kinesis Data Firehose, you can access them in Amazon Redshift, Amazon Elasticsearch Service, or Amazon S3.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Mar 2021 00:48:45 +0000</pubDate>
        <link>/technical/2021/03/15/Amazon-Simple-Email-Serivce/</link>
        <guid isPermaLink="true">/technical/2021/03/15/Amazon-Simple-Email-Serivce/</guid>
      </item>
    
      <item>
        <title>Những điều thú vị đằng sau những mã code Ruby on Rails thường xuyên được sử dụng</title>
        <description>&lt;blockquote&gt;

  &lt;p&gt;Link bài viết gốc: &lt;a href=&quot;https://longliveruby.com/articles/the-magic-behind-ruby-code&quot;&gt;Explaining magic behind popular Ruby on Rails code&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;những-điều-thú-vị-đằng-sau-những-mã-code-ruby-on-rails-thường-xuyên-được-sử-dụng&quot;&gt;Những điều thú vị đằng sau những mã code Ruby on Rails thường xuyên được sử dụng&lt;/h2&gt;

&lt;p&gt;Khám phá Ruby code đằng sau những giải pháp phổ biến để tìm hiểu cách chúng được tạo ra&lt;/p&gt;

&lt;p&gt;Ngôn ngữ Ruby cho phép chúng ta dễ dàng tạo ra các &lt;a href=&quot;https://thecodest.co/blog/domain-specific-language/&quot;&gt;DSL&lt;/a&gt; đẹp và cú pháp thiết kế thư viện mà bất cứ ai cũng có thể dễ dàng sử dụng bất chấp với kinh nghiệm lập trình. Code thường xuyên trông thật hoàn hảo, nhưng đội khi lại không rõ ràng là làm thế nào mà nó lại giải quyết được vấn đề đó. Trong bài này, tôi sẽ giải thích một vài giải pháp khá phổ biến được sử dụng ở tương đối nhiều &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gems&lt;/code&gt;, và bạn có thể dễ dàng sử dụng nó trong dự án của bạn một khi bạn hiểu cách có thể xây dựng được 1 đoạn code tương tự.&lt;/p&gt;

&lt;h3 id=&quot;bạn-có-thể-thấy-đoạn-coe-này-ở-hầu-hết-các-ruby-gem-được-sử-dụng-để-khởi-tạo-các-biến-cần-thiết-cho-sử-dụng-sau-này&quot;&gt;Bạn có thể thấy đoạn coe này ở hầu hết các Ruby gem được sử dụng để khởi tạo các biến cần thiết cho sử dụng sau này:&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SomeGem.configure do |config|
  config.api_key = 'api_key'
  config.app_name = 'My App'
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bằng cách này các biến rất dễ dàng để đọc và mở rộng. Nó hoạt động tương tự các method về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yields&lt;/code&gt;. Trong khi mỗi phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yields&lt;/code&gt;
Chúng ta có thể xây dựng config bằng cách:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;module SomeGem
  class &amp;lt;&amp;lt; self
    attr_accessor :configuration

    def configure
      self.configuration ||= Configuration.new
      yield(configuration)
    end
  end

  class Configuration
    attr_accessor :api_key, :app_name
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bây giờ hãy thử:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SomeGem.configure do |config|
  config.api_key = 'api_key'
  config.app_name = 'My App'
end

SomeGem.configuration.api_key # =&amp;gt; 'api_key'
SomeGem.configuration.app_name # =&amp;gt; 'My App'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sau đó bạn có thể truy cập giá trị giống như bất cứ đối tượng nào khác.&lt;/p&gt;

&lt;h3 id=&quot;dynamic-methods&quot;&gt;Dynamic methods&lt;/h3&gt;

&lt;p&gt;Nếu bạn đã từng sử dụng Ruby on Rails, bạn có thể thấy các method đề cập tới các phần tử của model. Vì mã code không nhận biết được tên thuộc tính nếu bạn không định nghĩa chúng, nó sẽ tự động tạo một method, và bạn sẽ khong tìm thấy nơi đã định nghĩa chúng.&lt;/p&gt;

&lt;p&gt;Cùng xem một số ví dụ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;assuming&lt;/code&gt; bạn có một class User và phần tử &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;first_name&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;last_name&lt;/code&gt; đã được định nghĩa bên trong class User:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;user = User.new(first_name: &quot;John&quot;, last_name: &quot;Doe&quot;)
user.first_name_is?('John') # =&amp;gt; true
user.last_name_is?('John') # =&amp;gt; false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Dĩ nhiên, bạn có thể gọi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;user.first_name == 'John'&lt;/code&gt;, nhưng tôi đã quyết định cho bạn thấy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;straightforward&lt;/code&gt; trường hợp cho &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;demonstration&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;purposes&lt;/code&gt;. Đây là các định nghĩa class của chúng ta:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class User
  attr_reader :first_name, :last_name

  def initialize(first_name:, last_name:)
    @first_name = first_name
    @last_name = last_name
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bây giờ, khi chúng ta gọi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#first_name_is?&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;last_name_is_mike?&lt;/code&gt; chúng ta sẽ nhận được lỗi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NoMethodError&lt;/code&gt; bởi vĩ chúng ta đã không định nghĩa các methods đó. Lỗi này là điểm bắt đầu khi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implementtation&lt;/code&gt; phương pháp động. Ruby &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exposes&lt;/code&gt;phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;method_missing&lt;/code&gt; cho phép chúng ta làm nhiều việc với một method không tồn tại và từ chối nếu cúng ta muốn in ra lỗi:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class User
  attr_reader :first_name, :last_name

  def initialize(first_name:, last_name:)
    @first_name = first_name
    @last_name = last_name
  end

  private

  def method_missing(method_name, *args, &amp;amp;block)
    puts &quot;You are missing #{method_name} method&quot;
    super # raise the error anyway
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sau khi chạy đoạn code c=trên, bạn có thể thấy đoạn text được in ra bởi error:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;You are missing first_name_is? method
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;method_missing&lt;/code&gt; cho phép 3 tham số truyền vào:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;method_name - tên của phương thức không tồn tại trước đó
args - tham số optional, tham số được truyền vào trước đo
block - tham số optional, khối được &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;excuted&lt;/code&gt; bên trong phương thức&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Nếu chúng ta muốn tạo một phương thức động, đầu tiên chúng ta phải định nghĩa khi nào kết thúc với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_is?&lt;/code&gt; và bắt đầu với một tên thuộc tính. Sau đó chúng ta sẽ trả về lỗi nếu tên method không thoả mãn hoặc được gọi bởi một phần tử không được định nghĩa hoặc so sánh giữa một giá trị phần tử với phần tử đầu tiên và trả về lỗi:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def method_missing(method_name, *args, &amp;amp;block)
  attribute_name = method_name.to_s.match(/(.*)_is\?/)&amp;amp;.captures&amp;amp;.first

  if !attribute_name.nil? &amp;amp;&amp;amp; instance_variable_defined?(&quot;@#{attribute_name}&quot;)
    instance_variable_get(&quot;@#{attribute_name}&quot;) == args.first
  else
    super
  end
end

def respond_to_missing?(method_name, include_private = false)
  method_name.to_s.end_with?('_is?') || super
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Bây giờ chúng ta có thể bắt đầu với class và xem cách nó hoạt động:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;user = User.new(first_name: 'John', last_name: 'Doe')
user.first_name_is?('John') # =&amp;gt; true
user.last_name_is?('Tom') # =&amp;gt; false

user.method(:first_name_is?).call('John') # =&amp;gt; true

# call on not existing attribute
user.age_is?('John') # =&amp;gt; NoMethodError
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hãy ghi nhớ rằng luôn định nghĩa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;respond_to_missing?&lt;/code&gt; khi ghi đè &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;method_missing&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Nếu bạn muốn  có nhiều phương thức phức tạp hơn, bạn có thể muốn tạo một định nghĩa phương thức động.&lt;/p&gt;

&lt;h3 id=&quot;duck-typing&quot;&gt;Duck typing&lt;/h3&gt;
&lt;p&gt;Một số đối tượng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;behave&lt;/code&gt; khác nhau khi bạn gọi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_s&lt;/code&gt; tới chúng (hoặc một số phương thức từ thư viện ngôn ngữ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;standard&lt;/code&gt;). Bạn có thể theo dõi ví dụ:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;response = Request.get('some_url')

puts response # =&amp;gt; &quot;status: 200, body: some page body&quot;
puts response.status # =&amp;gt; 200
puts response.body # =&amp;gt; &quot;some page body&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hãy tạo một định nghĩa ví dụ về lớp &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Response&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Request&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Response
  attr_reader :status, :body

  def initialize(status:, body:)
    @status = status
    @body = body
  end
end

class Request
  def self.get(url)
    Response.new(status: 200, body: &quot;some page body&quot;)
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Fine, but when calling the same code as before, we would not get the same result:
Fine, nhưng khi gọi code giống như trước đó, bạn sẽ không lấy được kết quả giống nhau:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;response = Request.get('some_url')

puts response # =&amp;gt; #&amp;lt;Response:0x00007f9e3f1a0150&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It happens because each time you use puts, it calls the to_s method on the passed thing, and in our case, the default to_s method defined on an object is called. It returns the string that includes the class name.&lt;/p&gt;

&lt;p&gt;Nó xảy ra bởi vì mỗi thời điểm bạn sử dụng lệnh &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;puts&lt;/code&gt;, nó sẽ gọi phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_s&lt;/code&gt; khi được truyền vào, và trong trường hợp này, phương thức mặc định &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_s&lt;/code&gt; đã được định nghĩa và một đối tượng đã được gọi. Nó trả về đoạn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;string&lt;/code&gt; mà đã được &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;includes&lt;/code&gt; vào trong class name.&lt;/p&gt;

&lt;p&gt;Nếu chúng ta muốn thay đổi hành vi đó, chúng ta có thể định nghĩa phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_s&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Response
  attr_reader :status, :body

  def initialize(status:, body:)
    @status = status
    @body = body
  end

  def to_s
    &quot;status: #{@status}, body: #{@body}&quot;
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Bây giờ nó sẽ hoạt động giống như kì vọng:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;response = Request.get('some_url')

puts response # =&amp;gt; &quot;status: 200, body: some page body&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If it quacks like a duck, it’s a duck. If it implements the to_s method, you can consider it as a string and use it as a string.
Nếu tiếng kêu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;quacks&lt;/code&gt; giống như &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;duck&lt;/code&gt;, nó sẽ là một con &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;duck&lt;/code&gt;. Nếu nó &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;implements&lt;/code&gt; phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_s&lt;/code&gt;, bạn có thể &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;consider&lt;/code&gt; nó giống như &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;string&lt;/code&gt; và sử dụng nó như là một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;string&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Mar 2021 00:48:45 +0000</pubDate>
        <link>/technical/2021/03/15/Magic-behing-popular-ruby-code-copy/</link>
        <guid isPermaLink="true">/technical/2021/03/15/Magic-behing-popular-ruby-code-copy/</guid>
      </item>
    
      <item>
        <title>10 lỗi có bản được trả về khi xây dựng API và cách giải quyết chúng</title>
        <description>&lt;p&gt;Link bài viết gốc:
&lt;a href=&quot;https://www.moesif.com/blog/technical/monitoring/10-Error-Status-Codes-When-Building-APIs-For-The-First-Time-And-How-To-Fix-Them/&quot;&gt;https://www.moesif.com/blog/technical/monitoring/10-Error-Status-Codes-When-Building-APIs-For-The-First-Time-And-How-To-Fix-Them/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Mọi thứ không phải lúc nào cũng dễ dàng khi bạn lần đầu sử dụng API, đặc biệt hơn nếu đây là lần đầu bạn tích hợp API sang một hệ thống khác. Thông thường tài liệu hay bị thiếu các quy định về lỗi, căn bản là do việc đoán trước ra việc chạy đúng có vẻ dễ dàng hơn, hơn là suy nghĩ về việc sẽ chạy sai.&lt;/p&gt;

&lt;p&gt;Trong HTTP, có nhiều status codes có thể cung cấp cho bạn ý tưởng về việc gì sẽ xảy ra khi bạn gọi tới một API. Các status code tiêu chuẩn từ 100 tới 511, và mỗi status đều mang một ý nghĩa riêng, nhưng chỉ có lỗi từ 400 tới 511 là thông báo về lỗi.&lt;/p&gt;

&lt;p&gt;Hãy cùng xem 10 status codes phổ biến nhất, về cả phía client và server.&lt;/p&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;client-side-errors-lỗi-phía-người-dùng&quot;&gt;Client-side Errors (Lỗi phía người dùng)&lt;/h2&gt;
&lt;hr /&gt;

&lt;p&gt;Nhóm status codes 4XX luôn luôn liên quan tới client-side (lỗi phía người dùng hay browser), nhưng những thay đổi trên API có thể gây ra chúng. Dưới đây là 5 lỗi phổ biến nhất và cách để giải quyết chúng:&lt;/p&gt;

&lt;h3 id=&quot;404-not-found&quot;&gt;404 Not found&lt;/h3&gt;

&lt;p&gt;Đây là lỗi phổ biến nhất mà chúng ta thường gặp. Nó chỉ ra url bạn đã sử dụng không tồn tại trên server.&lt;/p&gt;

&lt;p&gt;Khi mà đó là lỗi 4XX, điều này có nghĩa là phía client đang có gì đó sai, nó cũng có thể chỉ ra là phía server cũng đang tồi tại vấn đề.&lt;/p&gt;

&lt;p&gt;Cách giải quyết tốt nhất là giữ nguyên trang thái của client trước khi chắc chắn răng API đang không có vấn đề gì cả.&lt;/p&gt;

&lt;h3 id=&quot;401-unauthorized&quot;&gt;401 Unauthorized&lt;/h3&gt;

&lt;p&gt;Lỗi này có nghĩa rằng bạn chưa xác thực đối với API đó. API đang không biết bạn là ai và sẽ không phục vụ yêu cầu của bạn.&lt;/p&gt;

&lt;p&gt;Điều bạn cần làm nhất là đăng kí và sử dụng một một phương thức xác thực thoả mãn để có thể sử dụng API đó.&lt;/p&gt;
&lt;h3 id=&quot;403-forbidden&quot;&gt;403 Forbidden&lt;/h3&gt;

&lt;p&gt;Lỗi forbidden (bị cấm) cho thấy rằng bạn không có quyền truy cập vào URL đó. Điểm khác biệt với Unauthorized (401) là bạn đã được xác thực, nhưng vai trò của người dùng đó không được cho phép vào request đó.&lt;/p&gt;

&lt;p&gt;Điều đó cũng xảy ra khi bạn có vấn đề với việc xác thực, giống như là sử dụng sai API key hoặc là cố gắng truy cập vào 1 tính năng gói đăng kí của bạn không cho phép sử dụng.&lt;/p&gt;

&lt;h3 id=&quot;400-bad-request&quot;&gt;400 Bad Request&lt;/h3&gt;

&lt;p&gt;Bad reques status là 1 trong những lỗi thông báo chung nhất. Nó ngụ ý rằng bạn đã làm điều gì đó chưa đúng trong request của bạn. Nếu không có thêm thông tin được cung cấp trong body của kết quả trả về, bạn phải check lại tài liệu. Bạn có thể bị thiếu truy vấn hoặc trong thẻ body của request, hoặc là header có thể đang bị lỗi. Nó có thể cũng là một số request của bạn đang không đúng format.&lt;/p&gt;

&lt;h3 id=&quot;429-too-many-requests&quot;&gt;429 Too Many Requests&lt;/h3&gt;

&lt;p&gt;Hầu hết các gói đăng kí API đều có giới hạn - đối với các gói rẻ hơn, càng ít hơn số lượng request mỗi giây được cho phép API của bạn truy cập. Có&lt;/p&gt;

&lt;p&gt;Nếu bạn đang gửi nhiều request trên 1 khoảng thời gian ngắn, xem xét điều chỉnh chúng ở phía client. Status này cũng biểu thị rằng bạn bạn đã đạt giới hạn hàng ngày, hàng tuần, hàng tháng trong tài khoản đó.&lt;/p&gt;

&lt;p&gt;Đôi khi API nghe có vẻ phù hợp cho tới khi bạn thấy giới hạn, và đột ngột nó không hoạt động cho trường hợp của bạn nữa. Kiểm tra phần nào của API bạn đã đăng kí trước khi tích hợp, nếu không bạn có thể gặp sự cố vài tuần hoặc vài tháng sau khi tích hợp API.&lt;/p&gt;

&lt;hr /&gt;
&lt;h2 id=&quot;server-side-errors-lỗi-phía-server&quot;&gt;Server-Side Errors (Lỗi phía server)&lt;/h2&gt;
&lt;hr /&gt;

&lt;p&gt;Nhóm 5XX các status luôn luôn được sử dụng cho lỗi phía server (server-side), nhưng một yêu cầu không hợp lệ sẽ phản hồi cho phía client bằng 4XX dãn tới lỗi 5XX nếu không được bắt đúng trên máy chủ. Dưới đây là 5 lỗi phổ biến nhất và cách khắc phục chúng:&lt;/p&gt;

&lt;h3 id=&quot;500-internal-server-error&quot;&gt;500 Internal Server Error&lt;/h3&gt;

&lt;p&gt;Status này có thể có nghĩa rằng có bất cứ lỗi gì, nhưng luôn luôn thể hiện rằng server đang có vấn đề.  Nó có thể được gây ra bởi 1 yêu cầu có vấn đề.&lt;/p&gt;

&lt;p&gt;Kiểm tra kĩ lại tài liệu để chắc chắn rằng mọi thứ đang hoạt động đúng: query, body, headers, format,…&lt;/p&gt;

&lt;p&gt;Nếu không giải quyể được vấn đề, nó có nghĩa rằng bản cập nhật API đã có lỗi về code, hoặc dữ liệu từ API đã được lấy từ một server khác mà ở đó có vấn đề. Trong trường hợp này, bạn nên liên hệ lại với đội cung cấp API để được hỗ trợ.&lt;/p&gt;

&lt;h3 id=&quot;502-bad-gateway&quot;&gt;502 Bad Gateway&lt;/h3&gt;

&lt;p&gt;Trạng thái này cho biết server bạn đang sử dụng không phải là máy chủ thực tế. Máy chủ proxy cố gắng sử dụng API server bằng tên của bạn. Status này cũng chỉ ra rằng API server không phản hồi lại request. Điều đó cũng có thể liên quan tới vấn đề về mạng, hoặc đơn giản là server API đang bị crashed hoặc là đang bị tắt cho việc maintenance.&lt;/p&gt;

&lt;p&gt;Vấn đề này thì luôn luôn là vấn đề tạm thời và có nên được giải quyết bởi nhà cung cấp API, nhưng bạn cần phải liên hệ giúp đỡ nếu nó vẫn tiếp tục diễn ra.&lt;/p&gt;

&lt;h3 id=&quot;503-service-unavailable&quot;&gt;503 Service Unavailable&lt;/h3&gt;

&lt;p&gt;Dịch vụ không sẵn sàng có nghĩa là server đang bị quá tải (overloaded). Quá nhiều request API đã được gửi và hiện tại API không thể xử lý thêm. Vấn đề này tự giải quyết khi client gửi ít request đi, nhưng nó cũng có thể có nghĩa rằng API đã không có kể hoặc đủ nguồn lực cung cấp cho tất cả người dùng của họ.&lt;/p&gt;

&lt;p&gt;Nếu nó phù hợp với trường hợp sử dụng của bạn, bạn có thể làm cho phía client đợi và gửi lại request một vài lần nữa. Nhưng nếu vấn đề này vẫn tiếp tục hiển thị, bạn cần phải liên hệ với nhà cung cấp API.&lt;/p&gt;

&lt;h3 id=&quot;504-gateway-timed-out&quot;&gt;504 Gateway Timed Out&lt;/h3&gt;

&lt;p&gt;Giống như lỗi 502 (Bad gateway), điều này cho bạn biết rằng server bạn đang gọi là một proxy cho 1 server API. Lần này, vấn đề là máy chủ API trả lời không kịp thời.&lt;/p&gt;

&lt;p&gt;Điều này có thê rlieen quan đến đội trễ matngj cao giữa proxy và máy chủ API. Điều đó cũng có nghĩa rằng máy chủ API tốn nhiều thời gian để xử lý request của bạn.&lt;/p&gt;

&lt;p&gt;Để giải quyết vấn đề này, kiểm tra nếu nội dung của request có thể liên quan tới việc timeout. Nếu bạn request quá nhiều dữ liệu hoặc tín toán tốn quá nhiều thời gian, bạn cần phải thử lại.&lt;/p&gt;

&lt;p&gt;Nếu bạn nghĩ rằng request của bạn đang hợp lý và trạng thái không thay đổi, liên hệ hộ trợ ngay.&lt;/p&gt;

&lt;h3 id=&quot;501-not-implemented&quot;&gt;501 Not Implemented&lt;/h3&gt;

&lt;p&gt;Trạng thái không được triểm khai có liên quan tới phương thức HTTP bạn đã sử dụng để request URL. Bạn có thể thử lại bằng phương thức khác.&lt;/p&gt;

&lt;p&gt;Thông thường, request với phương thức (method) sai thường nhận được với kết quả là 404 not found. Trạng thái not-implemented ngụ ý rằng phương thức này đã không được triển khai. Nhà cung cấp API có thể sử dụng status đó để thông báo với client rằng phương thức này sẽ có thể truy cập được trong tương lai.&lt;/p&gt;
</description>
        <pubDate>Wed, 10 Mar 2021 00:48:45 +0000</pubDate>
        <link>/technical/2021/03/10/10-errors-when-build-api-and-how-to-fix-them/</link>
        <guid isPermaLink="true">/technical/2021/03/10/10-errors-when-build-api-and-how-to-fix-them/</guid>
      </item>
    
      <item>
        <title>Bản thân bạn đang ở đâu ?</title>
        <description>&lt;p&gt;Q: Làm sao để ngưng lười biếng và trì hoãn?&lt;/p&gt;

&lt;p&gt;A: Farhan Shamir&lt;/p&gt;

&lt;p&gt;Link: https://qr.ae/pNKIeo&lt;/p&gt;

&lt;p&gt;Khi 13 tuổi, tôi đã tham gia Olympic Thiên văn học Quốc tế 2013 nhưng không thể giành được huy chương. Tôi ra về trong một tâm trạng buồn bã và đau đớn. Nhưng tôi nghĩ mình xứng đáng với điều đó: có lẽ tôi cần phải đập đầu của mình vào tường một lần để biết được rằng lười biếng là liều thuốc độc giết chết thành công. Nó gặm nhấm cuộc sống của bạn trong khi bạn đang xem TV, lướt Facebook.&lt;/p&gt;

&lt;p&gt;Kể từ đó, tôi đăng xuất Facebook, bắt đầu luyện tập cho Olympic – cố gắng kết hợp cả khoa học và bóng rổ. Và rồi, tôi đã giành được 6 huy chương Olympic Khoa học quốc tế, 5 huy chương vàng Giải vô địch bóng rổ quốc gia và được nhận vào Đại học Cambridge.&lt;/p&gt;

&lt;p&gt;Bây giờ, tôi tự hỏi mình: Làm cách nào tôi đã vượt qua được sự lười biếng? Tôi đã bắt đầu như thế nào?&lt;/p&gt;

&lt;p&gt;Và rồi tôi nhận ra, câu trả lời, thật sự đơn giản…&lt;/p&gt;

&lt;p&gt;CHỈ LÀ TÔI HÀNH ĐỘNG&lt;/p&gt;

&lt;p&gt;Không có bí mật nào ở đây! Cho dù bạn đọc bao nhiêu lời khuyên như “Để tiêu diệt sự lười biếng thì bạn cần 5 điều sau đây” trên Quora hay các blog phát triển bản thân (Self-development) thì vẫn bạn sẽ không bao giờ thành công nếu bạn không lựa chọn.&lt;/p&gt;

&lt;p&gt;Khi phải lựa chọn giữa việc chơi game hay làm việc, tôi chọn vế sau.
Khi phải lựa chọn giữa việc đi chơi với bạn bè hay tập ném bóng, tôi chọn vế sau&lt;/p&gt;

&lt;p&gt;Bạn KHÔNG THỂ ngăn được sự lười biếng của mình nếu bạn không thể sử dụng sức mạnh ý chí của mình để tạo nên sự khác biệt!
Tôi nghĩ rằng tất cả chúng ta đều biết cách để chấm dứt sự lười biếng. Một thứ mà chỉ một vài người trong chúng ta lựa chọn…&lt;/p&gt;

&lt;p&gt;HÀNH ĐỘNG&lt;/p&gt;

&lt;p&gt;Không phải ngày mai hay sinh nhật. Bắt đầu. NGAY LẬP TỨC!&lt;/p&gt;

&lt;p&gt;Lựa chọn. Quyết định cho chính mình. Bạn muốn gì?&lt;/p&gt;

&lt;p&gt;Một cuộc sống vui vẻ? Thú vị? Đầy phiêu lưu?&lt;/p&gt;

&lt;p&gt;TỐT! Bắt đầu hành động ngay đi!&lt;/p&gt;

&lt;p&gt;Cuộc sống mơ ước luôn ở trong tầm tay bạn. Luôn thúc đẩy bản thân mình.
Chỉ cần luôn thúc đẩy bản thân mình thôi.&lt;/p&gt;
</description>
        <pubDate>Tue, 09 Jun 2020 00:48:45 +0000</pubDate>
        <link>/life/2020/06/09/where-are-you-now/</link>
        <guid isPermaLink="true">/life/2020/06/09/where-are-you-now/</guid>
      </item>
    
      <item>
        <title>Đừng bao giờ `git push -f`</title>
        <description>
</description>
        <pubDate>Fri, 08 May 2020 00:48:45 +0000</pubDate>
        <link>/technical/2020/05/08/dung-bao-gio-git-push-f/</link>
        <guid isPermaLink="true">/technical/2020/05/08/dung-bao-gio-git-push-f/</guid>
      </item>
    
      <item>
        <title>Rails rspec notes</title>
        <description>&lt;h3 id=&quot;mock-vs-stub&quot;&gt;Mock vs stub&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;Stub
    &lt;blockquote&gt;
      &lt;p&gt;Returns canned responses, avoiding any meaningful computation or I/O&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;p&gt;=&amp;gt; Tra ve ket qua a
 ex:&lt;/p&gt;
    &lt;blockquote&gt;
      &lt;p&gt;allow(some_object).to receive(some_method).and_return(some_value)&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;Mock
    &lt;blockquote&gt;
      &lt;p&gt;Expects specific messages; will raise an error if it doesn’t receive them by the end of the example&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;p&gt;ex:&lt;/p&gt;
    &lt;blockquote&gt;
      &lt;p&gt;expect(some_object).to receive(some_method).and_return(some_value)&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;double&quot;&gt;Double&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;double(*args) public
     Shortcut for creating an instance of Spec::Mocks::Mock.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;name is used for failure reporting, so you should use the role that the double is playing in the example.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;stubs_and_options lets you assign options and stub values at the same time. The only option available is :null_object. Anything else is treated as a stub value.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ex:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;thing = double(“thing”, :a =&amp;gt; “A”)
      thing.a == “A” =&amp;gt; true
      person = double(“thing”, :name =&amp;gt; “Joe”, :email =&amp;gt; “joe@domain.com”)
      person.name =&amp;gt; “Joe”
      person.email =&amp;gt; “joe@domain.com”&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Fri, 08 May 2020 00:48:45 +0000</pubDate>
        <link>/technical/2020/05/08/rails-rspec-notes/</link>
        <guid isPermaLink="true">/technical/2020/05/08/rails-rspec-notes/</guid>
      </item>
    
      <item>
        <title>form_with — Building HTML forms in Rails 5.1</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;Bài viết lấy nguồn từ bài viết &lt;a href=&quot;https://medium.com/@tinchorb/form-with-building-html-forms-in-rails-5-1-f30bd60ef52d&quot;&gt;form_with — Building HTML forms in Rails 5.1
&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;A couple of months ago a PR created by kaspth was merged to rails 5.1, introducing the form_with view helper. The idea behind it is to unify the interface of form_tag and form_for by extracting both implementations to a common object. As long as developers start using this new helper, form_tag and form_for will softly get deprecated.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Một vài tháng trước, một pull request &lt;a href=&quot;https://github.com/rails/rails/pull/26976&quot;&gt;Pr&lt;/a&gt; được tạo bởi một thím với nickname &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kasspth&lt;/code&gt; đã được merge vào rails 5.1 (Thời điểm tôi dịch bài này thì rails 6 đã release và sắp ra rails 7 mất rồi =))). Giới thiệu về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_with&lt;/code&gt; trong phần hỗ trợ hiển thị. Ý tưởng đằng sau là thống nhất lại giao diện của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_tag&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_for&lt;/code&gt;bằng cách trích xuất cả hai triển khai trên vào một đối tượng chung. Miễn là các lập trình viên bắt đầu sử dụng helper mới này, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_tag&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_for&lt;/code&gt; sẽ dần dần được lãng quên.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1-a-litte-bit-of-background&quot;&gt;1. A litte bit of background&lt;/h3&gt;
&lt;p&gt;(Chém gió một chút về bối cảnh)&lt;/p&gt;

&lt;p&gt;Let’s say that you have a Post model and want to create a new instance of it. In Rails 4, the form_for view helper allows you to create a form for it:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Hãy tưởng tượng bạn có một model &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Post&lt;/code&gt; và muốn tạo thêm đối tượng cho nó. Trong rails 4, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_for&lt;/code&gt; đã hỗ trợ tận răng và cho phép bạn tạo form cho nó như sau:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%= form_for @post do |form| %&amp;gt;
 &amp;lt;%= form.text_field :author %&amp;gt;
 &amp;lt;%= form.submit “Create” %&amp;gt;
&amp;lt;% end %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Một view tương ứng html sẽ được sinh ra (a view html will be created)&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;form class=”new_post” id=”new_post” action=”/posts” accept-charset=”UTF-8&quot; method=”post”&amp;gt;
 &amp;lt;input name=”utf8&quot; type=”hidden” value=”✓”&amp;gt;
 &amp;lt;input type=”hidden” name=”authenticity_token” value=”…”&amp;gt;
 &amp;lt;input type=”text” name=”post[author]” id=”post_author”&amp;gt;
 &amp;lt;input type=”submit” name=”commit” value=”Create” data-disable-with=”Create”&amp;gt;
&amp;lt;/form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The variable form yielded to the block is a FormBuilder object that incorporates the knowledge about the model object represented by :post passed to form_for.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Các giá trị trong block form là đối tượng được tạo ra bởi đối tượng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FormBuilder&lt;/code&gt; kết hợp với thông tin được cung cấp bởi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:post&lt;/code&gt; truyền vào &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_for&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;What happens when you need to create a form but you don’t have an underlying model instance? Rails provides us with the form_tag helper:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ĐIều gì sẽ xảy ra nếu bạn muốn tạo một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form&lt;/code&gt; mà không muốn cung cấp một đối tượng của model ? Khi đó rails sẽ cung cấp &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;form_tag&lt;/code&gt; helper.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;%= form_tag “/posts” do %&amp;gt;
 &amp;lt;%= text_field_tag “post[author]” %&amp;gt;
 &amp;lt;%= submit_tag “Create” %&amp;gt;
&amp;lt;% end %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;form action=”/posts” accept-charset=”UTF-8&quot; method=”post”&amp;gt;
 &amp;lt;input name=”utf8&quot; type=”hidden” value=”✓”&amp;gt;
 &amp;lt;input type=”hidden” name=”authenticity_token” value=”…”&amp;gt;
 &amp;lt;input type=”text” name=“post[author]” id=“post_author”&amp;gt;
 &amp;lt;input type=”submit” name=”commit” value=“Create” data-disable-with=“Create”&amp;gt;
&amp;lt;/form&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There is no FormBuilder object in this second form. For each field that you need to add to the form, you need to use the correspondent input tag, such as text_field_tag.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Không có object &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FormBuilder&lt;/code&gt; trên form thứ hai.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sun, 08 Mar 2020 00:00:00 +0000</pubDate>
        <link>/technical/2020/03/08/form_with-vs-form_tag/</link>
        <guid isPermaLink="true">/technical/2020/03/08/form_with-vs-form_tag/</guid>
      </item>
    
      <item>
        <title>Clean code - Comment</title>
        <description>&lt;hr /&gt;

&lt;p&gt;Đừng bình luận trên code xấu, hãy viết lại nó.
-Brian W.Kernighan và P.J.Plaugher-&lt;/p&gt;

&lt;hr /&gt;

&lt;ol&gt;
  &lt;li&gt;Comment donot make up for bad code.
  Thay vì dành thời gian cho việc viết bình luận cho một đống lộn xộn, bạn nên dọn dẹp nó.&lt;/li&gt;
  &lt;li&gt;Explain your self in code.
  Code luôn là lời giải thích tốt nhất. Trong nhiều trường hợp, bạn nên thay thế hoặc tạo thêm những hàm mới để có thể nói lên những lời mà comment của bạn thể hiện.&lt;/li&gt;
  &lt;li&gt;Good comment.
    &lt;ul&gt;
      &lt;li&gt;Legal comments (Bình luận pháp lý)&lt;/li&gt;
      &lt;li&gt;Informative comments (Bình luận thông tin)&lt;/li&gt;
      &lt;li&gt;Explanation of Intent (Giải thích về mục đích)&lt;/li&gt;
      &lt;li&gt;Clarification (Làm sáng tỏ)&lt;/li&gt;
      &lt;li&gt;Warning of Consquences (Cảnh báo về hậu quả)
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; // Don't run unless you
 // have some time to kill.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;TODO comments: Khi có thời gian rảnh nên quay lại giải quyết các vấn đề mà đã TODO từ trước.&lt;/li&gt;
      &lt;li&gt;Amplification (Phóng đại)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Bad comments: Tất cả những gì không phải good comments.
    &lt;ul&gt;
      &lt;li&gt;Mumbling (lẩm bẩm): Đưa ra một comment chỉ vì bạn cảm thấy nên hoặc vì quá trình yêu cầu nó, vì hack. Nếu bạn quyết định viết comment thì hãy giành thời gian để đảm bảo nó là comment tốt nhất bạn có thể viết.&lt;/li&gt;
      &lt;li&gt;Redundant Comment (Comment dư thừa):&lt;/li&gt;
      &lt;li&gt;Misleading comments (Comment sai lệch):&lt;/li&gt;
      &lt;li&gt;Mandated comments (Comment bắt buộc): Thật là ngớ ngẩn khi có một quy tắc nói rằng mọi hàm phải có javadoc hoặc mọi biến phải có một comment. Những comment như thế này chỉ làm lộn xộn mã, tuyên truyền những lời nói dối và để gây nhầm lẫn và vô tổ chức.&lt;/li&gt;
      &lt;li&gt;Jounal comments:Đôi khi mọi người thêm một comment vào đầu module mỗi khi họ chỉnh sửa nó. Những comment này tích lũy như một loại tạp chí, hoặc nhật ký, của mọi thay đổi đã từng được thực hiện. Tuy nhiên ngày nay những comment loại như này chỉ làm cho module trở nên xáo trộn hơn mà thôi.
  -&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Wed, 26 Feb 2020 00:00:00 +0000</pubDate>
        <link>/technical/2020/02/26/clean-code-comment/</link>
        <guid isPermaLink="true">/technical/2020/02/26/clean-code-comment/</guid>
      </item>
    
      <item>
        <title>Clean code - function</title>
        <description>&lt;hr /&gt;

&lt;h3 id=&quot;function-là-động-từ-class-là-danh-từ-nghệ-thuật-của-lập-trình-là-nghệ-thuật-của-ngôn-ngữ-thiết-kế&quot;&gt;Function là động từ, class là danh từ. Nghệ thuật của lập trình là nghệ thuật của ngôn ngữ thiết kế.&lt;/h3&gt;

&lt;h3 id=&quot;các-lập-trình-viên-bậc-thầy-nghĩ-rằng-các-hệ-thống-như-một-câu-chuyện-để-kể-chứ-không-phải-là-một-chương-trình-để-viết-một-cách-thuần-tuý&quot;&gt;Các lập trình viên bậc thầy nghĩ rằng các hệ thống như một câu chuyện để kể chứ không phải là một chương trình để viết một cách thuần tuý.&lt;/h3&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;Small: Nguyên tắc đầu tiên của function là chúng càn phải nhỏ. Nguyên tắc thứ 2 là chúng cần phải nhỏ hơn nữa. (function không nên dài quá 20 dòng, mỗi dòng không nên dài quá 150 kí tự)&lt;/li&gt;
  &lt;li&gt;Những khối lệnh if, else, while nên đặt trên cùng 1 dòng và những dòng này nên đặt tới 1 lời gọi tới hàm khác.&lt;/li&gt;
  &lt;li&gt;Mức thụt lề của function nên ở mức 1 hoặc 2. Nếu quá mức này, hãy nghĩ tới việc tách function mới.&lt;/li&gt;
  &lt;li&gt;Do one thing: Function chỉ nên thực hiện một thứ. Nó nên thực hiện điều đó cho tốt. Nó nên thực hiện 1 điều duy nhất.&lt;/li&gt;
  &lt;li&gt;One level of Abstraction per Function: Để đảm bảo chắc chắn rằng function đang làm 1 việc duy nhất cần đảm bảo các câu lệnh trong function đang cùng nằm ở 1 mức độ trừu tượng.&lt;/li&gt;
  &lt;li&gt;Reading code from top to bottom (the StepDown rule): Chúng ta muốn đọc code như một câu chuyện từ trên xuống. Mỗi function được sắp xếp đều được tuân theo mức độ của sự trừu tượng từ trên xuống. Giảm dần mức độ trừu tượng từ trên xuống.&lt;/li&gt;
  &lt;li&gt;Use Descriptive Names: Sử dụng tên mô tả những gì function làm. Đừng ngần ngại vì đó là một cái tên dài. Tên mô tả dài sẽ tốt hơn là 1 tên mô tả ngắn và bí ẩn, tên mô tả dài sẽ tốt hơn là một đoạn comment bình luận để mô tả về function đó.&lt;/li&gt;
  &lt;li&gt;Function arguments: Số lượng tham số lý tưởng trong 1 funciton là = 0 (niladic), tiếp đến là 1 (monadic), 2 (dyadic), 3 (triadic) thì nên tránh nếu có thể. Nhiều hơn 3 (polyadic) thì cần phải có một lý do đặc biệt và không nên sử dụng.&lt;/li&gt;
  &lt;li&gt;Common Monadic Form:
Hai hình thức phổ biến khi sử dụng function 1 tham số là:
    &lt;ul&gt;
      &lt;li&gt;Một hàm lý luận, trả về true hoặc false&lt;/li&gt;
      &lt;li&gt;Một hàm lập luận, biến nó thành một thứ gì khác và trả về giá trị&lt;/li&gt;
      &lt;li&gt;Một hình thức ít phổ biến hơn là hàm xử lý sự kiện, có 1 tham số đầu vào nhưng không có tham số đầu ra.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Flag argument: Nên tách nó thành 2 hàm, bởi vì hàm này đã làm hơn 1 điều: 1 là flag có giá trị đúng, hai là flag có giá trị sai.&lt;/li&gt;
  &lt;li&gt;Dyalic function: Hai tham số phải có sự gắn kết tự nhiên hoặc là sắp xếp của một trật tự tự nhiên.&lt;/li&gt;
  &lt;li&gt;Triads: Những hàm phải đưa ra tới 3 đối số càng khó để hiểu hơn là hai. Khuyên bạn nên thực sự cẩn thận khi đưa ra một hàm với một bộ 3 tham số.&lt;/li&gt;
  &lt;li&gt;Argument Object: Khi một số hàm thực sự cần nhiều hơn 2 hay 3 tham số, có khả năng một số trong những args đó có thể được gói gọn trong 1 lớp chứa các tham số đó.&lt;/li&gt;
  &lt;li&gt;Argument List: Đôi khi chúng ta muốn vượt qua số lượng biến số của tham số vào 1 hàm. Nếu các tham số đều được đối xử tương tự nhau, có thể gộp chung lại thành một tham số đơn kiểu List.&lt;/li&gt;
  &lt;li&gt;Verbs and Keywords: Trong trường hợp là 1 monad function, hàm và tham số nên tạo thành 1 động từ hoặc danh từ đẹp. Ví dụ: assertEquals có thể được viết tốt hơn là assertExpectedEqualsActual(expected, actual), điều này giảm nhẹ vấn đề phải nhớ thứ tự các tham số.&lt;/li&gt;
  &lt;li&gt;Have no sideeffecs:
    &lt;ul&gt;
      &lt;li&gt;Do one thinh&lt;/li&gt;
      &lt;li&gt;Tránh các tham số đầu ra nếu sử dụng được this/self.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Comman query separation (Tách lệnh truy vấn): Hàm nên thực hiện hoặc làm 1 điều gì đó hoặc trả lời một điều gì đó, nhưng không bao gồm cả hai. Hàm của bạn nên thay đổi trạng thái của một đối tượng hoặc trả về thông tin của một đối tượng. Làm cả hai sẽ gây ra nhầm lẫn.&lt;/li&gt;
  &lt;li&gt;Prefer exceptions to returning erros code:
Trả về đoạn code báo lỗi bên trong các câu lệnh của hàm là một sự vi phạm tới việc tách câu lệnh truy vấn.&lt;/li&gt;
  &lt;li&gt;Extract Try/Catch blocks:
Tách các khối xử lý Try/Catch ra khỏi các thành phần chức năng riêng của chính nó.&lt;/li&gt;
  &lt;li&gt;Errors handing Is one thing:
Function nên làm một việc, xử lý lỗi nên làm một việc. Vậy nên một chức năng xử lý lỗi thì không nên làm bất cứ điều gì nữa.&lt;/li&gt;
  &lt;li&gt;The Error.java Dependency Magnet:
Một class hoặc enum chứa tất cả các định nghĩa lỗi. Khi sử dụng chúng thì các class khác đều phụ thuộc vào class định nghĩa này. Nhưng khi danh sách lỗi này được thay đổi thì tất cả các class khác cần được biên dịch và bố trí lại.
=&amp;gt; Nên sử dụng các exception hơn là errors code.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Don’t repeat your self&lt;/strong&gt;:
Sự trùng lặp là một vấn đề vì nó thổi phồng mã lên và sẽ phải yêu cầu thay đổi nhiều lần nếu thuật toán có sự thay đổi. Nó cũng cấp số nhân nhiều lần cho một lỗi thiếu sót nào đó.&lt;/p&gt;

    &lt;p&gt;Mục tiêu là giảm thiểu sự trùng lặp.&lt;/p&gt;

    &lt;p&gt;Trùng lặp có thể là gốc rễ mọi tội lỗi ở trong phần mềm. Nhiều nguyên tắc và thông lệ được tạo ra nhằm kiếm soát và hạn chế sự trùng lặp đó. Lập trình hướng đối tượng, lập trình cấu trúc,…&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Structed Programing: Nguyên tắc Dijktra trong lập trình cấu trúc: Mọi function và mọi block ở trong function nên có một đầu vào và một đầu ra. Điều đó có nghĩa là chỉ nên có một statement trả về trong hàm, không có break hay continue trong một vòng lặp, và không bao giờ có ever hay bất cứ phát biểu goto nào.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;How do you write function like this ?
Viết phần mềm cũng như đang viết một bài văn vậy. Khi bạn viết một bài văn hay một bài báo, bạn sẽ có những ý tưởng đầu tiên, sau đó sẽ uốn nắn đề có thể đọc được tốt hơn. Phác thảo đầu tiên có thể vụng về và thiếu tổ chức. Nhưng bạn có thẻ rèn câu cú, tái cấu trúc và sàng lọc cho đến khi nó đọc được theo cách mà bạn muốn.&lt;/p&gt;

    &lt;p&gt;Khi viết một hàm, nó bắt đầu rất dài và phức tạp, nó có nhiều phần chưa rõ ràng và vòng lặp lồng nhau. Nó có một danh sách dài các tham số. Tên thì tuỳ tiện và code thì trùng lặp. Và chắc chắn là đi cùng nó là một bộ unit test để cover hết đống lộn xộn đó.&lt;/p&gt;

    &lt;p&gt;Vì vậy, uốn nắn và sàng lọc code, phân chia các chức năng, thay đổi tên, loại bỏ sự trùng lặp. Co gọn các phương pháp để rút ngắn lại. Đôi khi sẽ xảy ra việc tạo ra rất nhiều class. Nhưng đừng quên giữ cho pass các Unit test trước đó nhé =))&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 25 Feb 2020 00:00:00 +0000</pubDate>
        <link>/technical/2020/02/25/clean-code-function/</link>
        <guid isPermaLink="true">/technical/2020/02/25/clean-code-function/</guid>
      </item>
    
      <item>
        <title>Ruby Notes</title>
        <description>&lt;h3 id=&quot;developer-roadmap&quot;&gt;Developer roadmap&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/kamranahmedse/developer-roadmap&quot;&gt;https://github.com/kamranahmedse/developer-roadmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;namming&quot;&gt;Namming&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;Global variables start with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Class variables start with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@@&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Instance variables start with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Local variables must begin with a lowercase or an under score&lt;/li&gt;
  &lt;li&gt;Constants start with an upper case letter&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ruby variablse names must begin with a lowercase letter or underscore, and many contain only letters, numbers, and underscore characters.&lt;/p&gt;

&lt;p&gt;Variable names must not conflict with keywords (e.g. you cannot have variable called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt;), but unambiguous name that contain reserved worlds are acceptable (i.e. both &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;classy&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_class&lt;/code&gt; are valid Ruby variable names)&lt;/p&gt;

&lt;h3 id=&quot;variable&quot;&gt;Variable&lt;/h3&gt;
&lt;p&gt;With instance variables, class variables or Global variables, we can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#$&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#@&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#@@&lt;/code&gt; to puts this values with string.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;#{$x} ~ #$x
#{@x} ~ #@x
#{@@x} ~ #@@x

#{x} != #x =&amp;gt; not working
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 24 Feb 2020 00:00:00 +0000</pubDate>
        <link>/technical/2020/02/24/ruby-notes/</link>
        <guid isPermaLink="true">/technical/2020/02/24/ruby-notes/</guid>
      </item>
    
      <item>
        <title>The X-Y problem</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;XY problem là một vấn đề nan giải mà bất cứ ai hoặc bất cứ ngành nghề nào cũng có thể sẽ mắc phải trong công việc và cuộc sống.
Mình biết tới vấn đề này thông qua một người anh trong team dự án - &lt;a href=&quot;https://ttuan.github.io/&quot;&gt;Tuấn Trần&lt;/a&gt;, hi vọng bài viết sẽ đem lại cho bạn một cách nhìn nhận khác khi đối mặt với bất kì vấn đề nào trong cuộc sống :D&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Source: &lt;a href=&quot;http://xyproblem.info/&quot;&gt;The XY Problem&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;what-is-it-&quot;&gt;What is it ?&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;Vấn đề XY xảy ra khi bạn muốn đặt câu hỏi về vấn đề X nhưng bạn lại đặt câu hỏi về  những giải pháp bạn đưa ra để giải quyết vấn đề X đó. Điều đó dẫn tới nhiều lãng phí về thời gian và năng lượng, bao gồm người hỏi và người muốn giúp đỡ.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Để dễ hiểu có thể tham khảo ví dụ:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Bạn muốn giải quyết vấn đề X&lt;/li&gt;
  &lt;li&gt;Bạn không biết làm thế nào để giải quyết X, nhưng nghĩ rằng bạn có thể tìm ra cách giải quyết vấn đề X nếu bạn làm được Y.&lt;/li&gt;
  &lt;li&gt;Bạn tiếp tục không biết làm thế nào để giải quyết Y.&lt;/li&gt;
  &lt;li&gt;Người khác giúp bạn giải quyết Y nhưng lại &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;confused&lt;/code&gt; bởi vì Y dường như là 1 vấn đề lạ và không liên quan tới X cho lắm =))&lt;/li&gt;
  &lt;li&gt;Sau rất nhiều tương tác và thời gian lãng phí, cuối cùng bạn cũng hiểu được rằng bạn muốn được giúp đỡ giải quyết vấn đề X, và bạn cũng hiểu ra rằng Y cũng không liên quan tới X cho là mấy :v&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Vấn đề này xảy ra khi mà chúng ta bị mắc kẹt vào những vấn đề mà chúng ta tin đó là giải pháp và không thể quay lại bước trước đó để có thể hiểu vấn đề chính một cách rõ ràng.&lt;/p&gt;

&lt;h3 id=&quot;what-to-do-about-it&quot;&gt;What to do about it?&lt;/h3&gt;
&lt;p&gt;Vậy thì chúng ta cần phải làm gì ?? Câu hỏi tương đối khó bởi vì khi chìm sâu vào 1 vấn đề chúng ta luôn tìm cách giải quyết nó chứ ít khi chúng ta tìm hiểu nguyên nhân vấn đề đó tại sao lại xảy ra.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Luôn nhìn vấn đề ở một bức tranh rộng hơn và đi cùng nó là những giải pháp.&lt;/li&gt;
  &lt;li&gt;Nếu ai đó yêu cầu thêm về thông tin, hãy cung cấp nó một cách đầy đủ và chi tiết.&lt;/li&gt;
  &lt;li&gt;Loại trừ những giải pháp đã được sử dụng, chia sẻ lý do bạn loại trừ chúng. Điều này sẽ cung cấp thêm thông tin về yêu cầu của bạn.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;em&gt;Nên nhớ rằng nếu bạn luôn đoán đúng, bạn không cần phải hỏi bất cứ ai cả ^^&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;examples&quot;&gt;Examples&lt;/h3&gt;
&lt;h4 id=&quot;example-1&quot;&gt;Example 1&lt;/h4&gt;
&lt;p&gt;n00b không thực sự muốn 3 kí tự cuối cùng trong filename, anh ta muốn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;file extensions&lt;/code&gt;, vậy tại sao anh ấy lại hỏi về 3 kí tự cuối cùng ??&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;n00b&amp;gt; Làm thế nào tôi có thể in ra 3 kí tự cuối cùng của filename ?
&amp;lt;feline&amp;gt; Nếu chúng đang trong 1 biến, bạn có thể dùng: echo ${foo: -3}
&amp;lt;feline&amp;gt; Tại sao lại là 3 kí tự ? Đó có thực sự là điều bạn muốn ?
&amp;lt;feline&amp;gt; Có phải bạn đang muốn phần mở rộng của file ?
&amp;lt;n00b&amp;gt; Đúng :)
&amp;lt;feline&amp;gt; Không có gì đảm bảo rằng mọi filename sẽ có phần mở rộng là 3 kí tự cả, vì vậy cứ bám theo sự mù quáng rằng 3 kí tự sẽ không thể giải quyết được vấn đề
&amp;lt;feline&amp;gt; echo ${foo##*.}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;example-2&quot;&gt;Example 2&lt;/h4&gt;
&lt;p&gt;Nếu Angela chỉ bắt đầu giải thích bằng cách giải thích thì cô ấy muốn ngăn người khác phát hiện hệ điều hành của mình, cuộc thảo luận đáng nhẽ ra có thể ngắn hơn rất nhiều.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Angela: 'nmap -O -A 127.0.0.1' trả về một số dòng bắt đầu với 'OS:'. Làm thế nào để thay đổi nó ?
Obama: Nhìn vào sourcecode của nmap, tìm cách nó tìm ra phần Linux, sau đó viết lại TCP/IP của bạn để nó không vận hành theo theo cách mà nmap hoạt động.
Angela: Đúng, nhưng tôi không biết về hệ thống api linux
Obama: Well, địa chỉ của nmap dựa trên cách hoạt động của ngăn xếp TCP/IP, không có cách nào ngoại trừ viết lại các phần thích hợp của ngăn xếp đó.
Angela: Tôi thực sự mcaanf phải tránh những tin nhắn này. Những IP nào có thể làm công việc này ?
Obama: Well, không sử dụng việc quyét hệ điều hành hoặc quét các phiên bản.
Angela: Tôi muốn ngăn người khác biết hệ điều hành của tôi.....
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;:v :v&lt;/p&gt;
</description>
        <pubDate>Mon, 06 Jan 2020 00:00:00 +0000</pubDate>
        <link>/life/2020/01/06/the-x-y-problem/</link>
        <guid isPermaLink="true">/life/2020/01/06/the-x-y-problem/</guid>
      </item>
    
      <item>
        <title>Ruby - Login and messaging with line</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;Gần đây mình có gặp lại task liên quan tới việc implement tính năng đăng nhập và nhắn tin thông qua mạng xã hội Line.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;

&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Tuy cách đây 1 năm mình cũng đã gặp task này nhưng khi gặp lại cũng còn khá nhiều bỡ ngỡ nên mình quyết định xây 1 chiếc base nhỏ cùng những &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;noob&lt;/code&gt; của mình để biết đâu sau này mình hoặc bạn có thể tránh phải&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1-đặt-vấn-đề&quot;&gt;1. Đặt vấn đề&lt;/h3&gt;

&lt;p&gt;Để làm bất cứ task nào mà mình chưa biết thì việc tự &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;research&lt;/code&gt; là vô cùng quan trọng. Như thường lệ, các câu hỏi đặt ra là: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;what&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;why&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;when&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;where&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;how&lt;/code&gt;. Và chúng ta sẽ trả lời câu hỏi đó&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;what ? Chúng ta sẽ thực hiện chức năng login bằng Line và nhắn tin cho người dùng sử dụng Line&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;why ? Do có nhu cầu từ KH hoặc là vì &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mình thích&lt;/code&gt; =))&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;when ? Khi người dùng muốn đồng bộ hoặc sử dụng thông tin tài khoản cá nhân Line của mình với hệ thống mà không tốn thời gian đăng nhập + nhận thông báo của hệ thống thông qua line. Để sâu hơn, bạn có thể tìm hiểu về &lt;a href=&quot;https://oauth.net/2/&quot;&gt;OAuth-2&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;where ? Phần này mình nghĩ sẽ liên quan tới &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;how&lt;/code&gt; nhiều hơn nhưng không sao, chúng ta vẫn có thể tìm kiếm mọi thứ thông qua internet hoặc thông qua &lt;em&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;người thân&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;how ?&lt;/p&gt;

    &lt;ul&gt;
      &lt;li&gt;
        &lt;p&gt;Xác định vấn đề: Các bước trên đã có vẻ clear :D&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Giải quyết vấn đề: Để giải quyết được các vấn đề, với mình thì nên đặt ra các câu hỏi đúng để có thể trả lời từng câu hỏi đó dẫn tới việc giải quyết bài toán. Bạn có thể tham khảo &lt;a href=&quot;/life/2020/01/06/the-x-y-problem/&quot; target=&quot;_blank&quot;&gt;X-Y problem&lt;/a&gt;&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Khi một service sinh ra để cung cấp tính năng thì chắc chắn nhà cung cấp phải cung cấp đi kèm service đó một document cụ thể. =&amp;gt; Tài liệu nên tìm hiểu và đọc của Line service&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-giải-quyết-vấn-đề&quot;&gt;2. Giải quyết vấn đề&lt;/h3&gt;

&lt;h4 id=&quot;21-đăng-nhập-với-tài-khoản-sử-dụng-thông-tin-đăng-nhập-từ-tài-khoản-line&quot;&gt;2.1. Đăng nhập với tài khoản sử dụng thông tin đăng nhập từ tài khoản Line&lt;/h4&gt;

&lt;p&gt;Document hướng dẫn của Line: [Integrating LINE Login with your web app&lt;/p&gt;

&lt;p&gt;](https://developers.line.biz/en/docs/line-login/web/integrate-line-login/)&lt;/p&gt;

&lt;p&gt;Quá trình Đăng nhập LINE cho web (đăng nhập web) dựa trên luồng cấp mã ủy quyền OAuth 2.0 và giao thức OpenID Connect. Ứng dụng của bạn phải có khả năng thực hiện yêu cầu phía máy chủ và nhận dữ liệu từ Nền tảng LINE. Sau đây là tổng quan về dòng đăng nhập web:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images.viblo.asia/18f9795d-8ce2-4550-8be5-ebca1f98b7fd.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Flow đăng nhập web sử dụng Line:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Ứng dụng của bạn hướng người dùng đến URL ủy quyền Đăng nhập LINE với các tham số truy vấn bắt buộc (tham khảo bên dưới).&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Hộp thoại Đăng nhập LINE được mở trong trình duyệt và người dùng đăng nhập để được xác thực. Sau khi Nền tảng LINE xác thực thông tin đăng nhập của người dùng, người dùng cũng phải đồng ý cấp các quyền được yêu cầu cho ứng dụng của bạn.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Nền tảng LINE chuyển hướng người dùng quay lại ứng dụng của bạn thông qua redirect_uri với mã ủy quyền và trạng thái trong chuỗi truy vấn.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Ứng dụng của bạn yêu cầu mã thông báo truy cập từ https://api.line.me/oauth2/v2.1/token endpoint với mã ủy quyền.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Nền tảng LINE xác nhận yêu cầu của ứng dụng của bạn và trả về mã thông báo truy cập.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Khi bạn đã truy xuất mã thông báo truy cập, bạn có thể sử dụng mã này để gọi API đến các thông tin cần thiế để sử dụng.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Trước khi bắt đầu bạn cần đăng kí tài khoản line channel của bạn: tại &lt;a href=&quot;https://developers.line.biz/en/docs/line-login/getting-started/&quot;&gt;https://developers.line.biz/en/docs/line-login/getting-started/&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Lưu ý: trong phần &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Callback URL&lt;/code&gt; bạn cần khai báo địa url trong project của bạn mà sau khi line validate thành công sẽ redirect về project kèm theo params của Line cung cấp.
Ví dụ trong môi trường development: http://localhost:3000/auth/line/callback&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://developers.line.biz/media/line-login/integrate-login-web/redirect-settings-cd7e32a6.png&quot; alt=&quot;image-callback &quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Tạo request url:
    &lt;ul&gt;
      &lt;li&gt;Để xác thực người dùng và yêu cầu quyền của ứng dụng của bạn, hãy chuyển hướng người dùng đến URL ủy quyền sau với các tham số truy vấn bắt buộc. Bạn có thể chuyển hướng người dùng bằng nút &lt;a href=&quot;https://developers.line.biz/en/docs/line-login/login-button/&quot;&gt;Đăng nhập LINE&lt;/a&gt; hoặc bằng liên kết trực tiếp.&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Các tham số cần thiết trong url được generate ra:&lt;/p&gt;

        &lt;table&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;Tham số&lt;/th&gt;
              &lt;th style=&quot;text-align: center&quot;&gt;Kiểu dữ liệu&lt;/th&gt;
              &lt;th style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/th&gt;
              &lt;th style=&quot;text-align: right&quot;&gt;Mô tả&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;response_type&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;code&lt;/code&gt;. Tham số này để thông báo cho Line Platform biết được cần trả về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;authoration code&lt;/code&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;client_id&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Channel ID&lt;/code&gt;. Định danh duy nhất mà Line cung cấp cho channel của bạn, tham số này đuợc cung cấp trong trang quản lý login channel.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;redirect_uri&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Callback URL&lt;/code&gt;. Là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;url&lt;/code&gt; bạn cung cấp trong setting của line channel như đã &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chu ý ở trên&lt;/code&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;state&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Một chuỗi ký tự chữ và số duy nhất được sử dụng để ngăn chặn giả mạo yêu cầu giữa các trang web. Giá trị này sẽ được tạo ngẫu nhiên bởi ứng dụng của bạn. Không thể là một chuỗi được mã hóa URL.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;scope&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Quyền được cấp bởi người dùng. Bạn có thể chỉ định nhiều phạm vi bằng ký tự khoảng trắng được mã hóa URL (% 20). Thông thường, scope bao gồm: profile, openid và email&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;nonce&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Không bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Một chuỗi được sử dụng để ngăn chặn các cuộc tấn công phát lại. Giá trị này được trả về trong mã thông báo ID.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;prompt&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Không bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;consent&lt;/code&gt;. Được sử dụng để buộc màn hình chấp thuận được hiển thị ngay cả khi người dùng đã cấp tất cả các quyền được yêu cầu.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;max_age&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;Number&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Không bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Thời gian cho phép trôi qua tính bằng giây kể từ lần cuối cùng người dùng được xác thực. Tương ứng với tham số max_age được xác định trong phần “Yêu cầu xác thực” của OpenID Connect Core 1.0.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;ui_locales&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Optional&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Ngôn ngữ hiển thị cho màn hình Đăng nhập LINE. Chỉ định là một hoặc nhiều thẻ ngôn ngữ RFC 5646 (BCP 47), được phân tách bằng dấu cách, theo thứ tự ưu tiên. Tương ứng với tham số ui_locales được xác định trong phần “Yêu cầu xác thực” của OpenID Connect Core 1.0.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;bot_prompt&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Không bắt buộc&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Hiển thị tùy chọn để thêm tài khoản chính thức LINE làm bạn bè trong khi đăng nhập. Đặt giá trị &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;normal&lt;/code&gt; thường hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aggressive&lt;/code&gt;. Để biết thêm thông tin, hãy xem &lt;a href=&quot;https://developers.line.biz/en/docs/line-login/web/link-a-bot/&quot;&gt;Liên kết tài khoản chính thức LINE với kênh Đăng nhập LINE của bạn.&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Sau khi tạo reques url thành công, khi di chuyển vào link đã được tạo ra, người dùng sẽ đuợc di chuyển sang trang của Line để tiến hành đăng nhập và xác thực. Nếu xác thực thành công, Line Platform sẽ redirect tới server của bạn với confir callback đã khai báo từ trước kèm them tham số là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;code&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;friendship_status_changed&lt;/code&gt;&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Tables&lt;/th&gt;
          &lt;th style=&quot;text-align: center&quot;&gt;Are&lt;/th&gt;
          &lt;th style=&quot;text-align: right&quot;&gt;Cool&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;code&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
          &lt;td style=&quot;text-align: right&quot;&gt;Mã ủy quyền được sử dụng để nhận mã thông báo truy cập. Có giá trị trong &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10 phút&lt;/code&gt;. Mã ủy quyền này chỉ có thể được sử dụng một lần.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;state&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
          &lt;td style=&quot;text-align: right&quot;&gt;tham số  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;state&lt;/code&gt; được bao gồm trong URL ủy quyền của yêu cầu ban đầu. Ứng dụng của bạn nên xác minh rằng giá trị này khớp với giá trị trong yêu cầu ban đầu.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;friendship_status_changed&lt;/td&gt;
          &lt;td style=&quot;text-align: center&quot;&gt;Boolean&lt;/td&gt;
          &lt;td style=&quot;text-align: right&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; nếu trạng thái tình bạn giữa người dùng và tài khoản chính thức LINE thay đổi trong quá trình đăng nhập. Nếu không, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false&lt;/code&gt;. Giá trị này chỉ được trả về nếu tham số truy vấn bot_prompt được chỉ định trong yêu cầu cấp phép và màn hình chấp thuận với tùy chọn thêm tài khoản chính thức LINE của bạn khi bạn bè được hiển thị cho người dùng.&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ví dụ về một response của Line trả về:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;HTTP/1.1 302 Found
Location : https://client.example.org/cb?code=abcd1234&amp;amp;state=0987poi&amp;amp;friendship_status_changed=true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Lấy access token:
  Để lấy accesstoken, hãy tạo một yêu cầu POST HTTP với mã ủy quyền. Khi bạn có mã thông báo truy cập, bạn có thể sử dụng nó để thực hiện các cuộc gọi API. Mã thông báo truy cập được phát hành tại điểm cuối sau.
    &lt;ul&gt;
      &lt;li&gt;Request
        &lt;blockquote&gt;
          &lt;p&gt;POST https://api.line.me/oauth2/v2.1/token&lt;/p&gt;
        &lt;/blockquote&gt;
      &lt;/li&gt;
      &lt;li&gt;Request header:
  | Request header        | Mô tả           |
  | ————- |:————-:|
  | Content-Type | application/x-www-form-urlencoded |&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Request body&lt;/p&gt;

        &lt;table&gt;
          &lt;thead&gt;
            &lt;tr&gt;
              &lt;th&gt;Parameters&lt;/th&gt;
              &lt;th style=&quot;text-align: center&quot;&gt;Type&lt;/th&gt;
              &lt;th style=&quot;text-align: right&quot;&gt;Required&lt;/th&gt;
              &lt;th style=&quot;text-align: right&quot;&gt;Description&lt;/th&gt;
            &lt;/tr&gt;
          &lt;/thead&gt;
          &lt;tbody&gt;
            &lt;tr&gt;
              &lt;td&gt;grant_type&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Required&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;authorization_code.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;code&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Required&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Authorization code&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;redirect_uri&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Required&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Callback URL&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;client_id&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Required&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Channel ID. Found in the console.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
              &lt;td&gt;client_secret&lt;/td&gt;
              &lt;td style=&quot;text-align: center&quot;&gt;String&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Required&lt;/td&gt;
              &lt;td style=&quot;text-align: right&quot;&gt;Channel secret. Found in the console.&lt;/td&gt;
            &lt;/tr&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Response: Sau khi request, nếu thông tin truyền lên valid, Line sẽ trả về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;access_token&lt;/code&gt; và một số thông tin đi kèm.&lt;/li&gt;
  &lt;li&gt;Chúng ta sẽ sử dụng accesstoken đó để request lên &lt;a href=&quot;https://developers.line.biz/en/docs/line-login/web/integrate-line-login/#use-endpoint&quot;&gt;LINE social enpoint&lt;/a&gt; để sử dụng các thông tin mà Line cung cấp.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;22-nhắn-tin-sử-dụng-line-channel&quot;&gt;2.2. Nhắn tin sử dụng line channel&lt;/h4&gt;

&lt;p&gt;Để sử dụng tính năng nhắn tin Line, bạn cần phải tạo một channel để nhắn tin tại: &lt;a href=&quot;https://developers.line.biz/console/&quot;&gt;Line console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Các lưu ý:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Sử dụng channel access token: Accesstoken là token tồn tại lâu dài phải được đặt trong tiêu đề ủy quyền khi thực hiện các cuộc gọi API. Bạn có thể phát hành lại mã thông báo truy cập kênh bất cứ lúc nào thông qua bảng điều khiển.&lt;/li&gt;
  &lt;li&gt;Để sử dụng một access token, click vào &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;issue&lt;/code&gt; bên dưới phần &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;**Channel access token (long-lived)**&lt;/code&gt; trong tab &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Messaging API&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Mặc định, BOT không thể nhắn tin cho người dùng mà chưa kết bạn hoặc chưa từng tuơng tác với người dùng. Vì thế bạn cần chắc chắn là bot channel của mình đã kết bạn với người dùng.  Có nhiều cách như trên trang chủ  &lt;a href=&quot;https://developers.line.biz/en/docs/messaging-api/building-bot/#sending-reply-messages&quot;&gt;LINE&lt;/a&gt; đã cung cấp. Trong phần này mình sẽ hướng dẫn bạn sử dụng tính năng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;push_message&lt;/code&gt;
&lt;em&gt;Chú ý: để có thể hiển thị tính năng kết bạn sau khi người dùng chấp nhận ủy quyền thông tin của Line, bạn cần liên kết Line bot messaging với Line login: Trong tab &lt;strong&gt;## LINE Login settings&lt;/strong&gt; &amp;gt; &lt;strong&gt;### General settings&lt;/strong&gt; &amp;gt; &lt;strong&gt;Linked OA&lt;/strong&gt; chọn app liên kết là Line bot messaging bạn vừa tạo.&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Hướng dẫn sử dụng tính năng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;push_message&lt;/code&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;HTTP request
  POST https://api.line.me/v2/bot/message/push&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Request headers&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Request header&lt;/th&gt;
          &lt;th&gt;Description&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;Content-Type&lt;/td&gt;
          &lt;td&gt;application/json&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;Authorization&lt;/td&gt;
          &lt;td&gt;Bearer {channel access token}&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Request body&lt;/p&gt;

    &lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th&gt;Property&lt;/th&gt;
          &lt;th&gt;Type&lt;/th&gt;
          &lt;th&gt;Required	Description&lt;/th&gt;
          &lt;th&gt; &lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;to&lt;/td&gt;
          &lt;td&gt;String&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
          &lt;td&gt;ID của người nhận mục tiêu. Sử dụng giá trị userId, groupId hoặc roomId được trả về trong một đối tượng sự kiện webhook. Không sử dụng ID LINE được tìm thấy trên LINE.&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;messages&lt;/td&gt;
          &lt;td&gt;Array của các đối tượng tin nhắn&lt;/td&gt;
          &lt;td&gt;Required	Messages, Tối đa: 5&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;notificationDisabled&lt;/td&gt;
          &lt;td&gt;Boolean&lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ví dụ khi thực hiện request sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;curl&lt;/code&gt; :&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -v -X POST https://api.line.me/v2/bot/message/push \
-H 'Content-Type: application/json' \
-H 'Authorization: Bearer {channel access token}' \
-d '{
    &quot;to&quot;: &quot;U4af4980629...&quot;,
    &quot;messages&quot;:[
        {
            &quot;type&quot;:&quot;text&quot;,
            &quot;text&quot;:&quot;Hello, world1&quot;
        },
        {
            &quot;type&quot;:&quot;text&quot;,
            &quot;text&quot;:&quot;Hello, world2&quot;
        }
    ]
}'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 06 Jan 2020 00:00:00 +0000</pubDate>
        <link>/technical/2020/01/06/login-and-messaging-with-line/</link>
        <guid isPermaLink="true">/technical/2020/01/06/login-and-messaging-with-line/</guid>
      </item>
    
      <item>
        <title>Rails routes namespace vs scopes</title>
        <description>&lt;p&gt;Bài viết được dịch từ nguồn: https://devblast.com/b/rails-5-routes-scope-vs-namespace&lt;/p&gt;

&lt;p&gt;You may be wondering (tự hỏi) about the difference between scope and namespace for the routes in your Rails application. It’s important to know the difference, because they affect (có ảnh hưởng tới) the path of your resources and the controllers.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Bạn có thể tự hỏi về sự khác biệt giữa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;namespace&lt;/code&gt; của router trong Rails ?. Đó là một sự khác biệt quan trọng bởi vì nó sẽ ảnh hưởng tới &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resources&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;controller&lt;/code&gt; trong hệ thống của bạn.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;1-namespace&quot;&gt;1. namespace&lt;/h2&gt;

&lt;p&gt;This is the simple option. When you use namespace, it will prefix the URL path for the specified resources (nó sẽ thêm tiền tố url cho các resources được chỉ định), and try to locate the controller under a module named in the same manner as the namespace. (và nó sẽ cố gắng để định vị controller của bạn nằm bên trong một module với tên tương tự như tên của namespace bạn vừa đặt).&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;namespace&lt;/code&gt; là một cài đặt đơn giản. Khi bạn sử dụng namespace, nó sẽ sử dụng một đoạn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; (tiền tố) bên trước &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resources&lt;/code&gt; (dạng như thêm một tiền tố bên trước path vào controller) và đồng thời controller của bạn sẽ phải định nghĩa bên trong module với tên là tên của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;namespace&lt;/code&gt; bạn vừa đặt.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;With the following code in the routes.rb file,&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;namespace :admin do
  resources :users
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You will end up with the following routes:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Prefix Verb         URI Pattern               Controller#Action
admin_users GET    /admin/users(.:format)     admin/users#index
            POST   /admin/users(.:format)     admin/users#create
admin_user  GET    /admin/users/:id(.:format) admin/users#show
            PATCH  /admin/users/:id(.:format) admin/users#update
            PUT    /admin/users/:id(.:format) admin/users#update
            DELETE /admin/users/:id(.:format) admin/users#destroy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin&lt;/code&gt; was added as a prefix in the URI path (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/admin/users)&lt;/code&gt; and as a module containing (chứa) the controller (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin/users#index&lt;/code&gt;). With this code, Rails will expect &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Admin::UsersController&lt;/code&gt; to be located at &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;app/controllers/admin/users_controller&lt;/code&gt;.rb.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Bạn có thể thấy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin&lt;/code&gt; đã được thêm vào dưới dạng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; của URI path: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/admin/users&lt;/code&gt; và module chứa controller &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin/users_controller&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;2-scope&quot;&gt;2. scope&lt;/h2&gt;

&lt;h3 id=&quot;21-khi-scope-không-có-options-đi-kèm&quot;&gt;2.1 Khi scope không có options đi kèm&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; is a bit more complex - but the advantage is that it gives you more options to fine-tune exactly what you want to do.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; thì phức tạp hơn nhưng có lợi thế là sẽ mang lại cho bạn nhiều lựa chọn để bạn có thể tinh chỉnh theo ý muốn.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# routes.rb
scope :admin do
  resources :users
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are the generated routes:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Prefix Verb   URI Pattern                Controller#Action
 users GET    /admin/users(.:format)     users#index
       POST   /admin/users(.:format)     users#create
  user GET    /admin/users/:id(.:format) users#show
       PATCH  /admin/users/:id(.:format) users#update
       PUT    /admin/users/:id(.:format) users#update
       DELETE /admin/users/:id(.:format) users#destroy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/admin&lt;/code&gt; was added as a prefix before &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/users&lt;/code&gt;, but users controller doesn’n have to be inside any module.&lt;/p&gt;

&lt;p&gt;Như chúng ta thấy. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/admin&lt;/code&gt; đã được thêm vào tiền tố trước &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/users&lt;/code&gt;, nhưng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;users_controller&lt;/code&gt; không cần thiết phải nằm trong module nào cả.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Túm cái váy lại, khi dùng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;namespace&lt;/code&gt; thì router của controller phải nằm trong một thứ gọi là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; (tiền tố) tương ứng với tên của module (thư mục) chứa controller đó.
Còn với scope thì không cần thiết, nó sẽ cho phép bạn định nghĩa được &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; router của bạn là gì mà không cần phải tạo thêm &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; cho controller của bạn.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;22-scope-đi-kèm-với-option&quot;&gt;2.2 scope đi kèm với option&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; supports three options: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&quot;module&quot;&gt;module&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; let us define in which module the controller for the embedded resources will live.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;module&lt;/code&gt; cho phép chúng ta định nghĩa tên của module chứa resources - tức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;controller&lt;/code&gt; của chúng ta.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scope module: 'admin' do
  resources :users
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Prefix Verb   URI Pattern          Controller#Action
 users GET    /users(.:format)     admin/users#index
       POST   /users(.:format)     admin/users#create
  user GET    /users/:id(.:format) admin/users#show
       PATCH  /users/:id(.:format) admin/users#update
       PUT    /users/:id(.:format) admin/users#update
       DELETE /users/:id(.:format) admin/users#destroy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;=&amp;gt; Để ý &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;router&lt;/code&gt; của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;users&lt;/code&gt; không cần phải đặt sau một chiếc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; nào cả.&lt;/p&gt;

&lt;h4 id=&quot;path&quot;&gt;path&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; allows us to set the prefix that will appear in the URI, before the resource name.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; cho phép chúng ta định nghĩa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; đứng trước &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resources&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scope module: 'admin', path: 'fu' do
  resources :users
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Prefix Verb   URI Pattern             Controller#Action
 users GET    /fu/users(.:format)     admin/users#index
       POST   /fu/users(.:format)     admin/users#create
  user GET    /fu/users/:id(.:format) admin/users#show
       PATCH  /fu/users/:id(.:format) admin/users#update
       PUT    /fu/users/:id(.:format) admin/users#update
       DELETE /fu/users/:id(.:format) admin/users#destroy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;as&quot;&gt;as&lt;/h4&gt;

&lt;p&gt;Finally, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt; can be used to change the name of the path method used to identify the resources.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt; được sử dụng để thay đổi tên của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resources&lt;/code&gt; sử dụng khi định danh &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;resources&lt;/code&gt; như khi sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;redirect&lt;/code&gt; hoặc gọi trên controller.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;scope module: 'admin', path: 'fu', as: 'cool' do
  resources :users
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case, we now have cool as a prefix for the path names cool_users and cool_user.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Trong case này, chúng ta đã có &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prefix&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fu&lt;/code&gt; cho controller &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;admin/users_controller&lt;/code&gt; với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;path&lt;/code&gt; là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cool_users&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Prefix Verb   URI Pattern             Controller#Action
cool_users GET    /fu/users(.:format)     admin/users#index
           POST   /fu/users(.:format)     admin/users#create
cool_user  GET    /fu/users/:id(.:format) admin/users#show
           PATCH  /fu/users/:id(.:format) admin/users#update
           PUT    /fu/users/:id(.:format) admin/users#update
           DELETE /fu/users/:id(.:format) admin/users#destroy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Sun, 22 Dec 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/12/22/rails-namespace-vs-scopes/</link>
        <guid isPermaLink="true">/technical/2019/12/22/rails-namespace-vs-scopes/</guid>
      </item>
    
      <item>
        <title>Tất tần tật về array trong ruby</title>
        <description>&lt;p&gt;Bài viết dựa trên nguồn &lt;a href=&quot;https://ruby-doc.org/core-2.4.1/Array.html&quot;&gt;ruby-doc.org&lt;/a&gt; và một số ví dụ mình sưu tầm được. Hi vọng sẽ giúp đỡ được mình và mọi người trên con đường làm chủ Ruby.&lt;/p&gt;

&lt;h1 id=&quot;array-mảng&quot;&gt;Array (mảng)&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Array là kiểu dữ liệu được sắp xếp, đánh chỉ mục số nguyên (chỉ số) của bất kì đối tượng nào&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Array có chỉ số bắt đầu từ 0, tương tự như C hoặc Java. Một chỉ số âm được coi là có liên quan đến cuối của mảng là chỉ só &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-1&lt;/code&gt; chỉ ra phần tử cuối cùng của mảng, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-2&lt;/code&gt; là phần tử tiếp theo cuối cùng trong mảng, và cứ thế tiếp tục &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-3&lt;/code&gt;, ..&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;tạo-mới-arrays&quot;&gt;Tạo mới Arrays&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Một mảng mới có thể được tạo bằng cách sử dụng kí tự khởi tạo: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[]&lt;/code&gt;. Như ví dụ dưới, mảng được tạo bao gồm kiểu dữ liệu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Integer&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Float&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [1, &quot;two&quot;, 3.0] #=&amp;gt; [1, &quot;two&quot;, 3.0]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Một array có thể được tạo bằng cách gọi rõ ràng lệnh &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;::new&lt;/code&gt; với không, một (khởi tạo độ dài của mảng) hoặc hai phần tử (khởi tạo độ dài và giá trị mặc định của đối tượng)&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = Array.new     #=&amp;gt; []
Array.new(3)        #=&amp;gt; [nil, nil, nil]
Array.new(3, true)  #=&amp;gt; [true, true, true]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Chú ý rằng phần thử thứ hai điền vào mảng với các tham chiếu tới cùng một đối tượng. Do đó, cách này nên dùng trong các trường hợp bạn cần khởi tạo các mảng với các đối tượng bất biến như là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symbols&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;numbers&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Để taọ một mảng với các đối tượng riêng biệt, chúng ta có thể sử dụng block. Phương pháp này an toàn khi sử dụng với các đối tượng có thể thay đoỏi, chẳng hạn như &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hashes&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;strings&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arrays&lt;/code&gt;.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array.new(4) { Hash.new }   #=&amp;gt; [{}, {}, {}, {}]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Một cách nhanh để tạo các mảng đa chiều:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;empty_table - Array.new(3) { Array.new(3) }

#=&amp;gt; [[nil, nil, nil], [nil, nil, nil], [nil, nil, nil]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Một array có thể tạo bằng cách sử dụng phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Array()&lt;/code&gt;, cung cấp bởi Kernel, nơi mà chúng sẽ được gọi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_ary&lt;/code&gt; sau đó &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_a&lt;/code&gt; trong mỗi phần tử của chúng:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Array({:a =&amp;gt; &quot;a&quot;}, :b =&amp;gt; &quot;b&quot;)   #=&amp;gt; [[:a, &quot;a&quot;], [:b, &quot;b&quot;]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;truy-cập-các-phần-tử&quot;&gt;Truy cập các phần tử&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Các phần tử trong array cso thể được lấy bằng cách sử dụng phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[]&lt;/code&gt;. Nó có thể lấy thông qua chỉ số một giá trị duy nhất, cũng có thể lấy một phần trong khoảng (chỉ số bắt đầu và độ dài).&lt;/li&gt;
  &lt;li&gt;Các chỉ số âm bắt đầu từ cuối, với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-1&lt;/code&gt; là phần tử cuối cùng.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [1, 2, 3, 4, 5, 6]
arr[2]      #=&amp;gt; 3
arr[100]    #=&amp;gt; nil
arr[-3]     #=&amp;gt; 4
arr[2, 3]   #=&amp;gt; [3, 4, 5]
arr[1..4]   #=&amp;gt; [2, 3, 4, 5]
arr[1..-3]  #=&amp;gt; [2, 3, 4]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Một cách khác để truy cập một phần tử cụ thể của mảng là sử dụng phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;at&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.at(0)   #=&amp;gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;**Để hiển thị ra lỗi cho trường hợp chỉ số nhập vào vượt ra bên ngoài của mảng hoặc đặt giá trị mặc định khi điều đó xảy ra, chúng ta sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fetch&lt;/code&gt; **&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = ['a', 'b', 'c', 'd', 'e', 'f']

arr.fetch(100) #=&amp;gt; IndexError: index 100 outside of array bounds: -6...6

arr.fetch(100, &quot;oops&quot;) #=&amp;gt; &quot;oops&quot;
arr.fetch(100, 'g') #=&amp;gt; &quot;g&quot;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;first&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;last&lt;/code&gt; sẽ trả về giá trị đầu tiên và cuối cùng của mảng tương ứng&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.first #=&amp;gt; 1
arr.last  #=&amp;gt; 6

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Để trả về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; phần tử của mảng, sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;take&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.take(3) #=&amp;gt; [1, 2, 3]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;drop&lt;/code&gt; thực hiện ngược lại với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;take&lt;/code&gt;, nó sẽ trả lại mảng với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; phần tử đã bị hủy&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;lấy-thông-tin-của-một-array&quot;&gt;Lấy thông tin của một Array&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;Arrays luôn theo dõi độ dài của chúng. Để truy vấn một mảng về số lượng phần tử mà nó chứa, sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;length&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;browsers = ['Chrome', 'Firefox', 'Safari', 'Opera', 'IE']
browsers.length #=&amp;gt; 5
browsers.count #=&amp;gt; 5
browsers.size #=&amp;gt; 5
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Để kiểm mảng có chứa bất kì một phần tử nào không chúng ta sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;empty?&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;browsers.empty?   #=&amp;gt; false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Để kiểm tra một phần tử có nằm trong array ta sử dụng hàm &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;include?&lt;/code&gt;:
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;browsers.include?('Konqueror') #=&amp;gt; false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;thêm-phần-tử-vào-mảng&quot;&gt;Thêm phần tử vào mảng&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Các phần tử có thể được thêm vào cuối mảng bàng cách sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;push&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [1, 2, 3, 4]
arr.push(5) #=&amp;gt; [1, 2, 3, 4, 5]
arr &amp;lt;&amp;lt; 6    #=&amp;gt; [1, 2, 3, 4, 5, 6]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unshift&lt;/code&gt; sẽ thêm phần tử mới vào đầu mảng.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.unshift(0) #=&amp;gt; [0, 1, 2, 3, 4, 5, 6]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;insert&lt;/code&gt; bạn có thể thêm phần tử vào array với vị trí chỉ định&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.insert(3, 'apple')  #=&amp;gt; [0, 1, 2, 'apple', 3, 4, 5, 6]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Khi sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;insert&lt;/code&gt; chúng ta có thể thêm nhiều phần tử cùng 1 lúc trong 1 lần.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.insert(3, 'orange', 'pear', 'grapefruit')
#=&amp;gt; [0, 1, 2, &quot;orange&quot;, &quot;pear&quot;, &quot;grapefruit&quot;, &quot;apple&quot;, 3, 4, 5, 6]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;xóa-phần-tử-khỏi-mảng&quot;&gt;Xóa phần tử khỏi mảng&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pop&lt;/code&gt; xóa phần tử cuối cùng khỏi mảng và trả về mảng đó.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr =  [1, 2, 3, 4, 5, 6]
arr.pop #=&amp;gt; 6
arr #=&amp;gt; [1, 2, 3, 4, 5]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Để truy xuất đồng thời xóa phần tử đầu tiên, sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shift&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.shift #=&amp;gt; 1
arr #=&amp;gt; [2, 3, 4, 5]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;XÓa một phần tử tại vị trí xác định:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr.delete_at(2) #=&amp;gt; 4
arr #=&amp;gt; [2, 3, 5]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Xóa một phần tử tại bất kì vị trí nào trong mảng, sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;delete&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [1,2,2,3,2]
arr.delete(2) #=&amp;gt; 2
arr           #=&amp;gt; [1, 3]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compact&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compact!&lt;/code&gt; để xóa giá trị &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nil&lt;/code&gt; trong mảng:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = ['foo', 0, nil, 'bar', 7, 'baz', nil]
arr.compact  #=&amp;gt; ['foo', 0, 'bar', 7, 'baz']
arr          #=&amp;gt; ['foo', 0, nil, 'bar', 7, 'baz', nil]
arr.compact! #=&amp;gt; ['foo', 0, 'bar', 7, 'baz']
arr          #=&amp;gt; ['foo', 0, 'bar', 7, 'baz']
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Để xóa các phần tử trùng lặp trong mảng, sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uniq&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uniq!&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [2, 5, 6, 556, 6, 6, 8, 9, 0, 123, 556]
arr.uniq #=&amp;gt; [2, 5, 6, 556, 8, 9, 0, 123]
arr      #=&amp;gt; [2, 5, 6, 556, 6, 6, 8, 9, 0, 123, 556]
arr.uniq! #=&amp;gt; [2, 5, 6, 556, 8, 9, 0, 123]
arr      #=&amp;gt; [2, 5, 6, 556, 8, 9, 0, 123]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;lặp-mảng&quot;&gt;Lặp mảng&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;Tương tự các lớp khác bao gồm module &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Enumerable&lt;/code&gt;, Array có một phương thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each&lt;/code&gt;, định nghĩa các phần tử nào sẽ được lặp và làm thế nào. Trong trường hợp &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each&lt;/code&gt; của Array, tất cả các phần tử trong đối tượng Array đều được đưa vào khối theo trình tự.&lt;/li&gt;
  &lt;li&gt;Lưu ý rằng thao tác này không làm thay đổi giá trị của mảng.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;arr = [1, 2, 3, 4, 5]
arr.each { |a| print a -= 10, &quot; &quot; }
# prints: -9 -8 -7 -6 -5
#=&amp;gt; [1, 2, 3, 4, 5]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Một phương thức lặp đôi khi cũng hữu ích là&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 22 Dec 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/12/22/tat-tan-tat-ve-array-trong-ruby/</link>
        <guid isPermaLink="true">/technical/2019/12/22/tat-tan-tat-ve-array-trong-ruby/</guid>
      </item>
    
      <item>
        <title>Select muli categories with rails + jquery</title>
        <description>&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

## Select muli categories

## sử dụng rails + jquery

- Author: [hungnv950](https://github.com/hungnv950)

- Repo: [https://github.com/Hungnv950/rails-select-multi-categories](https://github.com/Hungnv950/rails-select-multi-categories)

- Representor: [https://hungnv950.github.io/2019/12/14/slect-multy-categories/#/](https://hungnv950.github.io/2019/12/14/slect-multy-categories/#/)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Vấn đề

  - Hầu hết các dự án out source và dự án rails cho thị trường Nhật nói chung việc làm việc với lựa chọn dữ liệu dùng checkbox là rất phổ biến.

  - ![problem](https://fluidsurveys.com/wp-content/uploads/2009/11/56.png)
  - Lựa chọn categories cho người dùng
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Cách giải quyết

  ![Vào code dự án cũ để xem lại.](https://as2.ftcdn.net/jpg/01/70/81/05/500_F_170810520_qTnUe8qFYZo6Rc9rcBpXuUvYDl4v1pDi.jpg &quot;Codding&quot;)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Cách giải quyết

  &lt;p&gt; Vào code dự án cũ để xem lại. &lt;/p&gt;
  &lt;br /&gt;

  ![Vào code dự án cũ để xem lại.](https://letweb.net/wp-content/uploads/2018/07/Source-Code-M%C3%A3-ngu%E1%BB%93n-l%C3%A0-g%C3%AC.png)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Cách giải quyết

  ![alt text](https://res.cloudinary.com/drdoqfhly/image/upload/v1530887094/gg-1_synrgy.jpg)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Cách giải quyết

  Tạo 1 base code:
   - Đơn giản
   - Dễ hiểu
   - Đúng vấn đề
   - Có thể tái sử dụng
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Các bước cần làm &lt;/h3&gt;
  &lt;ol&gt;
    &lt;li&gt;Tìm hiểu bài toán&lt;/li&gt;
    &lt;li&gt;Cấu trúc database&lt;/li&gt;
    &lt;li&gt;Khởi tạo model&lt;/li&gt;
    &lt;li&gt;Xây dựng form checkbox&lt;/li&gt;
    &lt;li&gt;Lưu trữ dữ liệu&lt;/li&gt;
    &lt;li&gt;Lấy giá trị&lt;/li&gt;
  &lt;/ol&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Tìm hiểu bài toán

  ![problem](https://fluidsurveys.com/wp-content/uploads/2009/11/56.png)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Cấu trúc database

  ![Select multi categories db](/assets/images/multi-categories-db.png)
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Khởi tạo model &lt;/h3&gt;

  &lt;pre style=&quot;width: 100%;&quot;&gt;
  &lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # frozen_string_literal: true
    class User &amp;lt; ApplicationRecord
      has_many :users_categories, foreign_key: :user_id, dependent: :destroy
    end
	&lt;/code&gt;&lt;/pre&gt;

  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # frozen_string_literal: true
    class Category &amp;lt; ApplicationRecord
      has_many :users_categories, foreign_key: :category_id,
        dependent: :destroy
    end
	&lt;/code&gt;&lt;/pre&gt;

  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # frozen_string_literal: true
    class UsersCategory &amp;lt; ApplicationRecord
      belongs_to :user, foreign_key: :user_id
      belongs_to :category, class_name: Category.name
    end
	&lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Xây dựng form checkbox

  Yêu cầu:
  1. Generate form checkbox với dữ liệu category
  2. Khi lựa chọn vào &quot;other content&quot; sẽ xuất hiện input để nhập dữ liệu
  3. Trả lại đúng data khi validate sai
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Xây dựng form checkbox

  #### 1. Generate form checkbox với dữ liệu category

  Sử dụng nested attributes:
    - accepts_nested_attributes_for
    - fields_for
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Xây dựng form checkbox

  #### 1. Generate form checkbox với dữ liệu category

  - Thêm đoạn dưới vào model user:
    ```
    accepts_nested_attributes_for :users_categories, allow_destroy: true
    ```
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt;  Xây dựng form checkbox &lt;/h3&gt;
   &lt;h4&gt; 1. Generate form checkbox với dữ liệu category&lt;/h4&gt;
  - Trong users_controller/new tiến hành build giá trị cho users_categories:
    &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    def new
      @user = User.new
      @category_options =
        Category.all.map do |category|
          UsersCategory.new category: category, user: @user
        end
    end
    &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt;  Xây dựng form checkbox &lt;/h3&gt;
  &lt;h4&gt; 1. Generate form checkbox với dữ liệu category&lt;/h4&gt;
  Hiển thị dữ liệu trên view với fields_for:
  &lt;br /&gt;
  fields_for(record_name, record_object = nil, options = {}, &amp;amp;block)
  &lt;br /&gt;
  check_box(object_name, method, options = {}, checked_value = &quot;1&quot;, unchecked_value = &quot;0&quot;)
  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
&amp;lt;%= form_for @user do |f| %&amp;gt;
  &amp;lt;%= f.object.errors.full_messages %&amp;gt;
  username: &amp;lt;%= f.text_field :name %&amp;gt;
  categories:
    &amp;lt;%= f.fields_for :users_categories, @category_options do |ff| %&amp;gt;
      &amp;lt;% category_option = ff.object %&amp;gt;
      &amp;lt;%= ff.check_box :_destroy, {}, checked_value: &quot;0&quot;, unchecked_value: &quot;1&quot; %&amp;gt;
      &amp;lt;%= ff.hidden_field :category_id %&amp;gt;
      &amp;lt;%= category_option.content %&amp;gt;
    &amp;lt;% end %&amp;gt;
  &amp;lt;%= f.submit %&amp;gt;
&amp;lt;% end %&amp;gt;
    &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ###  Xây dựng form checkbox

  #### 1. Generate form checkbox với dữ liệu category

  ```
  &amp;lt;%= ff.check_box :_destroy, {}, checked_value: &quot;0&quot;, unchecked_value: &quot;1&quot; %&amp;gt;
  ```
  - Mặc định `check_box` sẽ để `checked_value` = 1 và `unchecked_value` = 0. Nhưng trong trường hợp này những giá trị được checked sẽ đại diện cho `_destroy` có nghĩa là những checkbox nào được tích sẽ bị xóa.
  - Vì thế nên chúng ta sẽ đổi lại giá trị mặc định `checked_value: &quot;0&quot;` và `unchecked_value: &quot;1&quot;` để giữ lại những `user_categories` được tick.
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Xây dựng form checkbox

  #### 1. Generate form checkbox với dữ liệu category

  - Kết quả:
    ![Select multi categories db](/assets/images/select-multi-categories-form-checkbox.png)
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt;  Xây dựng form checkbox &lt;/h3&gt;
   &lt;h4&gt; 2. Khi lựa chọn vào &quot;other content&quot; sẽ xuất hiện input để nhập dữ liệu &lt;/h4&gt;
   &lt;p&gt; - Ý tưởng: Đối với category có key_name = &quot;other_content&quot; sẽ generate ra input và ẩn đi, khi người dùng click vào `other_content` sẽ show và hide &lt;/p&gt;
      &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
&amp;lt;%= form_for @user do |f| %&amp;gt;
  &amp;lt;%= f.object.errors.full_messages %&amp;gt;
  username: &amp;lt;%= f.text_field :name %&amp;gt;
  categories:
    &amp;lt;%= f.fields_for :users_categories, @category_options do |ff| %&amp;gt;
      &amp;lt;% users_categories = f.object.users_categories %&amp;gt;
      &amp;lt;% category_option = ff.object %&amp;gt;
        &amp;lt;%= ff.check_box :_destroy, {}, 0, 1 %&amp;gt;
        &amp;lt;%= ff.hidden_field :category_id %&amp;gt;
        &amp;lt;%= category_option.content %&amp;gt;

        # Thêm đoạn
        &amp;lt;% if category_option.key_name == &quot;other_content&quot; %&amp;gt;
          &amp;lt;%= ff.text_field :other_content, value: other_content,class: &quot;js-other_content-field hidden&quot; %&amp;gt;
        &amp;lt;% end %&amp;gt;

    &amp;lt;% end %&amp;gt;
  &amp;lt;%= f.submit %&amp;gt;
&amp;lt;% end %&amp;gt;
    &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt;  Xây dựng form checkbox &lt;/h3&gt;
   &lt;h4&gt; 2. Khi lựa chọn vào &quot;other content&quot; sẽ xuất hiện input để nhập dữ liệu &lt;/h4&gt;
   &lt;p&gt; - Xử lý một chút JS đơn giản: &lt;/p&gt;
      &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
  $(function() {
    # Xử lý với trường hợp người dùng click vào `other_category`
    $('.js-select-other_content').change(function () {
      var self = $(this),
          otherContent = $('.js-other_content-field');
      if (self.is(':checked')) {
        otherContent.removeClass('hidden');
      } else {
        otherContent.addClass('hidden');
      }
    });
  });
    &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Xây dựng form checkbox

  #### 2. Khi lựa chọn vào &quot;other content&quot; sẽ xuất hiện input để nhập dữ liệu

  - Kết quả:
    ![Select multi categories db](/assets/images/select-multi-categories-click-other.gif)
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lưu trữ dữ liệu
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lưu trữ dữ liệu

  - Permit data
  - Validate
  - Điền data cũ vào form nếu validate sai
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lưu trữ dữ liệu &lt;/h3&gt;
  &lt;p&gt; 1.Permit data &lt;/p&gt;
  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
  def user_params
    params.require(:user).permit(
      :name,
      users_categories_attributes: [:id, :category_id, :other_content, :_destroy]
    )
  end
    &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lưu trữ dữ liệu &lt;/h3&gt;
  &lt;p&gt; 2. Validate &lt;/p&gt;
  - số lượng category tối thiểu&lt;br /&gt;
  - validate nội dung của &quot;other content&quot; khi chọn checkbox này
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lưu trữ dữ liệu &lt;/h3&gt;
  &lt;p&gt; 2. Validate &lt;/p&gt;
  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # user.rb
MIN_SIZE = 1
# Validate số lượng tối thiểu categories
validates :users_categories, length: {minimum: MIN_SIZE}
  &lt;/code&gt;&lt;/pre&gt;

  Hoặc sử dụng custom validate:
    &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
      # user.rb
### Validate số lượng tối thiểu categories
MIN_SIZE = 1
validate :validate_users_categories

private
def validate_users_categories
  errors.add(:users_categories, :minsize) if(users_categories.size &amp;lt; MIN_SIZE)
end
  &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lưu trữ dữ liệu &lt;/h3&gt;
  &lt;p&gt; 2. Validate &lt;/p&gt;
  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # users_category.rb
# Validate nội dung khi chọn &quot;other_content&quot;
validates :other_content, presence: true, if: lambda { key_name == &quot;other_content&quot;}
  &lt;/code&gt;&lt;/pre&gt;
  Hoặc sử dụng custom validate:
    &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # users_category.rb
    # Validate nội dung khi chọn &quot;other_content&quot;
    validate :validate_other_content
    private
    def validate_other_content
      errors.add(:other_content, :blank) if(key_name == OTHER_CONTENT &amp;amp;&amp;amp; other_content.blank?)
    end
  &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lưu trữ dữ liệu

  #### 3. Điền giá trị cũ vào form nếu validate sai

  Có 2 trường hợp cần xử lý:
    - Checkbox
    - Nội dung của &quot;other content&quot; nếu người dùng lựa chọn ô này.
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lưu trữ dữ liệu

  #### 3. Điền giá trị cũ vào form nếu validate sai

  - Checkbox
    Ý tưởng: Khi submit dữ liệu lên controller, @user đã được gán giá trị khi &quot;@user = User.new user_params&quot;. Khi này, object @user đã được khởi tạo và có association.
    ![Select multi categories db](/assets/images/select-ml-ct-object-user.png)
  - Đây chính là những checkbox đã được checked
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lưu trữ dữ liệu &lt;/h3&gt;
  &lt;h4&gt; 3. Điền giá trị cũ vào form nếu validate sai &lt;/h4&gt;

  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
    # new.html.rb
    &amp;lt;%= form_for @user do |f| %&amp;gt;
      &amp;lt;%= f.object.errors.full_messages %&amp;gt;
      username: &amp;lt;%= f.text_field :name %&amp;gt;
      categories:
        &amp;lt;%= f.fields_for :users_categories, @category_options do |ff| %&amp;gt;
          &amp;lt;% users_categories = f.object.users_categories %&amp;gt;
          &amp;lt;% category_option = ff.object %&amp;gt;
          # Tìm kiếm users_categories có chứa category_option hiện tại hay không
          &amp;lt;% is_selected = users_categories.map{|c| c.key_name}.include?(category_option.key_name) %&amp;gt;
          # Lấy giá trị của &quot;Other content&quot;
          &amp;lt;% other_content = users_categories.select{|c| c.key_name == &quot;other_content&quot;}.first&amp;amp;.other_content %&amp;gt;
            &amp;lt;%= ff.check_box :_destroy, {checked: is_selected, class: &quot;#{'js-select-other_content' if category_option.key_name == 'other_content'}&quot;}, 0, 1 %&amp;gt;
            &amp;lt;%= ff.hidden_field :category_id %&amp;gt;
            &amp;lt;%= category_option.content %&amp;gt;
            &amp;lt;% if category_option.key_name == &quot;other_content&quot; %&amp;gt;
              &amp;lt;%= ff.text_field :other_content, value: other_content,class: &quot;js-other_content-field hidden&quot; %&amp;gt;
            &amp;lt;% end %&amp;gt;
        &amp;lt;% end %&amp;gt;
      &amp;lt;%= f.submit %&amp;gt;
    &amp;lt;% end %&amp;gt;
  &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lấy giá trị
  Có 2 trường hợp:
    - Nếu user_category có key_name không phải &quot;other content&quot; thì sẽ lấy giá trị &quot;content&quot; từ bảng &quot;category&quot;
    - Nếu users_category có key_name là &quot;other_content&quot; sẽ tiến hành lấy &quot;other_content&quot; từ trong bảng users_category
&lt;/section&gt;

&lt;section style=&quot;text-align: left;&quot;&gt;
  &lt;h3&gt; Lấy giá trị &lt;/h3&gt;
  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
  # users_category.rb
  def category_name
    key_name == OTHER_CONTENT ? other_content : content
  end
  &lt;/code&gt;&lt;/pre&gt;

  &lt;pre style=&quot;width: 100%;&quot;&gt;&lt;code data-trim=&quot;&quot; data-noescape=&quot;&quot;&gt;
  # user.rb
  def show
    @user = User.find params[:id]
    @categories = @user.users_categories.map{|c| c.category_name}.join(&quot; ,&quot;)
  end
  &lt;/code&gt;&lt;/pre&gt;
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Trường hợp edit

  - Đối với trường hợp edit, khi chúng ta chạy đoạn:

  ```
is_selected = users_categories.map{|c| c.category_key_name}.include?(category_option.category_key_name)
  ```

  thì sẽ phải thực hiện truy vấn thông qua database để lấy lại association. Khi đó khi chúng ta cập nhật thay đổi giá trị cho ô select, ô đó sẽ luôn là giá trị cũ
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ![Select multi categories db](/assets/images/1.png)

&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ![Select multi categories db](/assets/images/2.png)

&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ![Select multi categories db](/assets/images/3.png)

&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Edit | Ý tưởng

  - Khi submit params lên chúng ta sẽ lọc được những params có category đã được chọn
  - Lọc và trả lại những id đó

  ```
  @selected_ids =
    users_categories_attributes.values.map {|c| c[:category_id] if c[:_destroy] == &quot;0&quot;}.compact
  ```

  - Kết quả: Mảng các categories đã selected. Ví dụ: [&quot;1&quot;, &quot;2&quot;]

&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Edit | Ý tưởng

  - Edit một chút trong view:

  ```
    selected_ids = @selected_ids ||
    users_categories.map{|c| c.category_id.to_s}
  ```

  ```
  is_selected = selected_ids.include?(category_option.category_id.to_s)
  ```

  - Kết quả: Mảng các categories đã selected. Ví dụ: [&quot;1&quot;, &quot;2&quot;]
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### Lưu ý

  - Khi cập nhật dữ liệu cần phải permit id của nested params để tránh tình trạng tạo thêm bản ghi mới giống bản ghi cũ.

  - Trong file edit.html.slim thêm hidden_field cho id của users_category.

  ```
  &amp;lt;%= ff.hidden_field :id, value: users_categories.select{|c| c.key_name == category.key_name}.first&amp;amp;.id %&amp;gt;
  ```

  - Về bản chất neseted_attributes đã hỗ trợ tự điền id vào form nested nhưng trong trường hợp này giá trị của nested form được build ra không phải là giá trị trong quan hệ mà là giá trị của object `@category_options` chúng ta truyền vào nên cần phải lọc ra như trên.
  - Vị trí của categories: Thông thường vị trí của trường `other_content` sẽ là ở cuối danh sách. Nhưng không hẳn master data nào cũng chuẩn hoặc category được sinh tự động. Có một mẹo là chúng ta sẽ luôn để `other_content` ở đầu tiên của mảng (bản ghi đầu tiên) và dùng hàm `rotate(1)` để dịch bản ghi đó xuống cuối mảng

  ```
  a = [ &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot; ]
  a.rotate         #=&amp;gt; [&quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;a&quot;]
  ```

  - Tìm hiểu kĩ design để khi import master
&lt;/section&gt;

&lt;section data-markdown=&quot;&quot; style=&quot;text-align: left;&quot;&gt;

  ### End.

  #### Cảm ơn mọi người đã lắng nghe!

&lt;/section&gt;
</description>
        <pubDate>Sat, 14 Dec 2019 00:00:00 +0000</pubDate>
        <link>/2019/12/14/select-multy-categories/</link>
        <guid isPermaLink="true">/2019/12/14/select-multy-categories/</guid>
      </item>
    
      <item>
        <title>SQL WHERE vs HAVING</title>
        <description>&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Where : Là câu lệnh điều kiện trả kết quả đối chiếu với từng dòng .
Having : Là câu lệnh điều kiện trả kết quả đối chiếu cho nhóm (Sum,AVG,COUNT,…)

Vì vậy mà sau GROUP BY thì sẽ chỉ dùng được Having .
còn Where thì KHÔNG dùng được sau GROUP BY.

(HAVING có thể thay thế vị trí dùng cho WHERE. nhưng . ngược lại WHERE thì KHÔNG thể thay thế vị trí cho HAVING )

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 29 Nov 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/11/29/where-vs-having/</link>
        <guid isPermaLink="true">/technical/2019/11/29/where-vs-having/</guid>
      </item>
    
      <item>
        <title>Restful webservice</title>
        <description>&lt;p&gt;&lt;em&gt;Rest là gì ?&lt;/em&gt;
Vậy REST là gì?&lt;/p&gt;

&lt;p&gt;REST là viết tắt của Representational State Transfer&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;là một kiểu kiến trúc lập trình, nó định nghĩa các quy tắc để thiết kết các web service chú trọng vào tài nguyên hệ thống.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Trong kiến trúc REST mọi thứ đều được coi là tài nguyên, chúng có thể là: tệp văn bản, ảnh, trang html, video, hoặc dữ liệu động… REST server cung cấp quyền truy cập vào các tài nguyên, REST client truy cập và thay đổi các tài nguyên đó. Ở đây các tài nguyên được định danh dựa vào URI, REST sử dụng một vài đại diện để biểu diễn các tài nguyên như văn bản, JSON, XML.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Để tạo một tài nguyên trên server ta dùng phương thức POST.&lt;/li&gt;
  &lt;li&gt;Để lấy(đọc) tài nguyên trên server ta dùng phương thức GET.&lt;/li&gt;
  &lt;li&gt;Để update tài nguyên trên server ta dùng phương thức PUT.&lt;/li&gt;
  &lt;li&gt;Để xóa tài nguyển trên server ta dùng phương thức DELETE.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;PUT VS PATH&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;PUT (UPDATE): Cập nhật thông tin cho Resource.&lt;/li&gt;
  &lt;li&gt;PATCH (UPDATE): Cập nhật một thành phần, thuộc tính của Resource.&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 29 Nov 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/11/29/resful-web-service/</link>
        <guid isPermaLink="true">/technical/2019/11/29/resful-web-service/</guid>
      </item>
    
      <item>
        <title>Multi dynamic nested attributes trong rails</title>
        <description>&lt;p&gt;Chào mọi người, không như những bài trước mình đi từ lí thuyết tới thực hành mà bài viết này mình sẽ đưa ra một bài toán cụ thể mà chúng ta thường gặp phải để giải quyết.&lt;/p&gt;

&lt;h4 id=&quot;bài-toán&quot;&gt;Bài toán:&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;p&gt;Hệ thống của chúng ta muốn tạo bài test trong đó có thể tùy ý thay đổi số lượng câu hỏi, trong mỗi câu hỏi sẽ có thể tùy ý thay đổi số lượng câu trả lời tương ứng.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Sau một hồi research và nghe ngóng anh em thì mình đã được đưa ra một giải pháp là sử dụng nested attributes + kết hợp sử dụng gem &lt;a href=&quot;https://github.com/nathanvda/cocoon&quot;&gt;Cocoon&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Để giải quyết bài toán đề ra, chúng ta cần tìm hiểu một số vấn đề:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Nested attributes là gì ? Và cách sử dụng&lt;/li&gt;
  &lt;li&gt;Gem cocoon là gì và tại sao sử dụng&lt;/li&gt;
  &lt;li&gt;Áp dụng sử dụng cho bài toán multi nested attributes&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1-nested-attributes-là-gì-&quot;&gt;1. Nested attributes là gì ?&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html&quot;&gt;Nested attributes&lt;/a&gt; cho phép bạn lưu những thuộc tính của các bản ghi liên quan thông qua các bản ghi cha mẹ. Mặc định trong rails nested attributes được tắt và bạn có thể bật nó lên bằng lệnh &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;accepts_nested_attributes_for&lt;/code&gt; trong model.&lt;/p&gt;

&lt;h4 id=&quot;11-cách-khai-báo&quot;&gt;1.1 Cách khai báo&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Quan hệ one-to-one&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;accepts_nested_attributes_for :attribute_name&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ví dụ mỗi user có một avatar, trong model user ta khai báo:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class User &amp;lt; ActiveRecord::Base
  has_one :avatar
  accepts_nested_attributes_for :avatar
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Khi kích hoạt nested attributes trong liên kết one-to-one cho phép bạn tạo User và Avatar trong một lần:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;params = { user: { name: 'Jack', avatar_attributes: { icon: 'avatar_default' } } }
user = User.create(params[:user])
user.avatar.id # =&amp;gt; 2
user.avatar.icon # =&amp;gt; 'avatar_default'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Tương tự khi update&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;params = { user: { avatar_attributes: { id: '2', icon: 'sad' } } }
user.update params[:user]
user.avatar.icon # =&amp;gt; 'sad'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Quan hệ one-to-many&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;accepts_nested_attributes_for :attribute_names&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Ví dụ ta có mỗi user có nhiều bài posts:&lt;/p&gt;

&lt;p&gt;Ta tiến hành khai báo trong model:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class User &amp;lt; ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ví dụ params khi tạo user đồng thời tạo luôn bài posts:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;params = { user: {
  name: 'joe', posts_attributes: [
    { title: 'Kari, the awesome Ruby documentation browser!' },
    { title: 'The egalitarian assumption of the modern citizen' }
  ]
}}

user = User.create(params[:user])
user.posts.length # =&amp;gt; 2
user.posts.first.title # =&amp;gt; 'Kari, the awesome Ruby documentation browser!'
user.posts.second.title # =&amp;gt; 'The egalitarian assumption of the modern citizen'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h4 id=&quot;12-instance-public-methods&quot;&gt;1.2 Instance Public methods&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:allow_destroy&lt;/code&gt;
Với option này, các thành phần của params gửi lên gửi kèm giá trị với key &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_destroy&lt;/code&gt; và value à &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt; sẽ bị xóa.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;member.avatar_attributes = { id: '2', _destroy: '1' }
member.avatar.marked_for_destruction? # =&amp;gt; true
member.save
member.reload.avatar # =&amp;gt; nil
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ở ví dụ trên, avatar với id = 2 đã được xóa thành công.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:reject_if&lt;/code&gt;
Với option này. Rails cho phép bạn sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Proc&lt;/code&gt; hoặc &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symbol&lt;/code&gt; để trỏ đến một phương thức để kiểm tra xem giá trị của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attributes&lt;/code&gt; có thỏa mãn hay không.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ví dụ sử dụng proc:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Member &amp;lt; ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, reject_if: proc { |attributes| attributes['title'].blank? }
end

params = { member: {
  name: 'joe', posts_attributes: [
    { title: 'Kari, the awesome Ruby documentation browser!' },
    { title: 'The egalitarian assumption of the modern citizen' },
    { title: '' } # bản ghi này sẽ k đc lưu do không thỏa mãn điều kiện được định nghĩa trên `:reject_if`
  ]
}}
member = Member.create(params[:member])
member.posts.length # =&amp;gt; 2
member.posts.first.title # =&amp;gt; 'Kari, the awesome Ruby documentation browser!'
member.posts.second.title # =&amp;gt; 'The egalitarian assumption of the modern citizen'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ví dụ sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Symbol&lt;/code&gt; để khai báo hàm cần thực thi của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:reject_if&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Member &amp;lt; ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, reject_if: :new_record?
end

class Member &amp;lt; ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, reject_if: :reject_posts

  def reject_posts(attributes)
    attributes['title'].blank?
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:limit&lt;/code&gt;
Option này cho phép bạn chỉ định số lượng bản ghi liên quan tối đa có thể được xử lý.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Member &amp;lt; ActiveRecord::Base
  has_many :posts
  accepts_nested_attributes_for :posts, limit: 4
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:update_only&lt;/code&gt;
Đối với quan hệ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;one-to-one&lt;/code&gt;, option này cho phép bạn chỉ định cách xử lý đối với trường hợp bản ghi liên kết đã tồn tại. Thông thường, một bàn ghi tồn tại có thể được cập nhật giá bằng cách cập nhật giá trị mới cho nó hoặc chính nó được thay thế bằng bản ghi mới với giá trị cần cập nhật.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Mặc định thì &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;update_only&lt;/code&gt; là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;false&lt;/code&gt; và nested attributes được sử dụng để cập nhật vào bản ghi nếu bản ghi đó tồn tại &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt;. Nếu không thì một bản ghi mới sẽ được khởi tạo để thay thế bản ghi hiện có. Tuy nhiên, nếu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:update_only&lt;/code&gt; option là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt;, nested attributess sẽ luôn được sử dụng để cập nhật các giá trị của bản ghi nếu thuộc tính &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:id&lt;/code&gt; đó đang tồn tại.&lt;/p&gt;

&lt;p&gt;*tips: khi sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;update_only: true&lt;/code&gt;, bạn có thể cập nhật giá trị cho bản ghi con mà không cần thiết phải truyền &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt; lên trong params.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Member &amp;lt; ActiveRecord::Base
  has_one :avatar
  accepts_nested_attributes_for :avatar, update_only: true
end

params = { member: { avatar_attributes: { icon: 'sad' } } }
member.update params[:member]
member.avatar.id # =&amp;gt; 2
member.avatar.icon # =&amp;gt; 'sad'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;2gem-cocoon-là-gì-và-tại-sao-sử-dụng-&quot;&gt;2.Gem cocoon là gì và tại sao sử dụng ?&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;Cocoon makes it easier to handle nested forms.&lt;/p&gt;

  &lt;p&gt;Nested forms are forms that handle nested models and attributes in one form; e.g. a project with its tasks or an invoice with its line items.&lt;/p&gt;

  &lt;p&gt;Cocoon is form builder-agnostic, so it works with standard Rails, Formtastic, or SimpleForm. It is compatible with rails 3, 4 and 5.&lt;/p&gt;

  &lt;p&gt;This project is not related to Apache Cocoon.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Hiểu đơn giản, Gem &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoon&lt;/code&gt; cũng như các gem khác của rails đều sinh ra để đáp ứng một nhu cầu cụ thể để có thể tối ưu và sử dụng lại. Ở đây, gem cocoon giúp người dùng có thể dễ dàng tương tác với nested forrms(form lồng nhau) thay vì phải ngồi viết những thứ js dài dòng để build ra form với attributes tương ứng (lazy time)&lt;/p&gt;

&lt;h4 id=&quot;21-cài-đặt&quot;&gt;2.1 Cài đặt&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;Thêm &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gem &quot;concoon&quot;&lt;/code&gt; vào &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; và chạy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; để update gem của bạn.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Đối với rails 5, thêm dòng dưới vào file &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;application.js&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;//= require cocoon&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;22-cocoon-helper-functions&quot;&gt;2.2 Cocoon helper functions&lt;/h4&gt;
&lt;p&gt;Cocoon định nghĩa 2 helper functions:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/nathanvda/cocoon#link_to_add_association&quot;&gt;link_to_add_association&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/nathanvda/cocoon#link_to_remove_association&quot;&gt;link_to_remove_association&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;221-link_to_add_association&quot;&gt;2.2.1 link_to_add_association&lt;/h5&gt;

&lt;p&gt;Hàm này thêm một liên kết vào phần hiển thị của bạn, khi click vào liên kết sẽ tự động sinh ra một partial form đã được chúng ta định nghĩa sẵn.&lt;/p&gt;

&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;= form_for @project do |f|
  .field
    = f.label :name_badge:
  %h3 Tasks
  #tasks
    = f.fields_for :tasks do |task|
      = render 'task_fields', f: task
    .links
      = link_to_add_association 'add task', f, :tasks
  = f.submit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Chúng ta cần khai báo thêm partial form với tên: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_task_fields&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; .nested-fields
  .field
    = f.label :description
    %br
    = f.text_field :description
  .field
    = f.check_box :done
    = f.label :done
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;= link_to_add_association 'add task', f, :tasks&lt;/code&gt; sẽ tạo ra 1 thẻ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a&lt;/code&gt;, khi ta click vào thẻ này, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoon&lt;/code&gt; sẽ tự động giúp chúng ta tạo ra một form &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;task_field&lt;/code&gt; mới với giá trị &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id&lt;/code&gt; được build tự động, giúp chúng ta dễ dàng hơn trong việc sử dụng nested form.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images.viblo.asia/bfe044cc-df93-488f-8690-a5349c26b382.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to_add_association&lt;/code&gt; gồm 4 tham số:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;name: text sẽ hiển thị của link&lt;/li&gt;
  &lt;li&gt;f: form builder&lt;/li&gt;
  &lt;li&gt;association: tên của association (phải là số nhiều) - đối tượng mới cần được thêm vào.&lt;/li&gt;
  &lt;li&gt;html_options: là mở rộng của html-options (&lt;a href=&quot;https://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to&quot;&gt;link_to&lt;/a&gt;). Và thêm một số tùy chỉnh đặc biệt của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoon&lt;/code&gt;:
    &lt;ul&gt;
      &lt;li&gt;data-association-insertion-traversal : phuơng thức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jquery traversal&lt;/code&gt; cho phép lựa chọn vị trí của partial khi được render. Có 3 option: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closest&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;next&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;children&lt;/code&gt;.&lt;/li&gt;
      &lt;li&gt;data-association-insertion-node : Có thể hiểu đây là node mà field sẽ được chèn vào sau sự kiện clcik vào &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to_add_association&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;data-association-insertion-method : quy định cách chèn field. Các option tương tự như jquery như:  before, after, append, prepend, etc. Mặc định sẽ là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;before&lt;/code&gt;.&lt;/li&gt;
      &lt;li&gt;data-association-insertion-position : phương thức cũ quy định nơi chèn dữ liệu mới( Hàm này sẽ được xóa trong version mới nên có lẽ không nên dùng các bác ạ :)) )&lt;/li&gt;
      &lt;li&gt;partial: tên của partial sẽ được sử dụng.&lt;/li&gt;
      &lt;li&gt;render_options: các tùy chọn chuyển qua form-builder.&lt;/li&gt;
      &lt;li&gt;wrap_object: một Proc sẽ cho phép bọc đối tượng của bạn, đặc biệt hữu ích nếu bạn đang sử dụng decorator (gem draper)&lt;/li&gt;
      &lt;li&gt;form_name : tên của tham số form truyền vào nested partial. Mặc định là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;f&lt;/code&gt;.&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;count:  số lượng mặc định nested items được chèn vào mỗi lần. Mặc định là 1.&lt;/p&gt;

        &lt;p&gt;Ví dụ: Bạn muốn chèn field partial vào một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;div#parent&lt;/code&gt; nhất định, các partial sẽ nối tiếp nhau, mỗi lần nhấn vào link sẽ tạo ra 3 partial mới. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to_add_association&lt;/code&gt; sẽ có dạng:&lt;/p&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  = link_to_add_association &quot;add node&quot;, f, :questions,
    data: {&quot;association-insertion-node&quot;: &quot;#parent_table&quot;,
    &quot;association-insertion-method&quot;: &quot;append&quot;}, count: 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;render_options:  Bên trong &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;html_options&lt;/code&gt; bạn có thể thêm tùy chọn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:render_option&lt;/code&gt;và hàm băm chứa sẽ được chuyển xuống trình tạo biểu mẫu cho biểu mẫu được chèn.&lt;/p&gt;

        &lt;p&gt;Ví dụ:
   Khi dùng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;simple_fields_for&lt;/code&gt; cần option &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wrapper: 'inline'&lt;/code&gt; ta sẽ làm tương tự:&lt;/p&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   = link_to_add_association 'add something', f, :something,
       render_options: { wrapper: 'inline' }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;

        &lt;p&gt;Hoặc muốn truyền biến xuống p&lt;/p&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   = link_to_add_association 'add something', f, :something,
       render_options: {locals: { sherlock: 'Holmes' }}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;partial: Để định nghĩa là partial mặc định.
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    = link_to_add_association 'add something', f, :something,
    partial: 'shared/something_fields'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;wrap_object: Nếu bạn sử dụng decorator, khởi tạo bình thường của đối tượng liên quan sẽ không đủ. Bạn thực sự muốn tạo ra các đối tượng đã được decorate.&lt;/p&gt;

        &lt;p&gt;Ví dụ:&lt;/p&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    = link_to_add_association('add something', @form_obj, :comments,
        wrap_object: Proc.new {|comment| CommentDecorator.new(comment) })
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;

        &lt;p&gt;Hoặc có thể sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:wrap_object&lt;/code&gt; để truyền thêm biến đã được xử lý xuống partial:&lt;/p&gt;
        &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; = link_to_add_association('add something', @form_obj, :comments,
   wrap_object: Proc.new { |comment| comment.name = current_user.name; comment })
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;        &lt;/div&gt;
        &lt;h5 id=&quot;222-link_to_remove_association&quot;&gt;2.2.2 link_to_remove_association&lt;/h5&gt;
        &lt;p&gt;Hàm này sẽ thêm 1 link vào phần hiển thị của bạn, khi click sẽ loại bỏ partial đó.&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Thành phần chính:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;name: text hiển thị tên nút, sử dụng tương tự như &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;f: đối tượng form hiện tại&lt;/li&gt;
  &lt;li&gt;html_options: tương tự html_options của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3-áp-dụng-sử-dụng-cho-bài-toán-multi-nested-attributes&quot;&gt;3. Áp dụng sử dụng cho bài toán multi nested attributes&lt;/h3&gt;
&lt;p&gt;Với bài toán multi nested (nhiều form lồng), chúng ta cần nắm rõ để có thể sử dụng linh hoạt gem &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cocoon&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Trong trường hợp này mình sẽ đưa ra một ví dụ cụ thể:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Khi tạo 1 bài kiểm tra(exam) chúng ta cần tạo luôn các câu hỏi(question) và câu trả lời (answer) cho bài kiểm tra này.&lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;Khởi tạo các model:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exam.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# frozen_string_literal: true

class Exam &amp;lt; ApplicationRecord
  has_many :questions

  accepts_nested_attributes_for :questions, allow_destroy: true, reject_if: :all_blank
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;question.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# frozen_string_literal: true

class Question &amp;lt; ApplicationRecord
  belongs_to :exam

  has_many :answers

  accepts_nested_attributes_for :answers, allow_destroy: true, reject_if: :all_blank
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;answer.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# frozen_string_literal: true

class Answer &amp;lt; ApplicationRecord
  belongs_to :question
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exams_controller.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def new
  @exam = Exam.new
  @exam.questions.build
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tiếp đó trong view:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exams/new.html.slim&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;= form_for @exam, url: exams_url do |f|
 .form-group.row
      label.col-md-3.form-control-label.text-primary.font-weight-bold Exam description
      #parent_table.col-md-9
        = f.fields_for :questions do |question|
      .js-new-question.ml-5
        = link_to_add_association f, :questions do
          span.fa.fa-plus
          span.ml-2 Add question
    = f.submit t(&quot;.save&quot;),class: &quot;btn btn-primary my-2&quot;

javascript:
  $(document).ready(function() {
    $(&quot;.js-new-question a.add_fields&quot;).
      data(&quot;association-insertion-method&quot;, 'append').
      data(&quot;association-insertion-node&quot;, '#parent_table');
  });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tiếp theo trong &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_question_fields.html.slim&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.container-fluid.nested-fields
  .line
  .form-group.row
    .col-11
      = f.text_area :content, class: &quot;form-control&quot;
    .col-1
      = link_to_remove_association f do
        span.fa.fa-minus-square title=&quot;Remove question&quot;
    .question.col-md-9
      = link_to_add_association f, :answers, class: &quot;btn btn-info btn-sm mt-2&quot; do # chúng ta sẽ tiến hành khai báo để  tạo partial `answer` bên trong mỗi question.
        span.fa.fa-plus-circle
        span.ml-2 Add answer
      = f.fields_for :answers do |answer|
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cuối cùng là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;answer_fields.html.slim&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.col-6
  .row.pt-2
    .col-10
      = f.text_field :content, class: &quot;form-control&quot;
    .col-1
      = link_to_remove_association f do
        span.fa.fa-minus-square title=&quot;Remove question&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;*Ở trên mình dùng slim và một số class bootstrap 4 cho code của mình, chú ý: phần data đã được di chuyển ra bên ngoài form và để trong đoạn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;javascript&lt;/code&gt; do khi chúng ta tạo ra nhiều form lồng, ta cần định nghĩa class cha của chúng (ở đây mình định nghĩa là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;js-new-question&lt;/code&gt;) để khi oncick vào &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;link_to_remove_association&lt;/code&gt; *&lt;/p&gt;

&lt;p&gt;Demo:
&lt;img src=&quot;https://images.viblo.asia/792519e2-fe73-42c6-9124-b2c09b329ea8.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Tham khảo:&lt;/p&gt;

&lt;p&gt;https://github.com/nathanvda/cocoon#link_to_remove_association
https://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html&lt;/p&gt;
</description>
        <pubDate>Tue, 12 Nov 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/11/12/multi-nested-fields-rails/</link>
        <guid isPermaLink="true">/technical/2019/11/12/multi-nested-fields-rails/</guid>
      </item>
    
      <item>
        <title>Rails 6 - Active Storage changes</title>
        <description>&lt;p&gt;This article found in: https://blog.saeloun.com/2019/11/04/rails-6-active-storage-updates.html&lt;/p&gt;

&lt;p&gt;Active Storage was introduced in Rails 5.2. In rails 6, the are enhancements (nâng cao) done to Active Storage.&lt;/p&gt;

&lt;p&gt;Let’s explore them.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;mini_magick replaced by image_processing gem&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;In rails 5.2, Active Storage was using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mini_magick&lt;/code&gt; to handle (xử lý) image resizing(variants) (Kích thước)&lt;/p&gt;

&lt;p&gt;In rails 6, a new gem called &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image_processing&lt;/code&gt; is used by default to handle image variants
(Trong rails 6, gem &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image_processing&lt;/code&gt; được sử dụng làm mặc định để xử lý việc thay đổi kích thước ảnh)&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;image_processing&lt;/code&gt; gem has below advantages(Lợi thế):&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;New methods #resize_to_fit, #resize_to_fill, etc also sharpens the thumbnail (làm sắc nét hình ảnh) after resizing.&lt;/li&gt;
  &lt;li&gt;It fixes the image orientation automatically (tự động sử đổi hướng hình ảnh).&lt;/li&gt;
  &lt;li&gt;It provides another backend libvips that has significantly better performance than (Hiệu suất tốt hơn đáng kể) ImageMagick. With ImageMagick, resizing and sharpening (thay đổi kích cỡ và làm nét) a 1600x900 image to 800x800 is 1.87x slower, and to 300x300 is 1.18x slower. On libvips it doesn’t go above 1.20x slower, on average (trung bình) it’s only about 1.10x slower.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;New image variants support&lt;/strong&gt; (Hỗ trợ biến thể hình ảnh mới)
With addition (việc thêm) of image_processing gem, support for new image variants BMP (PR), TIFF (PR) and progressive JPEG (PR) was introduced (đã được giới thiệu).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Fix for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;has_many_attached&lt;/code&gt; field in update query&lt;/strong&gt;
Let’s say we have a User class and it has field images. Users can upload multiple images to their profiles. So we add has_many_attached method to User class as shown below&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class User &amp;lt; ApplicationRecord
  has_many_attached :images
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Before Rails 6:&lt;/em&gt;
We attach (đính kèm)) an image to the user as shown below and verify the count&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;user = User.first
user.images.attach(filename: &quot;profile_pic.jpg&quot;)

user.images.count
=&amp;gt; 1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now, when we update the image field, the new image was getting appended to the existing images collection.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;blog = ActiveStorage::Blob.create_after_upload!(filename: &quot;updated_pic.jpg&quot;)
user.update(images: [blog])

user.images.count
=&amp;gt; 2
user.images.first.filename
=&amp;gt; &quot;profile_pic.jpg&quot;
user.images.last.filename
=&amp;gt; &quot;updated_pic.jpg&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is not consistent (Không thích hợp) with ActiveRecord update, where it replaces the existing value of a record.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;In rails 6:&lt;/em&gt;
update query replaces the existing collection instead of appending to the collection.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;user.images.attach(filename: &quot;profile_pic.jpg&quot;)

user.images.count
=&amp;gt; 1

blog = ActiveStorage::Blob.create_after_upload!(filename: &quot;updated_pic.jpg&quot;)
user.update(images: [blog])

user.images.count
=&amp;gt; 1
user.images.first.filename
=&amp;gt; &quot;updated_pic.jpg&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;We can append files by using the attach function.&lt;/p&gt;
</description>
        <pubDate>Tue, 12 Nov 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/11/12/rails-6-active-storage-changes/</link>
        <guid isPermaLink="true">/technical/2019/11/12/rails-6-active-storage-changes/</guid>
      </item>
    
      <item>
        <title>Sử dụng scopes trong Ruby on Rails</title>
        <description>&lt;p&gt;This article found in: https://www.rubyguides.com/2019/10/scopes-in-ruby-on-rails/&lt;/p&gt;

&lt;p&gt;Let’s begin!&lt;/p&gt;

&lt;p&gt;What is scope in Rails &amp;amp; why is it useful (hữu ích) ?&lt;/p&gt;

&lt;p&gt;Well…&lt;/p&gt;

&lt;p&gt;Scopes are custom queries (Truy vấn tùy chỉnh) that you define inside (bên trong) your Rails models with the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Every scope takes two arguments:&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;A name, which you use to call this scope in your code&lt;/li&gt;
  &lt;li&gt;A lambda, which implements the query&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;It looks like this (trông như):&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Fruit &amp;lt; ApplicationRecord
  scope :with_juice, -&amp;gt; { where(&quot;juice &amp;gt; 0&quot;) }
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As a result of calling a scope, you’ll get an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ActiveRecord::Relation&lt;/code&gt; object.
(Kết quả khi sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt;, bạn sẽ nhận được một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ActiveRecord::Relation&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;Which means you can chain &amp;amp; combine scopes!
(Điều đó có nghĩa rằng bạn có thể kết hợp các scope lại với nhau)&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Fruit.with_juice.with_round_shape.first(3)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now:&lt;/p&gt;

&lt;p&gt;There’s more to learn about Rails scopes, so let’s keep exploring the topic.
(Phần mở rộng)&lt;/p&gt;

&lt;h3 id=&quot;when-to-use-scope--khi-nào-sử-dụng-scope-&quot;&gt;When to use scope ? (Khi nào sử dụng scope ?)&lt;/h3&gt;
&lt;p&gt;Ok, scopes are cool, but when should you use them?&lt;/p&gt;

&lt;p&gt;Let’s see an example.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def index
  @books = Book.where(&quot;LENGTH(title) &amp;gt; 20&quot;)
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is an index controller action that wants to display books with titles longer than 20 characters.
(Trong action index trên muốn hiển thị những đối tượng books mà title có độ dài &amp;gt; 20 kí tự)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;It’s fine.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;But if you want to use this query in other places, you’re going to have duplicated code.
(Nhưng nếu bạn muốn sử dụng lại câu truy vấn trên ở nơi khác, bajnn sẽ lặp lại code)&lt;/p&gt;

&lt;p&gt;Duplicated code makes your project harder to maintain.
(Lặp lại code khiến dự án của bạn khó khăn cho maintain)&lt;/p&gt;

&lt;p&gt;Let’s move this query into a scope.
(Hãy di chuyển những câu truy vấn đó vào scope)&lt;/p&gt;

&lt;p&gt;Like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Book
  scope :with_long_title, -&amp;gt; { where(&quot;LENGTH(title) &amp;gt; 20&quot;) }
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now our controller action looks like this:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def index
  @books = Book.with_long_title
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;how-to-use-rails-scopes-with-arguments-sử-dụng-scope-với-đối-số&quot;&gt;How to Use Rails Scopes With Arguments (Sử dụng scope với đối số)&lt;/h3&gt;
&lt;p&gt;You may want to introduce a variable into a scope so you can make it more flexible.
(Bạn có thể muốn khai báo &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;biến&lt;/code&gt; trong scope để có thể khiến scope trở nên linh hoạt hơn)&lt;/p&gt;

&lt;p&gt;Here’s how:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Book
  scope :with_long_title, -&amp;gt;(length) { where(&quot;LENGTH(title) &amp;gt; ?&quot;, length) }
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The question mark (?) is a placeholder, it’ll be replaced by the value of length. This makes your code safer.
(Dấu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?&lt;/code&gt; là một phần trống, nó sẽ được thay bằng giá trị của chiều dài tức biến truyền vào. Nó làm cho code trở nên an toàn hơn))&lt;/p&gt;

&lt;p&gt;If you want a default value:
(Khi cần khai báo giá trị mặc định của biến truyền vào:)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Book
  scope :with_long_title, -&amp;gt;(length = 20) { where(&quot;LENGTH(title) &amp;gt; ?&quot;, length) }
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Give it a try!
(Hãy thử dùng nó)&lt;/p&gt;

&lt;h3 id=&quot;scope-vs-instance-method-so-sánh-scope-và-hàm-instance&quot;&gt;Scope vs Instance Method (So sánh scope và hàm instance)&lt;/h3&gt;
&lt;p&gt;Scopes aren’t doing anything magical or super special.
(Scope không làm bất cứ điều gì kỳ diệu hoặc siêu đặc biệt)&lt;/p&gt;

&lt;p&gt;They are just methods.
(Chúng chỉ là methods)&lt;/p&gt;

&lt;p&gt;In fact… You could do the same thing using class methods!
(Bạn có thể làm tương tự bằng các sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class methods&lt;/code&gt;)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Fruit
  def self.with_juice
    where(&quot;juice &amp;gt; 0&quot;)
  end
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But there are design advantages to using scopes over class methods.
(Nhưng có những lợi ích về mặt design để dử dụng scopes hơn là sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class method&lt;/code&gt;)&lt;/p&gt;

&lt;p&gt;Here’s why:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Scopes result in cleaner code because of their syntax
(Scopes trông sạch sẽ hơn vì cú pháp đơn giản của nó)&lt;/li&gt;
  &lt;li&gt;Scopes are used for exactly one thing, so you know what you get the moment you see one
(Scope được sử dụng chính xác cho một mục đích, vì vậy bạn có thể biết ngay mục đích của scope đó ngay khi bạn đọc)&lt;/li&gt;
  &lt;li&gt;Scopes aren’t mixed with other methods, so they’re easier to spot
(Scope không trộn lẫn với các &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;methods&lt;/code&gt; khác, vì thế nó dễ dàng có thể được phát hiện ra trong code)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In terms of functionality, the only difference is that scopes guarantee an ActiveRecord::Relation, and class methods don’t.
(Về mặt chức năng, điều khác biệt duy nhất mà scope bảo đảm đó chính là trả về một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ActiveRecord::Relation&lt;/code&gt; mà &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class methods&lt;/code&gt; thì không.)&lt;/p&gt;

&lt;p&gt;This helps you avoid errors when your scope returns nothing.
(Điều đó giuos tránh được lỗi khi &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scope&lt;/code&gt; không trả về  kết quả)&lt;/p&gt;

&lt;h3 id=&quot;dont-use-default-scopes-không-sử-dụng-default-scope&quot;&gt;Don’t Use Default Scopes (Không sử dụng default scope)&lt;/h3&gt;
&lt;p&gt;A default scope is one which is automatically applied to your model.
(Default scope là scope luôn được áp dụng cho model khi khởi tạo)&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class Post
  default_scope { where(published: true) }
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Default scopes are so attractive(hấp dẫn).
But they’re often the wrong choice (Lựa chọn sai) because you’ll probably forget (có thể quên) you have them defined, run into strange errors (chạy vào những lỗi lạ), and waste precious time (lãng phí thời gian quý báu) debugging.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;With that said…&lt;/strong&gt; (Khắc phục khi sử dụng default scope)
If you have to work with default scopes, you may need to use the unscoped method to disable all currently applied scopes.&lt;/p&gt;
</description>
        <pubDate>Tue, 12 Nov 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/11/12/how-to-use-scopes-in-ruby-on-rails/</link>
        <guid isPermaLink="true">/technical/2019/11/12/how-to-use-scopes-in-ruby-on-rails/</guid>
      </item>
    
      <item>
        <title>Ruby inject vs each_with_object</title>
        <description>&lt;p&gt;Có thể bạn đã nghe qua hoặc đã dùng thử với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; nhưng chưa thực sự hiểu sâu về chúng mà chỉ đọc qua guide về cách sử dụng căn bản. Hôm nay chúng ta sẽ đi sâu tìm hiểu để có một cái nhìn sâu hơn về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; thông qua các ví dụ trực quan.&lt;/p&gt;

&lt;h3 id=&quot;inject&quot;&gt;inject&lt;/h3&gt;
&lt;p&gt;Định nghĩa trên trang  &lt;a href=&quot;https://apidock.com/rails/Enumerable/inject&quot;&gt;apidock&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;inject(p1 = v1, p2 = v2)&lt;/p&gt;

  &lt;p&gt;Combines all elements of enum by applying a binary operation, specified by a block or a symbol that names a method or operator.&lt;/p&gt;

&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Tốt hơn cho các hoạt động trên các đối tượng/collections có thể thay đổi giá trị và trả về một giá trị mới&lt;/li&gt;
  &lt;li&gt;Tốt cho các đối tượng nguyên thủy và các đối tượng mà trả về giá trị mới khi thay đổi.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;each_with_object&quot;&gt;each_with_object&lt;/h3&gt;
&lt;p&gt;Định nghĩa trên trang  &lt;a href=&quot;https://apidock.com/rails/Enumerable/each_with_object&quot;&gt;apidock&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;each_with_object(memo) public&lt;/p&gt;

  &lt;p&gt;Iterates over a collection, passing the current element and the memo to the block. Handy for building up hashes or reducing collections down to one object.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;Tốt hơn cho các hoạt động có thể thay đổi trên các đối tượng như là Hash hoặc Array&lt;/li&gt;
  &lt;li&gt;Khi sử dụng chúng ta cần cung cấp một đối tượng mới để bắt đầu và sử dụng đối tượng nó. Và dĩ nhiên sẽ không hữu dụng nếu bạn muốn sửa đổi trên 1 đối tượng hiện tại.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Bây giờ chúng ta sẽ cùng nhau đi vào ví dụ để làm rõ những luận điểm trên!&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;vd1&quot;&gt;VD1:&lt;/h3&gt;
&lt;p&gt;Hãy chú ý tới các ví dụ khác nhau. Tưởng tượng bạn có một tập hợp các đối tượng và bạn muốn tạo ra một &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hash&lt;/code&gt; sử dụng chúng và thực hiện một số loại ánh xạ khác nhau.&lt;/p&gt;

&lt;p&gt;Cùng tìm hiểu vấn đề:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Bạn muốn xây dựng một đối tượng mới (Hash `lower_to_upper)&lt;/li&gt;
  &lt;li&gt;Bắt đầu với hash trống &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Trong trường hợp này, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; rất tiện lợi:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lower = 'a'..'z'
lower_to_upper = lower.each_with_object({}) do |char, hash|
  hash[char] = char.upcase
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cùng xem sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; nhưng có vẻ không tiện lợi bằng việc sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lower = 'a'..'z'
lower_to_upper = lower.inject({}) do |hash, char|
  hash[char] = char.upcase
  hash
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nguyên nhân vì &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; yêu cầu giá trị để ghi nhớ cho block trong các lần sử dungj tiếp theo (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hash&lt;/code&gt; được khởi tạo với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt;) được trả về sau mỗi lần lặp qua &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;block&lt;/code&gt;. Vì vậy mặc dù bạn liên tục hoạt động trên cùng một đối tượng, bạn luôn cần nó được trả về ở cuối của khối.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; mặt khác luôn gọi khối có cùng một đối tượng ban đầu được truyền làm đối số đầu tiên cho method.&lt;/p&gt;

&lt;h3 id=&quot;vd2&quot;&gt;VD2&lt;/h3&gt;
&lt;p&gt;Nhưng với trường hợp bạn đã có một đối tượng hiện để thay đổi. Trong trường hợp như vậy, thông thường bạn nên sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each&lt;/code&gt; thay vì &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; nhưng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; có thể ngắn hơn một chút nếu bạn vẫn cần trả về đối tượng đã thay đổi.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Sử dụng each:&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mapping = {'ż' =&amp;gt; 'Ż', 'ó' =&amp;gt; 'Ó'}
lower = 'a'..'z'
lower.each do |char|
  mapping[char] = char.upcase
end
return mapping # optionally
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;em&gt;Sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt;:&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mapping = {'ż' =&amp;gt; 'Ż', 'ó' =&amp;gt; 'Ó'}
lower = 'a'..'z'
lower.each_with_object(mapping) do |char, hash|
  hash[char] = char.upcase
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mapping = {'ż' =&amp;gt; 'Ż', 'ó' =&amp;gt; 'Ó'}
lower = 'a'..'z'
lower.each_with_object(mapping) do |char|
  mapping[char] = char.upcase
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nhấn mạnh ở đây &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each&lt;/code&gt; sẽ tốt hơn nếu bạn muốn thay đổi một tập hợp hiện có, bởi vì thông thường bạn không cần phải &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;return&lt;/code&gt;. Sau cùng, bất cứ khi nào đối tượng làm đối số, cho dù xuất phát từ đâu, có thể vẫn đang có đối tượng tham chiếu đến đối tượng này.&lt;/p&gt;

&lt;h3 id=&quot;vd3&quot;&gt;VD3&lt;/h3&gt;
&lt;p&gt;Trong ví dụ tiếp theo sẽ không thay đổi trạng thái bên trong của đối tượng mà luôn tạo ra một đối tượng mới. Pháp tóan sử dụng sẽ luôn trả về một đối tượng mới.&lt;/p&gt;

&lt;p&gt;Ví dụ đơn giản nhất là toán tử &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; số.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;a = 1
b = 2

a.frozen?
# =&amp;gt; true
b.frozen?
# =&amp;gt; true

c = a + b
# =&amp;gt; 3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Không có cách nào để thay đổi đối tượng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;integer&lt;/code&gt; được tham chiếu bởi biến a thành 3. ĐIều duy nhất có thể làm là gán một đối tượng khác cho biến a hoặc bằn b hoặc c.&lt;/p&gt;

&lt;p&gt;Tiếp theo là một ví dụ rõ ràng hơn:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;require 'date'
d = Date.new(2017, 10, 10)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nếu bạn muốn một ngày khác, bạn không thể thay đổi instance &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Date&lt;/code&gt; hiện tại. Bạn cần tạo một instance mới.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;d.day=12
# =&amp;gt; NoMethodError: undefined method `day=' for #&amp;lt;Date:

e = Date.new(2017, 10, 12)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hey, sau một vài ví dụ đơn giản chúng ta đã phần nào hiểu được chúng ta có gì khi làm chủ được &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; nếu bạn có một đối tượng bất biến, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; là sự lựa chọn hoàn hảo.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;(5..10).inject(:+)
(5..10).inject(0, :+)
(5..10).inject{|sum, n| sum + n }

(5..10).inject(1, :*)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hoặc:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;starting_date = Date.new(2019,10,20)
result = [1, 10].inject(starting_date) do |date, delay|
  date + delay
end
# =&amp;gt; Date.new(2017,10,31)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;vd4&quot;&gt;VD4&lt;/h3&gt;
&lt;p&gt;Làn này chúng ta sẽ tạo một đối tượng mới môi lần nhưng không phải vì có thể thay đổi trạng thái bên trong mà bởi vì phương thức đó nhất định sẽ trả về một đối tượng mới.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;result = [
 {1 =&amp;gt; 2},
 {2 =&amp;gt; 3},
 {3 =&amp;gt; 4},
 {1 =&amp;gt; 5},
].inject(:merge)
# =&amp;gt; {1=&amp;gt;5, 2=&amp;gt;3, 3=&amp;gt;4}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Hash#merge&lt;/code&gt; gộp hai hashes và trả về hash mới. Điều đó giải thích vì sao chúng ta có thể dễ dàng sử dụng với &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt;
Sẽ ngắn gọn hơn so với:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[
 {1 =&amp;gt; 2},
 {2 =&amp;gt; 3},
 {3 =&amp;gt; 4},
 {1 =&amp;gt; 5},
].each_with_object({}) {|element, hash| hash.merge!(element) }
# =&amp;gt; {1=&amp;gt;5, 2=&amp;gt;3, 3=&amp;gt;4}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Funny&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Có một điều lạ là các phần tử truyền vào block của &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt; đảo ngược nhau.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lower_to_upper = lower.each_with_object({}) do |char, `hash`|
  hash[char] = char.upcase
end

lower_to_upper = lower.inject({}) do |`hash`, char|
  hash[char] = char.upcase
  hash
end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Hi vọng sau bài này các bạn có thể hiểu thêm về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;inject&lt;/code&gt; và &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;each_with_object&lt;/code&gt;. Chúc các bạn một ngày vui vẻ :D&lt;/p&gt;

&lt;p&gt;Nguồn: https://blog.arkency.com/inject-vs-each-with-object/&lt;/p&gt;
</description>
        <pubDate>Mon, 09 Sep 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/09/09/ruby-inject-vs-each_with_object/</link>
        <guid isPermaLink="true">/technical/2019/09/09/ruby-inject-vs-each_with_object/</guid>
      </item>
    
      <item>
        <title>Learn SQL advanced</title>
        <description>&lt;p&gt;The first thing i want tell about the first link i found from google. It make by qoura. Fine, i like it: https://www.quora.com/How-do-I-learn-more-advanced-SQL&lt;/p&gt;

&lt;p&gt;Firstly i want learn SQL from basic, because maybe i’m a beginer in every thing. Of course, i dont like this. But some day, when i joined my project, i know i am a chicken. So, if i’m not a bigger, i will be a person.&lt;/p&gt;

&lt;p&gt;First ez query:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT * FROM Customers;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This query will select all record with all attributes of Customers.&lt;/p&gt;

&lt;h3 id=&quot;select-distinct&quot;&gt;SELECT DISTINCT&lt;/h3&gt;
&lt;p&gt;The SQL select distinct statement is used to return only distinct(diffirent) values.
Inside a table, a column often contains many duplicate values, and sometimes you only want to list the different (distinct) value.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Syntax:&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT DISTINCT column1, column2,..
FROM table_name;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT DISTINCT Country FROM Customers;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This query will have result all different Country of customer.&lt;/p&gt;

&lt;h3 id=&quot;where-clause&quot;&gt;WHERE Clause&lt;/h3&gt;
&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;where&lt;/code&gt; clause is used to filter records.
The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;where&lt;/code&gt; clause is used to extract only those records that fulfill a specified condition (Đáp ứng một điều kiện cụ thể).
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Syntax:&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT column1, column2
FROM table_name
WHERE condition;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This query will return the records of column1 and column2 with condition is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;condition&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;###&lt;/p&gt;

&lt;h3 id=&quot;sql-order-by&quot;&gt;SQL ORDER BY&lt;/h3&gt;
&lt;p&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;order by&lt;/code&gt; key word is used to sort the result-set in ascending or desending order.
In the default, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;order by&lt;/code&gt; will sort the records in ascending order by default. To sort records &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;desending&lt;/code&gt;, use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DESC&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT column1, column2, ...
FROM table_name
ORDER BY column1, column2, ... ASC|DESC;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;insert-into&quot;&gt;INSERT INTO&lt;/h3&gt;
&lt;p&gt;Used to insert new records in table.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ex:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;INSERT INTO Customers (CustomerName, ContactName, Address, City, PostalCode, Country)
VALUES ('Cardinal', 'Tom B. Erichsen', 'Skagen 21', 'Stavanger', '4006', 'Norway');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;sql-null-value&quot;&gt;SQL NULL VALUE&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;What is null value?&lt;/em&gt;
A field wit null value is field with no vale.&lt;/p&gt;

&lt;p&gt;IS NULL syntax&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT column_names
FROM table_name
WHERE column_name IS NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;IS NOT NULL syntax&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SELECT column_names
FROM table_name
WHERE column_name IS NOT NULL;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 09 Sep 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/09/09/sql-advanced/</link>
        <guid isPermaLink="true">/technical/2019/09/09/sql-advanced/</guid>
      </item>
    
      <item>
        <title>Những tricks khi học JSX</title>
        <description>&lt;ul&gt;
  &lt;li&gt;Nội dung bài viết xoay quanh khóa học trên &lt;a href=&quot;https://www.codecademy.com/courses/react-101/lessons/react-jsx-advanced/exercises/self-closing-tags?action=resume_content_item&quot;&gt;Codecademy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;class-vs-classname&quot;&gt;class vs className&lt;/h3&gt;
&lt;p&gt;Trong HTML, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; thường được sử dụng để đặt tên cho thuộc tính của đối tượng&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;h1 class=&quot;big&quot;&amp;gt;Hey&amp;lt;/h1&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Trong JSX, chúng ta không thể sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; mà phải sử dụng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;className&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;h1 className=&quot;big&quot;&amp;gt;Hey&amp;lt;/h1&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is because JSX gets translated into (được định dạng sang) JavaScript, and class is a reserved word (danh từ riêng) in JavaScript. Khi JSX rendered (được biểu diễn) JSX &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;className&lt;/code&gt; attributes (thuộc tính) are automatically rendered as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class&lt;/code&gt; attributes.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import React from 'react';
import ReactDOM from 'react-dom';

// Write code here:
const myDiv = (
	&amp;lt;div className=&quot;big&quot;&amp;gt;
    I AM A BIG DIV
  &amp;lt;/div&amp;gt;
)

ReactDOM.render(myDiv, document.getElementById('app'))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;self-closing-tags&quot;&gt;Self-Closing Tags&lt;/h3&gt;
&lt;p&gt;Another JSX ‘gotcha’ (Một bất ngờ của JSX) involves (liên quan) self-closing tags (các thẻ tự động đóng).&lt;/p&gt;

&lt;p&gt;What’s a self-closing tag?&lt;/p&gt;

&lt;p&gt;Most (phần lớn) HTML elements(thành phần) use two tags: an opening tag (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;div&amp;gt;&lt;/code&gt;), and a closing tag (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;/div&amp;gt;&lt;/code&gt;). However, some HTML elements such as (như là) &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;img&amp;gt;&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;input&amp;gt;&lt;/code&gt; use only one tag. The tag that belongs to(thuộc về) a single-tag element isn’t an opening tag nor a closing tag; it’s a self-closing tag.&lt;/p&gt;

&lt;p&gt;When you write a self-closing tag in HTML, it is optional to include a forward-slash (dấu gạch chéo) immediately before (ngay trước) the final angle-bracket (dấu ngoặc nhọn cuối cùng):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Fine in HTML with a slash:

  &amp;lt;br /&amp;gt;

Also fine, without the slash:

  &amp;lt;br&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But!&lt;/p&gt;

&lt;p&gt;In JSX, you have to include (phải bao gồm) the slash (dấu gạch chéo). If you write a self-closing tag in JSX and forget the slash (quên dấu gạch chéo), you will raise (nhận) an error:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Fine in JSX:

  &amp;lt;br /&amp;gt;

NOT FINE AT ALL in JSX:

  &amp;lt;br&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;curly-braces-dấu-ngoặc-nhọn-in-jsx&quot;&gt;Curly Braces (Dấu ngoặc nhọn) in JSX&lt;/h3&gt;

&lt;p&gt;Any code in between (nằm giữa) the tags of a JSX element will be read as JSX (đọc dưới dạng JSX), not as regular (cú pháp) JavaScript! JSX doesn’t add numbers - it reads them as text, just like HTML.&lt;/p&gt;

&lt;p&gt;You need a way to write code that says, “Even though I am located in between JSX tags, treat me like ordinary JavaScript and not like JSX.”&lt;/p&gt;

&lt;p&gt;You can do this by wrapping (đóng gói) your code in curly braces (dấu ngoặc nhọn).&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# 5
&amp;lt;h1&amp;gt;{2 + 3}&amp;lt;/h1&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;variables-biến-in-jsx&quot;&gt;Variables (biến) in JSX&lt;/h3&gt;

&lt;p&gt;When you inject (đưa) JavaScript into JSX, that JavaScript is part of the same environment (một phần của môi trường tương ứng) as the rest (phần còn lại) of the JavaScript in your file.&lt;/p&gt;

&lt;p&gt;That means that you can access (truy cập) variables while inside (trong khi bên trong) of a JSX expression, even if those (ngay cả khi) variables were declared (được khai báo) on the outside.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Declare a variable:
const name = 'Gerdo';

// Access your variable
// from inside of a JSX expression:
const greeting = &amp;lt;p&amp;gt;Hello, {name}!&amp;lt;/p&amp;gt;;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;variable-attributes-các-thuộc-tính-biến-in-jsx&quot;&gt;Variable Attributes (các thuộc tính biến) in JSX&lt;/h3&gt;

&lt;p&gt;When writing JSX, it’s common to use variables (các biến) to set attributes (các thuộc tính).&lt;/p&gt;

&lt;p&gt;Here’s an example of how that might work (cách nó hoạt động):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;// Use a variable to set the `height` and `width` attributes:

const sideLength = &quot;200px&quot;;

const panda = (
  &amp;lt;img
    src=&quot;images/panda.jpg&quot;
    alt=&quot;panda&quot;
    height={sideLength}
    width={sideLength} /&amp;gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice how in this example, the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;img /&amp;gt;&lt;/code&gt;‘s attributes each get their own line. This can make your code more readable (dễ đọc) if you have a lot of attributes (có nhiều thuộc tính) on one element (thành phần).&lt;/p&gt;

&lt;p&gt;Object properties (thuộc tính đối tượng) are also often used to set attributes (đặt thuộc tính):&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;const pics = {
  panda: &quot;http://bit.ly/1Tqltv5&quot;,
  owl: &quot;http://bit.ly/1XGtkM3&quot;,
  owlCat: &quot;http://bit.ly/1Upbczi&quot;
};

const panda = (
  &amp;lt;img
    src={pics.panda}
    alt=&quot;Lazy Panda&quot; /&amp;gt;
);

const owl = (
  &amp;lt;img
    src={pics.owl}
    alt=&quot;Unimpressed Owl&quot; /&amp;gt;
);

const owlCat = (
  &amp;lt;img
    src={pics.owlCat}
    alt=&quot;Ghastly Abomination&quot; /&amp;gt;
);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;event-sự-kiện-listeners--lắng-nghe-in-jsx&quot;&gt;Event (sự kiện) Listeners  (lắng nghe) in JSX&lt;/h3&gt;
&lt;p&gt;https://www.codecademy.com/courses/react-101/lessons/react-jsx-advanced/exercises/jsx-event-listeners?action=resume_content_item&lt;/p&gt;

&lt;p&gt;JSX elements (các phần tử ) can have event listeners (sự kiện lắng nghe), just like HTML elements can. Programming (lập trình) in React means constantly working (liên tục làm việc) with event listeners.&lt;/p&gt;

&lt;p&gt;You create an event listener by giving a (cung cấp) JSX element a special attribute (thuộc tính đặc biệt). Here’s an example:&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;img onClick={myFunc} /&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;An event listener attribute’s name should be something like onClick or onMouseOver: the word on, plus the type of event that you’re listening for. You can see a list of valid event names here.&lt;/p&gt;

&lt;p&gt;An event listener attribute’s value should be a function. The above example would only work if myFunc were a valid function that had been defined elsewhere:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;function myFunc() {
  alert('Make myFunc the pFunc... omg that was horrible i am so sorry');
}

&amp;lt;img onClick={myFunc} /&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that in HTML, event listener names are written in all lowercase, such as onclick or onmouseover. In JSX, event listener names are written in camelCase, such as onClick or onMouseOver.&lt;/p&gt;
</description>
        <pubDate>Tue, 27 Aug 2019 00:00:00 +0000</pubDate>
        <link>/technical/2019/08/27/reactjs-jsx/</link>
        <guid isPermaLink="true">/technical/2019/08/27/reactjs-jsx/</guid>
      </item>
    
      <item>
        <title>Những điều thú vị khi làm project mới</title>
        <description>&lt;h2 id=&quot;những-điều-thú-vị&quot;&gt;Những điều thú vị&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;From 1/7/2019&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;regex-tìm-mọi-khoảng-trắng-unicode-tiếng-anh-và-tiếng-nhật&quot;&gt;Regex tìm mọi khoảng trắng unicode tiếng Anh và tiếng Nhật&lt;/h3&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/[[:space:]]|\s+/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sử dụng gem ransack để tìm kiếm với full_name&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  ransacker :full_name,
    formatter: proc { |v|
      v.gsub(/[[:space:]]|\s+/, &quot;&quot;)
    } do |parent|
    Arel::Nodes::NamedFunction.new(&quot;CONCAT_WS&quot;,
      [
        Arel::Nodes::SqlLiteral.new('&quot;&quot;'),
        parent.table[:last_name], parent.table[:first_name]
      ])
  end
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Change author in commit&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git filter-branch --commit-filter '
        if [ &quot;$GIT_COMMITTER_NAME&quot; = &quot;&amp;lt;hungnv950&amp;gt;&quot; ];
        then
                GIT_COMMITTER_NAME=&quot;&amp;lt;hungbnv-1225&amp;gt;&quot;;
                GIT_AUTHOR_NAME=&quot;&amp;lt;hungbnv-1225&amp;gt;&quot;;
                GIT_COMMITTER_EMAIL=&quot;&amp;lt;nguyen.van.hungb@sun-asterisk.com&amp;gt;&quot;;
                GIT_AUTHOR_EMAIL=&quot;&amp;lt;nguyen.van.hungb@sun-asterisk.com&amp;gt;&quot;;
                git commit-tree &quot;$@&quot;;
        else
                git commit-tree &quot;$@&quot;;
        fi' HEAD
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  scope :wait_admin_approve, lambda {
    candidate = Candidate.arel_table
    flu = Influencer.arel_table
    left_joins(:influencer).where(candidate[:status].eq(&quot;applied&quot;).and(flu[:company_id].eq(nil)).or(
                                    candidate[:status].eq(&quot;office_approved&quot;).and(flu[:company_id].not_eq(nil))
                                  ))
  }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Cách kế thừa 1 gem: Viết theo thứ tự đúng của module đó trong cây thư mục sẽ có thể kế thừa và overide.&lt;/li&gt;
  &lt;li&gt;Nhớ include trong extension.rb&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 25 Jun 2019 22:48:45 +0000</pubDate>
        <link>/technical/2019/06/25/from-third-project/</link>
        <guid isPermaLink="true">/technical/2019/06/25/from-third-project/</guid>
      </item>
    
      <item>
        <title>Sử dụng nhiều tài khoản github trên cùng một máy tính cá nhân</title>
        <description>&lt;h3 id=&quot;step-1-tạo-ssh-key-mới-cho-tài-khoản-công-việc&quot;&gt;Step 1: Tạo ssh key mới cho tài khoản công việc&lt;/h3&gt;
&lt;blockquote&gt;
  &lt;p&gt;ssh-keygen -t rsa -C “github-email-address”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Khi màn hình hiện &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Enter file in which to save the key (/home/&amp;lt;user&amp;gt;/.ssh/id_rsa):&lt;/code&gt;  Nhập user cho công việc của bạn, ví dụ mình sẽ nhập là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;id_rsa_sun&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Kiểm tra xem id_rsa_sun đã được sinh ra chưa.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;cd cd ~/.ssh&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ls&lt;/p&gt;

  &lt;p&gt;Danh sách các file đã được sinh ra:&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;id_rsa_sun  id_rsa_sun.pub  id_rsa  id_rsa.pub
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;step-2-cài-đặt-ssh-key-trên-github&quot;&gt;Step 2: Cài đặt ssh key trên github&lt;/h3&gt;

&lt;p&gt;Lấy id_rsa của email mới bạn vừa tạo.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;cat id_rsa_sun.pub&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Sau đó nhập vào ssh-key cuả tài khoản git công việc tại https://github.com/settings/keys&lt;/p&gt;

&lt;h3 id=&quot;bước-3-cài-đặt-github-host&quot;&gt;Bước 3: Cài đặt Github Host&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;touch ~/.ssh/config&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;nano ~/.ssh/config&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Sửa file config của bạn thành dạng:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Tài khoản git cá nhân vẫn dùng của bạn
Host github.com-username
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa
# Tài khoản công việc
Host github.com-sun # config này sẽ dùng để xử lý xác định khi cấu hình remote
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_sun  # id_rsa_sun mà chúng ta vừa tạo
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Sau khi tạo 1 project trên github với tài khoản khác. Khi bạn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;add remote&lt;/code&gt; nên chú ý user khi add.
Ví dụ khi clone repo mới:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;git clone git@github.com-sun:&amp;lt;&lt;strong&gt;user&lt;/strong&gt;&amp;gt;/sample_ruby.git&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;git config user.email “&amp;lt;&lt;strong&gt;emai dùng để sinh id_rsa_sun ở trên&lt;/strong&gt;&amp;gt;”&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Sau đó bạn có thể add và commit bình thường.&lt;/p&gt;

&lt;p&gt;Add remote với repo mới:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;git remote add origin git@github.com-sun:&amp;lt;&lt;strong&gt;user&lt;/strong&gt;&amp;gt;/sample_ruby.git&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Note: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sun&lt;/code&gt; ở đây là user của mình đặt ra, các bạn có thể thay đổi theo user công việc hoặc nick name bạn muốn cho phù hợp.&lt;/p&gt;

&lt;h3 id=&quot;nguồn-git-push--pull-with-two-different-accounts-and-two-different-users-on-the-same-machine&quot;&gt;Nguồn: &lt;a href=&quot;https://medium.com/@therajanmaurya/git-push-pull-with-two-different-account-and-two-different-user-on-same-machine-a85f9ee7ec61&quot;&gt;Git Push &amp;amp; Pull with Two different accounts and Two different users on the same machine&lt;/a&gt;&lt;/h3&gt;
</description>
        <pubDate>Tue, 25 Jun 2019 22:48:45 +0000</pubDate>
        <link>/technical/2019/06/25/su-dung-nhieu-tai-khoan-github-tren-cung-mot-may-tinh-ca-nhan/</link>
        <guid isPermaLink="true">/technical/2019/06/25/su-dung-nhieu-tai-khoan-github-tren-cung-mot-may-tinh-ca-nhan/</guid>
      </item>
    
      <item>
        <title>Cha đã quên</title>
        <description>&lt;p&gt;&lt;strong&gt;Cha đã quên&lt;/strong&gt; - một câu chuyện ngắn của tác giả &lt;em&gt;W.Livingston Larned&lt;/em&gt; trích từ cuốn (&lt;strong&gt;Đắc Nhân Tâm&lt;/strong&gt; - &lt;em&gt;Dale Carnegie&lt;/em&gt;)&lt;/p&gt;

&lt;p&gt;Con trai yêu quý, con hãy nghe những lời ân hận của cha đây. Cha đã lẻn vào phòng con khi con đang chìm vào giấc ngủ trẻ thơ. Nhìn kìa, một tay con đặt dưới gò má, những lọn tóc hung đẫm mồ hôi bám chặt vào vầng trán ẩm ướt. Chỉ cách đây vài phút thôi, khi cha ngồi trong phòng đọc sách và xem lại bài viết của mình, nỗi hối hận dâng ngập hồn cha. Và cha đã chạy đến phòng con để nói lời xin lỗi.&lt;/p&gt;

&lt;p&gt;Con ơi, cha đã tức giận, quát mắng khi con cầm khăn lau mặt qua quýt trong lúc thay quần áo đi học, lúc con để đôi giày dơ bẩn hay thấy con vứt vật dụng lung tung trong nhà. Cha luôn chăm chăm nhìn thấy toàn là lỗi lầm của con. Buổi sáng cha thấy con không ngăn nắp khi ngủ dậy, lại còn ăn uống vội vàng và lấy một lúc quá nhiều thức ăn vào đĩa. Vì chỉ nhìn thấy lỗi lầm nên khi con chào cha xin phép ra ngoài chơi, cha chỉ cau mày và trả lời cộc lốc không chút thiện cảm: “Hừm! Liệu mà về sớm đấy!”.&lt;/p&gt;

&lt;p&gt;Buổi chiều, cha cũng tức giận với những sơ suất của con. Khi thấy đôi vớ của con rách, cha đã làm con phải mất mặt trước bạn bè khi lôi con về nhà. Con thật sự đã làm cha rất giận dữ vì đã không tiết kiệm, không chịu giữ gìn những món đồ mà cha đã phải vất vả làm việc dành dụm mua cho con.&lt;/p&gt;

&lt;p&gt;Khi cha đang đọc báo, con rụt rè bước tới ngước nhìn cha với ánh mắt ngây thơ trong sáng, cha lại quát lên: “Mày muốn cái gì?”. Và trái tim cha đã xúc động biết dường nào khi con chỉ im lặng chạy đến, vòng tay bé bỏng ôm cổ cha thật chặt với tất cả yêu thương trìu mến rồi lại chạy biến thật nhanh ra ngoài.&lt;/p&gt;

&lt;p&gt;Con thương yêu!&lt;/p&gt;

&lt;p&gt;Con có biết không, tờ báo đã rời khỏi tay cha trong yên lặng và một nỗi sợ lẫn đau xót ngẹn ngào xâm chiếm cõi lòng cha. Cha đã làm gì thế này? Cha đã biến mình thành một người cha suốt ngày chỉ xăm soi tội lỗi của con mình. Một người cha chỉ toàn kiếm cái xấu của con mình để chê trách và đây là phần thưởng mà cha dành cho con như một đứa trẻ ư? Cha chỉ muốn con phải thế này thế nọ, cha chỉ muốn con phải cư xử như người lớn. Cha đã đo con bằng cây thước dành cho một người trưởng thành, bằng cả những năm tháng tuổi đời và sự trải nghiệm già dặn của cha.&lt;/p&gt;

&lt;p&gt;Con yêu của cha!&lt;/p&gt;

&lt;p&gt;Trong khi cha nhìn con bằng đôi mắt già cỗi và muộn phiền, đầy thành kiến, soi mói ấy, cha chẳng thèm biết đến những cái tốt, điều hay và sự chân thành, hồn nhiên trong tư chất của con. Trái tim nhỏ bé của con nồng ấm và to lớn như ánh rạng đông đang tặng bao tia nắng ấm cho ngọn đồi bao la. Con đã hồn nhiên lao vào hôn chúc cha ngủ ngon mà không hề vướng bận việc cha đã la mắng con cả ngày và hằn học với con vì những lý do không chính đáng.&lt;/p&gt;

&lt;p&gt;Con thương yêu!&lt;/p&gt;

&lt;p&gt;Cha không thể đợi thêm nữa. Cha phải nhanh chóng bước đến bên con, quỳ xuống cạnh chiếc giường nhỏ bé và nhìn khuôn mặt thơ ngây của con trong giấc ngủ với một niềm ân hận vô cùng. Có thể, con còn quá bé bỏng để hiểu nhưng cảm xúc đang tràn ngập lòng cha. Cha hứa với con, ngay từ giây phút này, cha sẽ trở lại là người cha đích thực và luôn biết trân trọng tình yêu của con ngay cả trong giây phút nóng giận bừng bừng. Cha sẽ là người bạn trung thành của con, sẽ đau khổ khi con gặp bất hạnh, sẽ cười vui khi con gặp may mắn sung sướng. Cha sẽ cắn chặt môi để không thốt ra những lời gắt gỏng mỗi khi con quỷ giận dữ trỗi dậy trong lòng cha. Cha sẽ tự bảo mình rằng con vẫn còn bé bỏng.&lt;/p&gt;

&lt;p&gt;Ôi, hình như cha đã nhìn đứa con thơ dại của cha như nhìn một con người trưởng thành thật sự. Giờ đây, nhìn con cuộn mình trong chăn và mệt mỏi ngủ yên trên chiếc giường bé xíu, Cha chợt nhận ra rằng con chỉ là một đứa trẻ thơ ngây. Sáng sáng, con vẫn nũng nịu trong vòng tay trìu mến của mẹ. Mái tóc tơ mềm mại của con còn vướng víu trên bờ vai mẹ, cần được che chở trong cảm giác được yêu thương. Vậy mà, Cha đã đòi hỏi ở con quá nhiều…..&lt;/p&gt;

&lt;blockquote&gt;

  &lt;p&gt;Sự thực, người cha chưa từng đứng ở lập trường của một cậu bé để hiểu về cuộc sống như thế nào, hoặc ông ấy đã quên mất. Và cũng thật bất ngờ khi một đứa bé trước những sự đối xử của cha thì em vẫn rất mực yêu thương cha với sự chân thành.
  Theo mình, câu chuyện không chỉ dừng lại ở việc cách giáo dục con cái của cá bậc cha mẹ mà nó còn để lại nhiều bài học về cách sống và cách tiếp nhận cuộc sống. Ai cũng sẽ là những đứa trẻ trong lĩnh vực mới của mình và nếu chân thành như cách mà đứa trẻ đối xử với người cha ắt sẽ thành công. Và hi vọng những người anh - người cha vẫn luôn sẵn lòng đứng ở vị trí newbee để có thể cùng nhau hoàn thành công việc một cách tốt nhất.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 25 Jun 2019 22:48:45 +0000</pubDate>
        <link>/life/2019/06/25/morning-speech-cha-da-quen/</link>
        <guid isPermaLink="true">/life/2019/06/25/morning-speech-cha-da-quen/</guid>
      </item>
    
      <item>
        <title>Block và yield trong ruby</title>
        <description>&lt;h1 id=&quot;blocks&quot;&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Blocks&lt;/code&gt;&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Về cơ bản, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blocks&lt;/code&gt; trong ruby là một cách để nhóm các câu lệnh sao cho chúng ta có thể kết hợp với các lời gọi phương thức như thể chúng là các tham số.&lt;/p&gt;

&lt;p&gt;Ruby cung cấp hai cách để viết &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blocks&lt;/code&gt; là:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Sử dụng dấu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt; đối với những blocks ngắn gọn có thể viêt trên một dòng.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;array = [1,2,3,4]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Sử dụng cụm &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;do..end&lt;/code&gt;
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;array.map! do |n|
  n * n
end
=&amp;gt; [1, 4, 9, 16]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;procs&quot;&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Procs&lt;/code&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;Một proc là một instance của lớp Proc. Proc là &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;object&lt;/code&gt; còn &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;blocks&lt;/code&gt; thì không.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;p = Proc.new { puts &quot;Hello World&quot; }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Điều này cho phép chúng ta gọi các phương thức trên nó và gán nó cho các biến. Procs cũng có thể gọi lại chính nó.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;p.call  # prints 'Hello World'
p.class # returns 'Proc'
a = p   # a now equals p, a Proc instance
p       # returns a proc object '#&amp;lt;Proc:0x007f96b1a60eb0@(irb):46&amp;gt;'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;-lambdas&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt; Lambdas&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;Lambda function hầu như giống với Procs nhưng có hai điểm khác biệt:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Thứ nhất: Lambda kiểm tra số lượng phần tử đầu vào. Báo lỗi nếu không chính xác. Còn Procs thì không
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;l = lambda { &quot;I'm a lambda&quot; }
l.call
=&amp;gt; &quot;I'm a lambda&quot;
l.call('arg')
ArgumentError: wrong number of arguments (1 for 0)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;Thứ hai:  Lambdas và Procs xử lý khi gặp từ khóa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;return&lt;/code&gt; khác nhau:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def lambda_test
  lam = lambda { return }
  lam.call
  puts &quot;Hello world&quot;
end

lambda_test                 # calling lambda_test prints 'Hello World'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def proc_test
  proc = Proc.new { return }
  proc.call
  puts &quot;Hello world&quot;
end

proc_test                 # calling proc_test prints nothing
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;yield&quot;&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Yield&lt;/code&gt;&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;Yield là một cách rất hay của Ruby để thực hiện một khối trong một phương thức bất kì mà không làm ảnh hưởng. Để hiểu rõ hơn chúng ta cùng theo dõi một ví dụ:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def rb_block
  puts 'Start'
  yield
  yield
  puts 'End'
end

rb_block {puts &quot;We're in the block&quot;}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kết quả:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Start
We're in the block
We're in the block
End
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Dễ hiểu, khi thực thi method &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rb_block&lt;/code&gt;, ruby thực hiện câu bình thường cho tới khi gặp từ khóa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yield&lt;/code&gt; , ruby sẽ dừng và thực hiện block này sau đó sẽ thực thi tiếp tục các logic của method &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rb_block&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;yield-với-tham-số&quot;&gt;Yield với tham số&lt;/h2&gt;
&lt;p&gt;Để dễ hiểu, ta quan sát ví dụ:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def rb_block
    yield('hello', 'ruby')
end

rb_block { |s, r| puts s + ' ' + r
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kết quả:&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;hello ruby
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ta thấy, ruby cho phép truyển tham số vào yield trong các khối. Trong khối, chúng ta liệt kê tên của các đối số để nhận các tham số qua các dấu &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;||&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Lưu ý:&lt;/code&gt; Khi định nghĩa &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yield&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;có tham số&lt;/code&gt;, việc truyền vào tham số bắt buộc. Nếu không nhận được tham số phù hợp ruby sẽ báo lỗi.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rb_block   #`rb_block': no block given (yield) (LocalJumpError)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h1 id=&quot;tài-liệu-tham-khảo&quot;&gt;Tài liệu tham khảo&lt;/h1&gt;
&lt;p&gt;http://www.bogotobogo.com/RubyOnRails/RubyOnRails_Blocks_and_Yield.php&lt;/p&gt;

&lt;p&gt;https://code.tutsplus.com/tutorials/ruby-on-rails-study-guide-blocks-procs-and-lambdas–net-29811&lt;/p&gt;

&lt;p&gt;http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/&lt;/p&gt;

&lt;p&gt;https://viblo.asia/p/thanh-thao-ruby-block-trong-5-phut-L4x5xg2alBM/&lt;/p&gt;

&lt;p&gt;https://viblo.asia/p/block-trong-ruby-wjAM7yNOvmWe&lt;/p&gt;
</description>
        <pubDate>Tue, 20 Mar 2018 22:48:45 +0000</pubDate>
        <link>/technical/2018/03/20/ruby-block-and-yield/</link>
        <guid isPermaLink="true">/technical/2018/03/20/ruby-block-and-yield/</guid>
      </item>
    
      <item>
        <title>Git Cherry-pick</title>
        <description>&lt;h1 id=&quot;git-cherry-pick&quot;&gt;Git Cherry-pick&lt;/h1&gt;
&lt;p&gt;Đối với junior, khi bắt đầu với Git nâng cao thì có muôn vàn vấn đê cần gặp phải. Và cũng có nhiều khái niệm khi nghe lần đầu chúng ta đều thấy bỡ ngỡ.&lt;/p&gt;

&lt;p&gt;Hôm nay mình xin giới thiệu về &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git cherry-pick&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;khái-niệm&quot;&gt;Khái niệm:&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git-cherry-pick - Apply the changes introduced by some existing commits
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hiểu một cách chi tiết, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cherry-pick&lt;/code&gt; là một cách để checkout một commit tại branch nhất định về branch hiện tại.&lt;/p&gt;

&lt;h2 id=&quot;cú-pháp&quot;&gt;Cú pháp&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git cherry-pick [--edit] [-n] [-m parent-number] [-s] [-x] [--ff]
		  [-S[&amp;lt;keyid&amp;gt;]] &amp;lt;commit&amp;gt;…​
git cherry-pick --continue
git cherry-pick --quit
git cherry-pick --abort
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ví-dụ&quot;&gt;Ví dụ&lt;/h2&gt;
&lt;p&gt;Yêu cầu: apply code từ commit F của nhánh dev về nhánh rel_2.3
&lt;img src=&quot;https://images.viblo.asia/099e65eb-c8d6-4871-af82-a0b099dce187.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ git checkout rel_2.3 # Đầu tiên ta checkout về nhánh rel_2.3
$ git cherry-pick dev~2
#Hoặc cũng có thể viết :
$ git cherry-pick F # F ở đây là hash commit
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Kết quả:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images.viblo.asia/83664572-df3b-42c1-bb99-72d1cd55b217.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nhánh rel_2.3 đã được apply code từ commit F của nhánh dev.
Việc cần làm tiếp theo là sửa conflig như rebase và merge bình thường.&lt;/p&gt;
&lt;h2 id=&quot;cherry-pick-và-merge&quot;&gt;Cherry-pick và Merge&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Ơ! Nếu thế thì tại sao ta lại không dùng &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;merge&lt;/code&gt; trong trường hợp này nhỉ.&lt;/li&gt;
  &lt;li&gt;Câu trả lời là: Merge sẽ lấy &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commit cuối cùng&lt;/code&gt; của nhánh &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dev&lt;/code&gt; tức &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;H&lt;/code&gt; để áp dụng vào nhánh rel_2.3
Tức: &lt;img src=&quot;https://images.viblo.asia/ce3195a5-6a80-46c4-92aa-e2e91da9c7e5.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;tài-liệu-tham-khảo&quot;&gt;Tài liệu tham khảo&lt;/h2&gt;
&lt;p&gt;https://git-scm.com/docs/git-cherry-pick&lt;/p&gt;

&lt;p&gt;https://stackoverflow.com/questions/9339429/what-does-cherry-picking-a-commit-with-git-mean&lt;/p&gt;

&lt;p&gt;https://nathanhoad.net/how-to-cherry-pick-changes-with-git&lt;/p&gt;
</description>
        <pubDate>Tue, 20 Mar 2018 22:48:45 +0000</pubDate>
        <link>/technical/2018/03/20/git-cherry-pick/</link>
        <guid isPermaLink="true">/technical/2018/03/20/git-cherry-pick/</guid>
      </item>
    

    
      
        
      
    
      
    
      
        
          <item>
            <title></title>
            <description>&lt;h3&gt;  {{ page.title }} &lt;/h3&gt;

&lt;div id=&quot;categories&quot;&gt;
{% for category in site.categories %}
  &lt;div class=&quot;category-box&quot; &gt;
    {% capture category_name %}{{ category | first }}{% endcapture %}
    &lt;div id=&quot;#{{ category_name | slugize }}&quot;&gt;&lt;/div&gt;
    &lt;h4 class=&quot;category-head&quot;&gt;&lt;a href=&quot;{{ site.baseurl }}/blog/categories/{{ category_name }}&quot;&gt;{{ category_name }}&lt;/a&gt;&lt;/h4&gt;
    &lt;a name=&quot;{{ category_name | slugize }}&quot;&gt;&lt;/a&gt;
     {% for post in site.categories[category_name] %}
    &lt;article class=&quot;center&quot;&gt;
      &lt;h6 &gt;&lt;a href=&quot;{{ site.baseurl }}{{ post.url }}&quot;&gt;{{post.title}}&lt;/a&gt;&lt;/h6&gt;
    &lt;/article&gt;


    {% endfor %}

  &lt;/div&gt;
{% endfor %}
&lt;/div&gt;


</description>
            <link>/blog/categories/</link>
          </item>
        
      
    
      
    
      
    
      
        
          <item>
            <title>Guides</title>
            <description>&lt;h5&gt; Posts by Category : {{ page.title }} &lt;/h5&gt;

&lt;div class=&quot;card&quot;&gt;
{% for post in site.categories.guides %}
 &lt;li class=&quot;category-posts&quot;&gt;&lt;span&gt;{{ post.date | date_to_string }}&lt;/span&gt; &amp;nbsp; &lt;a href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/div&gt;</description>
            <link>/blog/categories/guides/</link>
          </item>
        
      
    
      
    
      
    
      
    
      
        
          <item>
            <title>Get Started</title>
            <description>## Getting Started - How to use “devlopr-jekyll” theme

## What's Jekyll ?

If you aren’t familiar with Jekyll yet, you should know that it is a static site generator. It will transform your plain text into static websites and blogs. No more databases, slow loading websites, risk of being hacked…just your content. And not only that, with Jekyll you get free hosting with GitHub Pages! If you are a beginner we recommend you start with [Jekyll’s Docs](https://jekyllrb.com/docs/installation/). Now, if you know how to use Jekyll, let’s move on to using this theme in Jekyll:

### Steps to create your blog using devlopr-jekyll and Host using Github Pages :

&gt;  **Step 1.**  Fork the repo - [click here](https://github.com/sujaykundu777/devlopr-jekyll/fork)

![Devlopr Jekyll Repo](/assets/img/posts/fork1.png){:class=&quot;img-fluid&quot;}

&gt; **Step 2.** Use **your-github-username.github.io** as the new repo  ( Replace your-github-username with yours). Remember if you use the name other than your-github-username.github.io , your blog will be built using gh-pages branch.

![Devlopr Jekyll Repo](/assets/img/posts/fork2.png){:class=&quot;img-fluid&quot;}

![Devlopr Jekyll Repo](/assets/img/posts/fork3.png){:class=&quot;img-fluid&quot;}

&gt; **Step 3.** Clone the new repo locally to make changes :

![Devlopr Jekyll Repo](/assets/img/posts/fork31.png){:class=&quot;img-fluid&quot;}

![Devlopr Jekyll Repo](/assets/img/posts/fork32.png){:class=&quot;img-fluid&quot;}

![Devlopr Jekyll Repo](/assets/img/posts/fork33.png){:class=&quot;img-fluid&quot;}

```bash
 $ git clone https://github.com/yourusername/yourusername.github.io
 $ cd yourusername.github.io
 $ code .
```

&gt; **Step 4.** Open the files using VSCode and edit _config.yml and edit with your details:

- _config.yml file - replace with your own details
- _posts - Add your blog posts here
- _includes - You can replace the contents of the files with your data. (contains widgets)
- _assets/img - Add all your images here

![Devlopr Jekyll Repo](/assets/img/posts/fork34.png){:class=&quot;img-fluid&quot;}

&gt; **Step 5** - Install the development requirements:

### Set up local development environment

1. [Git](https://git-scm.com/)
2. [Ruby](https://www.ruby-lang.org/) and [Bundler](https://bundler.io/)
3. [VSCode](https://code.visualstudio.com/download)

We need ruby and bundler to build our site locally. After installation check if its working:

For ruby :

```bash
$ ruby -v
ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]
```
For bundler :

```bash
$ gem install bundler
$ bundler -v
Bundler version 2.1.4
```
Add jekyll :

```bash
$ bundle add jekyll
```
 This command will add the Jekyll gem to our Gemfile and install it to the ./vendor/bundle/ folder.

You can check the jekyll version

```
$ bundle exec jekyll -v
jekyll 4.0.0
```

&gt; **Step 6.** Install the gem dependencies by running the following command

```bash
$ bundle update
$ bundle install
```

&gt; **Step 7.** Serve the site locally by running the following command below:

```bash
$ bundle exec jekyll serve --watch
```
or you can also serve using :

```bash
$ jekyll serve
```

Visit [http://localhost:4000](http://localhost:4000) for development server

![Devlopr Jekyll Repo](/assets/img/posts/fork4.png){:class=&quot;img-fluid&quot;}

![Devlopr Jekyll Repo](/assets/img/posts/fork41.png){:class=&quot;img-fluid&quot;}

### Adding Content

Start populating your blog by adding your .md files in _posts. devlopr-jekyll already has a few examples.

#### YAML Post Example:

```yml
---
layout: post
title: Sample Post
author: Sujay Kundu
date: '2019-05-21 14:35:23 +0530'
category:
        - jekyll
summary: This is the summary for the sample post
thumbnail: sample.png
---

Hi ! This is sample post.

```

#### YAML Page Example:

```yml
---
layout: page
title: Sample Page
menus: header
permalink: /sample-page/
---

Hi ! This is sample page.
```

#### Editing stylesheet

You’ll only work with a single file to edit/add theme style: assets/css/main.scss.

### Deploy your Changes

Once happy with your blog changes. Push your changes to master branch.

&gt; **Step 8.** Push Your Local Changes

```bash
 $ git add .
 $ git commit -m &quot;my new blog using devlopr-jekyll&quot;
 $ git push origin master
```

Visit your Github Repo settings ! Enable master branch as Github Pages Branch :

![Devlopr Jekyll Repo](/assets/img/posts/fork6.png){:class=&quot;img-fluid&quot;}

&gt; **Step 9.** Deploy your Blog :

![Devlopr Jekyll Repo](/assets/img/posts/fork7.png){:class=&quot;img-fluid&quot;}

&gt; Congrats ! On your new shining Blog !

You can visit the blog using [http://your-github-username.github.io](http://your-github-username.github.io).
</description>
            <link>/get-started/</link>
          </item>
        
      
    
      
        
          <item>
            <title>Jekyll</title>
            <description>&lt;h5&gt; Posts by Category : {{ page.title }} &lt;/h5&gt;

&lt;div class=&quot;card&quot;&gt;
{% for post in site.categories.jekyll %}
 &lt;li class=&quot;category-posts&quot;&gt;&lt;span&gt;{{ post.date | date_to_string }}&lt;/span&gt; &amp;nbsp; &lt;a href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/div&gt;</description>
            <link>/blog/categories/jekyll/</link>
          </item>
        
      
    
      
        
          <item>
            <title>Life</title>
            <description>&lt;h5&gt; Posts by Category : {{ page.title }} &lt;/h5&gt;

&lt;div class=&quot;card&quot;&gt;
{% for post in site.categories.life %}
 &lt;li class=&quot;category-posts&quot;&gt;&lt;span&gt;{{ post.date | date_to_string }}&lt;/span&gt; &amp;nbsp; &lt;a href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/div&gt;
</description>
            <link>/blog/categories/life/</link>
          </item>
        
      
    
      
    
      
    
      
        
          <item>
            <title>Guides</title>
            <description>&lt;h5&gt; Posts by Category : {{ page.title }} &lt;/h5&gt;

&lt;div class=&quot;card&quot;&gt;
{% for post in site.categories.sample_category %}
 &lt;li class=&quot;category-posts&quot;&gt;&lt;span&gt;{{ post.date | date_to_string }}&lt;/span&gt; &amp;nbsp; &lt;a href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/div&gt;</description>
            <link>/blog/categories/sample_category/</link>
          </item>
        
      
    
      
    
      
    
      
        
          <item>
            <title>Our Sponsors</title>
            <description>Thanks to all the amazing contributors and our Backers for the support.

- [Dirish Mohan](https://dirishmohan.com)</description>
            <link>/sponsors/</link>
          </item>
        
      
    
      
        
          <item>
            <title>Styleguide</title>
            <description>&lt;h1 class=&quot;text-center&quot;&gt; devlopr jekyll - Styleguide &lt;/h1&gt;

&lt;hr /&gt;

 &lt;img src=&quot;/assets/img/styleguide.png&quot; class=&quot;img-fluid&quot;&gt;

&lt;p&gt; Lets try the different text styles  &lt;b&gt; Bold &lt;/b&gt; , &lt;strong&gt; Strong &lt;/strong&gt;, &lt;em&gt; Emphasis &lt;/em&gt;, &lt;i&gt; Italic &lt;/i&gt; &lt;/p&gt;


&lt;p&gt; Now, lets try different heading styles : &lt;/p&gt;

&lt;h1&gt; Hello in h1 ! &lt;/h1&gt;
&lt;h2&gt; Hello in h2 ! &lt;/h2&gt;
&lt;h3&gt; Hello in h3 ! &lt;/h3&gt;
&lt;h4&gt; Hello in h4 ! &lt;/h4&gt;
&lt;h5&gt; Hello in h5 ! &lt;/h5&gt;
&lt;h6&gt; Hello in h6 ! &lt;/h6&gt;

&lt;hr /&gt;
&lt;p&gt; Unordered List &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt; List Item 1 &lt;/li&gt;
&lt;li&gt; List Item 2 &lt;/li&gt;
&lt;li&gt; List Item 3 &lt;/li&gt;
&lt;li&gt; List Item 4 &lt;/li&gt;
&lt;li&gt; List Item 5 &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt; Ordered List &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt; List Item 1 &lt;/li&gt;
&lt;li&gt; List Item 2 &lt;/li&gt;
&lt;li&gt; List Item 3 &lt;/li&gt;
&lt;li&gt; List Item 4 &lt;/li&gt;
&lt;li&gt; List Item 5 &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
&lt;p&gt;This is a Block Quote,  It can Expand Multiple Lines &lt;/p&gt;

&lt;/blockquote&gt;

&lt;p&gt;You can use the mark tag to &lt;mark&gt;highlight&lt;/mark&gt; text. &lt;/p&gt;

&lt;p&gt;&lt;del&gt; This line of text is meant to be deleted text &lt;/del&gt; &lt;/p&gt;

&lt;p&gt;&lt;u&gt;This line of text will render as underlined&lt;/u&gt;&lt;/p&gt;
&lt;p&gt;&lt;small&gt;This line of text is meant to be treated as fine print.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;This line rendered as bold text.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This line rendered as italicized text.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;abbr title=&quot;attribute&quot;&gt;attr&lt;/abbr&gt;&lt;/p&gt;
&lt;p&gt;&lt;abbr title=&quot;HyperText Markup Language&quot; class=&quot;initialism&quot;&gt;HTML&lt;/abbr&gt;&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;responsive-table&quot;&gt;
&lt;table&gt;
      &lt;thead&gt;
        &lt;tr&gt;
          &lt;th scope=&quot;col&quot;&gt;#&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
          &lt;th scope=&quot;col&quot;&gt;Heading&lt;/th&gt;
        &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;th scope=&quot;row&quot;&gt;1&lt;/th&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th scope=&quot;row&quot;&gt;2&lt;/th&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;th scope=&quot;row&quot;&gt;3&lt;/th&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
          &lt;td&gt;Cell&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;/div&gt;

&lt;hr /&gt;

&lt;h3&gt;YouTube Responsive Embed&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/nuwjUZCSB2Y?rel=0&amp;amp;controls=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; encrypted-media&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;hr /&gt;

&lt;h3&gt;Vimeo Responsive Embed&lt;/h3&gt;

&lt;iframe src=&quot;https://player.vimeo.com/video/212114694?title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; width=&quot;640&quot; height=&quot;360&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;ted-responsive-embed&quot;&gt;TED Responsive Embed&lt;/h3&gt;

&lt;iframe src=&quot;https://embed.ted.com/talks/ted_halstead_a_climate_solution_where_all_sides_can_win&quot; width=&quot;640&quot; height=&quot;360&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;twitch-responsive-embed&quot;&gt;Twitch Responsive Embed&lt;/h3&gt;

&lt;iframe src=&quot;https://player.twitch.tv/?autoplay=false&amp;amp;video=v248755437&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;true&quot; scrolling=&quot;no&quot; height=&quot;378&quot; width=&quot;620&quot;&gt;&lt;/iframe&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;soundcloud-embed&quot;&gt;SoundCloud Embed&lt;/h3&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;166&quot; scrolling=&quot;no&quot; frameborder=&quot;no&quot; src=&quot;https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/29738591&amp;amp;color=ff5500&amp;amp;auto_play=false&amp;amp;hide_related=false&amp;amp;show_comments=true&amp;amp;show_user=true&amp;amp;show_reposts=false&quot;&gt;&lt;/iframe&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;codepen-embed&quot;&gt;CodePen Embed&lt;/h3&gt;

&lt;p data-height=&quot;265&quot; data-theme-id=&quot;light&quot; data-slug-hash=&quot;YWvpRo&quot; data-default-tab=&quot;css,result&quot; data-user=&quot;kharrop&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Referral Form&quot; class=&quot;codepen&quot;&gt;&lt;/p&gt;
&lt;script async=&quot;&quot; src=&quot;https://production-assets.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;syntax-highlighting&quot;&gt;Syntax Highlighting&lt;/h3&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span class=&quot;s1&quot;&gt;'use strict'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;markdown&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'markdown'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;markdown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Editor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;preview&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;preview&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;innerHTML&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;markdown&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toHTML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;editor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;You can add inline code just like this, E.g. &lt;code class=&quot;highlighter-rouge&quot;&gt;.code { color: #fff; }&lt;/code&gt;&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nt&quot;&gt;pre&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#f4f4f4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;max-width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;overflow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;github-gist-embed&quot;&gt;GitHub gist Embed&lt;/h3&gt;

&lt;script src=&quot;https://gist.github.com/ahmadajmi/dbb4f713317721668bcbc39420562afc.js&quot;&gt;&lt;/script&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;input-style&quot;&gt;Input Style&lt;/h3&gt;

&lt;p&gt;&lt;input type=&quot;text&quot; placeholder=&quot;I'm an input field!&quot; /&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h3&gt; Twitter Embed &lt;/h3&gt;

&lt;blockquote class=&quot;twitter-tweet&quot; data-lang=&quot;en&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;I just published “Deploying a blog using Jekyll and Github Pages with SSL certificate for Free” &lt;a href=&quot;https://t.co/B3T3IQVU93&quot;&gt;https://t.co/B3T3IQVU93&lt;/a&gt;&lt;/p&gt;&amp;mdash; Sujay Kundu (@SujayKundu777) &lt;a href=&quot;https://twitter.com/SujayKundu777/status/1012601950469160962?ref_src=twsrc%5Etfw&quot;&gt;June 29, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;

&lt;hr /&gt;

&lt;h3&gt; Instagram Embed &lt;/h3&gt;

&lt;blockquote class=&quot;instagram-media&quot; data-instgrm-permalink=&quot;https://www.instagram.com/p/BhFTg6uhNRi/&quot; data-instgrm-version=&quot;9&quot; style=&quot; background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);&quot;&gt;&lt;div style=&quot;padding:8px;&quot;&gt; &lt;div style=&quot; background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;&quot;&gt; &lt;div style=&quot; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;p style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;&quot;&gt;&lt;a href=&quot;https://www.instagram.com/p/BhFTg6uhNRi/&quot; style=&quot; color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;&quot; target=&quot;_blank&quot;&gt;A post shared by Ahmad Ajmi (@ahmadajme)&lt;/a&gt; on &lt;time style=&quot; font-family:Arial,sans-serif; font-size:14px; line-height:17px;&quot; datetime=&quot;2018-04-02T21:18:58+00:00&quot;&gt;Apr 2, 2018 at 2:18pm PDT&lt;/time&gt;&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt; &lt;script async defer src=&quot;//www.instagram.com/embed.js&quot;&gt;&lt;/script&gt;

</description>
            <link>/styleguide/</link>
          </item>
        
      
    
      
        
          <item>
            <title>Technical</title>
            <description>&lt;h5&gt; Posts by Category : {{ page.title }} &lt;/h5&gt;

&lt;div class=&quot;card&quot;&gt;
{% for post in site.categories.technical %}
 &lt;li class=&quot;category-posts&quot;&gt;&lt;span&gt;{{ post.date | date_to_string }}&lt;/span&gt; &amp;nbsp; &lt;a href=&quot;{{ post.url }}&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/div&gt;
</description>
            <link>/blog/categories/technical/</link>
          </item>
        
      
    
      
    
      
    
      
    

  </channel>
</rss>